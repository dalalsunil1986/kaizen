var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"ï»¿",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};window["rangy"]=function(){function u(n,r){var i=typeof n[r];return i==t||!!(i==e&&n[r])||i=="unknown"}function a(t,n){return!!(typeof t[n]==e&&t[n])}function f(e,t){return typeof e[t]!=n}function l(e){return function(t,n){var r=n.length;while(r--){if(!e(t,n[r])){return false}}return true}}function d(e){return e&&c(e,o)&&p(e,s)}function m(e){window.alert("Rangy not supported in your browser. Reason: "+e);v.initialized=true;v.supported=false}function g(e){var t="Rangy warning: "+e;if(v.config.alertOnWarn){window.alert(t)}else if(typeof window.console!=n&&typeof window.console.log!=n){window.console.log(t)}}function w(){if(v.initialized){return}var e;var t=false,n=false;if(u(document,"createRange")){e=document.createRange();if(c(e,i)&&p(e,r)){t=true}e.detach()}var s=a(document,"body")?document.body:document.getElementsByTagName("body")[0];if(s&&u(s,"createTextRange")){e=s.createTextRange();if(d(e)){n=true}}if(!t&&!n){m("Neither Range nor TextRange are implemented")}v.initialized=true;v.features={implementsDomRange:t,implementsTextRange:n};var o=b.concat(y);for(var f=0,l=o.length;f<l;++f){try{o[f](v)}catch(h){if(a(window,"console")&&u(window.console,"log")){window.console.log("Init listener threw an exception. Continuing.",h)}}}}function S(e){e=e||window;w();for(var t=0,n=E.length;t<n;++t){E[t](e)}}function x(e){this.name=e;this.initialized=false;this.supported=false}var e="object",t="function",n="undefined";var r=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"];var i=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"];var s=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"];var o=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"];var c=l(u);var h=l(a);var p=l(f);var v={version:"1.2.2",initialized:false,supported:true,util:{isHostMethod:u,isHostObject:a,isHostProperty:f,areHostMethods:c,areHostObjects:h,areHostProperties:p,isTextRange:d},features:{},modules:{},config:{alertOnWarn:false,preferTextRange:false}};v.fail=m;v.warn=g;if({}.hasOwnProperty){v.util.extend=function(e,t){for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}}}else{m("hasOwnProperty not supported")}var y=[];var b=[];v.init=w;v.addInitListener=function(e){if(v.initialized){e(v)}else{y.push(e)}};var E=[];v.addCreateMissingNativeApiListener=function(e){E.push(e)};v.createMissingNativeApi=S;x.prototype.fail=function(e){this.initialized=true;this.supported=false;throw new Error("Module '"+this.name+"' failed to load: "+e)};x.prototype.warn=function(e){v.warn("Module "+this.name+": "+e)};x.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)};v.createModule=function(e,t){var n=new x(e);v.modules[e]=n;b.push(function(e){t(e,n);n.initialized=true;n.supported=true})};v.requireModules=function(e){for(var t=0,n=e.length,r,i;t<n;++t){i=e[t];r=v.modules[i];if(!r||!(r instanceof x)){throw new Error("Module '"+i+"' not found")}if(!r.supported){throw new Error("Module '"+i+"' not supported")}}};var T=false;var N=function(e){if(!T){T=true;if(!v.initialized){w()}}};if(typeof window==n){m("No window found");return}if(typeof document==n){m("No document found");return}if(u(document,"addEventListener")){document.addEventListener("DOMContentLoaded",N,false)}if(u(window,"addEventListener")){window.addEventListener("load",N,false)}else if(u(window,"attachEvent")){window.attachEvent("onload",N)}else{m("Window does not have required addEventListener or attachEvent method")}return v}();rangy.createModule("DomUtil",function(e,t){function u(e){var t;return typeof e.namespaceURI==n||(t=e.namespaceURI)===null||t=="http://www.w3.org/1999/xhtml"}function a(e){var t=e.parentNode;return t.nodeType==1?t:null}function f(e){var t=0;while(e=e.previousSibling){t++}return t}function l(e){var t;return d(e)?e.length:(t=e.childNodes)?t.length:0}function c(e,t){var n=[],r;for(r=e;r;r=r.parentNode){n.push(r)}for(r=t;r;r=r.parentNode){if(o(n,r)){return r}}return null}function h(e,t,n){var r=n?t:t.parentNode;while(r){if(r===e){return true}else{r=r.parentNode}}return false}function p(e,t,n){var r,i=n?e:e.parentNode;while(i){r=i.parentNode;if(r===t){return i}i=r}return null}function d(e){var t=e.nodeType;return t==3||t==4||t==8}function v(e,t){var n=t.nextSibling,r=t.parentNode;if(n){r.insertBefore(e,n)}else{r.appendChild(e)}return e}function m(e,t){var n=e.cloneNode(false);n.deleteData(0,t);e.deleteData(t,e.length-t);v(n,e);return n}function g(e){if(e.nodeType==9){return e}else if(typeof e.ownerDocument!=n){return e.ownerDocument}else if(typeof e.document!=n){return e.document}else if(e.parentNode){return g(e.parentNode)}else{throw new Error("getDocument: no document found for node")}}function y(e){var t=g(e);if(typeof t.defaultView!=n){return t.defaultView}else if(typeof t.parentWindow!=n){return t.parentWindow}else{throw new Error("Cannot get a window object for node")}}function b(e){if(typeof e.contentDocument!=n){return e.contentDocument}else if(typeof e.contentWindow!=n){return e.contentWindow.document}else{throw new Error("getIframeWindow: No Document object found for iframe element")}}function w(e){if(typeof e.contentWindow!=n){return e.contentWindow}else if(typeof e.contentDocument!=n){return e.contentDocument.defaultView}else{throw new Error("getIframeWindow: No Window object found for iframe element")}}function E(e){return r.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]}function S(e){var t;while(t=e.parentNode){e=t}return e}function x(e,t,n,r){var i,s,o,u,a;if(e==n){return t===r?0:t<r?-1:1}else if(i=p(n,e,true)){return t<=f(i)?-1:1}else if(i=p(e,n,true)){return f(i)<r?-1:1}else{s=c(e,n);o=e===s?s:p(e,s,true);u=n===s?s:p(n,s,true);if(o===u){throw new Error("comparePoints got to case 4 and childA and childB are the same!")}else{a=s.firstChild;while(a){if(a===o){return-1}else if(a===u){return 1}a=a.nextSibling}throw new Error("Should not be here!")}}}function T(e){var t=g(e).createDocumentFragment(),n;while(n=e.firstChild){t.appendChild(n)}return t}function N(e){if(!e){return"[No node]"}if(d(e)){return'"'+e.data+'"'}else if(e.nodeType==1){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">["+e.childNodes.length+"]"}else{return e.nodeName}}function C(e){this.root=e;this._next=e}function k(e){return new C(e)}function L(e,t){this.node=e;this.offset=t}function A(e){this.code=this[e];this.codeName=e;this.message="DOMException: "+this.codeName}var n="undefined";var r=e.util;if(!r.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])){t.fail("document missing a Node creation method")}if(!r.isHostMethod(document,"getElementsByTagName")){t.fail("document missing getElementsByTagName method")}var i=document.createElement("div");if(!r.areHostMethods(i,["insertBefore","appendChild","cloneNode"]||!r.areHostObjects(i,["previousSibling","nextSibling","childNodes","parentNode"]))){t.fail("Incomplete Element implementation")}if(!r.isHostProperty(i,"innerHTML")){t.fail("Element is missing innerHTML property")}var s=document.createTextNode("test");if(!r.areHostMethods(s,["splitText","deleteData","insertData","appendData","cloneNode"]||!r.areHostObjects(i,["previousSibling","nextSibling","childNodes","parentNode"])||!r.areHostProperties(s,["data"]))){t.fail("Incomplete Text Node implementation")}var o=function(e,t){var n=e.length;while(n--){if(e[n]===t){return true}}return false};C.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;var t,n;if(this._current){t=e.firstChild;if(t){this._next=t}else{n=null;while(e!==this.root&&!(n=e.nextSibling)){e=e.parentNode}this._next=n}}return this._current},detach:function(){this._current=this._next=this.root=null}};L.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+N(this.node)+":"+this.offset+")]"}};A.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};A.prototype.toString=function(){return this.message};e.dom={arrayContains:o,isHtmlNamespace:u,parentElement:a,getNodeIndex:f,getNodeLength:l,getCommonAncestor:c,isAncestorOf:h,getClosestAncestorIn:p,isCharacterDataNode:d,insertAfter:v,splitDataNode:m,getDocument:g,getWindow:y,getIframeWindow:w,getIframeDocument:b,getBody:E,getRootContainer:S,comparePoints:x,inspectNode:N,fragmentFromNodeChildren:T,createIterator:k,DomPosition:L};e.DOMException=A});rangy.createModule("DomRange",function(e,t){function s(e,t){return e.nodeType!=3&&(n.isAncestorOf(e,t.startContainer,true)||n.isAncestorOf(e,t.endContainer,true))}function o(e){return n.getDocument(e.startContainer)}function u(e,t,n){var r=e._listeners[t];if(r){for(var i=0,s=r.length;i<s;++i){r[i].call(e,{target:e,args:n})}}}function a(e){return new r(e.parentNode,n.getNodeIndex(e))}function f(e){return new r(e.parentNode,n.getNodeIndex(e)+1)}function l(e,t,r){var i=e.nodeType==11?e.firstChild:e;if(n.isCharacterDataNode(t)){if(r==t.length){n.insertAfter(e,t)}else{t.parentNode.insertBefore(e,r==0?t:n.splitDataNode(t,r))}}else if(r>=t.childNodes.length){t.appendChild(e)}else{t.insertBefore(e,t.childNodes[r])}return i}function c(e){var t;for(var n,r=o(e.range).createDocumentFragment(),s;n=e.next();){t=e.isPartiallySelectedSubtree();n=n.cloneNode(!t);if(t){s=e.getSubtreeIterator();n.appendChild(c(s));s.detach(true)}if(n.nodeType==10){throw new i("HIERARCHY_REQUEST_ERR")}r.appendChild(n)}return r}function h(e,t,r){var i,s;r=r||{stop:false};for(var o,u;o=e.next();){if(e.isPartiallySelectedSubtree()){if(t(o)===false){r.stop=true;return}else{u=e.getSubtreeIterator();h(u,t,r);u.detach(true);if(r.stop){return}}}else{i=n.createIterator(o);while(s=i.next()){if(t(s)===false){r.stop=true;return}}}}}function p(e){var t;while(e.next()){if(e.isPartiallySelectedSubtree()){t=e.getSubtreeIterator();p(t);t.detach(true)}else{e.remove()}}}function d(e){for(var t,n=o(e.range).createDocumentFragment(),r;t=e.next();){if(e.isPartiallySelectedSubtree()){t=t.cloneNode(false);r=e.getSubtreeIterator();t.appendChild(d(r));r.detach(true)}else{e.remove()}if(t.nodeType==10){throw new i("HIERARCHY_REQUEST_ERR")}n.appendChild(t)}return n}function v(e,t,n){var r=!!(t&&t.length),i;var s=!!n;if(r){i=new RegExp("^("+t.join("|")+")$")}var o=[];h(new g(e,false),function(e){if((!r||i.test(e.nodeType))&&(!s||n(e))){o.push(e)}});return o}function m(e){var t=typeof e.getName=="undefined"?"Range":e.getName();return"["+t+"("+n.inspectNode(e.startContainer)+":"+e.startOffset+", "+n.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function g(e,t){this.range=e;this.clonePartiallySelectedTextNodes=t;if(!e.collapsed){this.sc=e.startContainer;this.so=e.startOffset;this.ec=e.endContainer;this.eo=e.endOffset;var r=e.commonAncestorContainer;if(this.sc===this.ec&&n.isCharacterDataNode(this.sc)){this.isSingleCharacterDataNode=true;this._first=this._last=this._next=this.sc}else{this._first=this._next=this.sc===r&&!n.isCharacterDataNode(this.sc)?this.sc.childNodes[this.so]:n.getClosestAncestorIn(this.sc,r,true);this._last=this.ec===r&&!n.isCharacterDataNode(this.ec)?this.ec.childNodes[this.eo-1]:n.getClosestAncestorIn(this.ec,r,true)}}}function y(e){this.code=this[e];this.codeName=e;this.message="RangeException: "+this.codeName}function b(e,t,n){this.nodes=v(e,t,n);this._next=this.nodes[0];this._position=0}function N(e){return function(t,r){var i,s=r?t:t.parentNode;while(s){i=s.nodeType;if(n.arrayContains(e,i)){return s}s=s.parentNode}return null}}function O(e,t){if(A(e,t)){throw new y("INVALID_NODE_TYPE_ERR")}}function M(e){if(!e.startContainer){throw new i("INVALID_STATE_ERR")}}function _(e,t){if(!n.arrayContains(t,e.nodeType)){throw new y("INVALID_NODE_TYPE_ERR")}}function D(e,t){if(t<0||t>(n.isCharacterDataNode(e)?e.length:e.childNodes.length)){throw new i("INDEX_SIZE_ERR")}}function P(e,t){if(k(e,true)!==k(t,true)){throw new i("WRONG_DOCUMENT_ERR")}}function H(e){if(L(e,true)){throw new i("NO_MODIFICATION_ALLOWED_ERR")}}function B(e,t){if(!e){throw new i(t)}}function j(e){return!n.arrayContains(E,e.nodeType)&&!k(e,true)}function F(e,t){return t<=(n.isCharacterDataNode(e)?e.length:e.childNodes.length)}function I(e){M(e);if(j(e.startContainer)||j(e.endContainer)||!F(e.startContainer,e.startOffset)||!F(e.endContainer,e.endOffset)){throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}}function Z(){}function et(e){e.START_TO_START=X;e.START_TO_END=V;e.END_TO_END=$;e.END_TO_START=J;e.NODE_BEFORE=K;e.NODE_AFTER=Q;e.NODE_BEFORE_AND_AFTER=G;e.NODE_INSIDE=Y}function tt(e){et(e);et(e.prototype)}function nt(e,t){return function(){I(this);var r=this.startContainer,i=this.startOffset,s=this.commonAncestorContainer;var o=new g(this,true);var u,a;if(r!==s){u=n.getClosestAncestorIn(r,s,true);a=f(u);r=a.node;i=a.offset}h(o,H);o.reset();var l=e(o);o.detach();t(this,r,i,r,i);return l}}function rt(t,r,i){function o(e,t){return function(n){M(this);_(n,w);_(C(n),E);var r=(e?a:f)(n);(t?u:l)(this,r.node,r.offset)}}function u(e,t,i){var s=e.endContainer,o=e.endOffset;if(t!==e.startContainer||i!==e.startOffset){if(C(t)!=C(s)||n.comparePoints(t,i,s,o)==1){s=t;o=i}r(e,t,i,s,o)}}function l(e,t,i){var s=e.startContainer,o=e.startOffset;if(t!==e.endContainer||i!==e.endOffset){if(C(t)!=C(s)||n.comparePoints(t,i,s,o)==-1){s=t;o=i}r(e,s,o,t,i)}}function c(e,t,n){if(t!==e.startContainer||n!==e.startOffset||t!==e.endContainer||n!==e.endOffset){r(e,t,n,t,n)}}t.prototype=new Z;e.util.extend(t.prototype,{setStart:function(e,t){M(this);O(e,true);D(e,t);u(this,e,t)},setEnd:function(e,t){M(this);O(e,true);D(e,t);l(this,e,t)},setStartBefore:o(true,true),setStartAfter:o(false,true),setEndBefore:o(true,false),setEndAfter:o(false,false),collapse:function(e){I(this);if(e){r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset)}else{r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)}},selectNodeContents:function(e){M(this);O(e,true);r(this,e,0,e,n.getNodeLength(e))},selectNode:function(e){M(this);O(e,false);_(e,w);var t=a(e),n=f(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:nt(d,r),deleteContents:nt(p,r),canSurroundContents:function(){I(this);H(this.startContainer);H(this.endContainer);var e=new g(this,true);var t=e._first&&s(e._first,this)||e._last&&s(e._last,this);e.detach();return!t},detach:function(){i(this)},splitBoundaries:function(){I(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,s=this.endOffset;var o=e===i;if(n.isCharacterDataNode(i)&&s>0&&s<i.length){n.splitDataNode(i,s)}if(n.isCharacterDataNode(e)&&t>0&&t<e.length){e=n.splitDataNode(e,t);if(o){s-=t;i=e}else if(i==e.parentNode&&s>=n.getNodeIndex(e)){s++}t=0}r(this,e,t,i,s)},normalizeBoundaries:function(){I(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,s=this.endOffset;var o=function(e){var t=e.nextSibling;if(t&&t.nodeType==e.nodeType){i=e;s=e.length;e.appendData(t.data);t.parentNode.removeChild(t)}};var u=function(r){var o=r.previousSibling;if(o&&o.nodeType==r.nodeType){e=r;var u=r.length;t=o.length;r.insertData(0,o.data);o.parentNode.removeChild(o);if(e==i){s+=t;i=e}else if(i==r.parentNode){var a=n.getNodeIndex(r);if(s==a){i=r;s=u}else if(s>a){s--}}}};var a=true;if(n.isCharacterDataNode(i)){if(i.length==s){o(i)}}else{if(s>0){var f=i.childNodes[s-1];if(f&&n.isCharacterDataNode(f)){o(f)}}a=!this.collapsed}if(a){if(n.isCharacterDataNode(e)){if(t==0){u(e)}}else{if(t<e.childNodes.length){var l=e.childNodes[t];if(l&&n.isCharacterDataNode(l)){u(l)}}}}else{e=i;t=s}r(this,e,t,i,s)},collapseToPoint:function(e,t){M(this);O(e,true);D(e,t);c(this,e,t)}});tt(t)}function it(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset;e.commonAncestorContainer=e.collapsed?e.startContainer:n.getCommonAncestor(e.startContainer,e.endContainer)}function st(e,t,n,r,i){var s=e.startContainer!==t||e.startOffset!==n;var o=e.endContainer!==r||e.endOffset!==i;e.startContainer=t;e.startOffset=n;e.endContainer=r;e.endOffset=i;it(e);u(e,"boundarychange",{startMoved:s,endMoved:o})}function ot(e){M(e);e.startContainer=e.startOffset=e.endContainer=e.endOffset=null;e.collapsed=e.commonAncestorContainer=null;u(e,"detach",null);e._listeners=null}function ut(e){this.startContainer=e;this.startOffset=0;this.endContainer=e;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};it(this)}e.requireModules(["DomUtil"]);var n=e.dom;var r=n.DomPosition;var i=e.DOMException;g.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:false,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;if(e){this._next=e!==this._last?e.nextSibling:null;if(n.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes){if(e===this.ec){(e=e.cloneNode(true)).deleteData(this.eo,e.length-this.eo)}if(this._current===this.sc){(e=e.cloneNode(true)).deleteData(0,this.so)}}}return e},remove:function(){var e=this._current,t,r;if(n.isCharacterDataNode(e)&&(e===this.sc||e===this.ec)){t=e===this.sc?this.so:0;r=e===this.ec?this.eo:e.length;if(t!=r){e.deleteData(t,r-t)}}else{if(e.parentNode){e.parentNode.removeChild(e)}else{}}},isPartiallySelectedSubtree:function(){var e=this._current;return s(e,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode){e=this.range.cloneRange();e.collapse()}else{e=new ut(o(this.range));var t=this._current;var r=t,i=0,s=t,u=n.getNodeLength(t);if(n.isAncestorOf(t,this.sc,true)){r=this.sc;i=this.so}if(n.isAncestorOf(t,this.ec,true)){s=this.ec;u=this.eo}st(e,r,i,s,u)}return new g(e,this.clonePartiallySelectedTextNodes)},detach:function(e){if(e){this.range.detach()}this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};y.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};y.prototype.toString=function(){return this.message};b.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){this._current=this._next;this._next=this.nodes[++this._position];return this._current},detach:function(){this._current=this._next=this.nodes=null}};var w=[1,3,4,5,7,8,10];var E=[2,9,11];var S=[5,6,10,12];var x=[1,3,4,5,7,8,10,11];var T=[1,3,4,5,7,8];var C=n.getRootContainer;var k=N([9,11]);var L=N(S);var A=N([6,10,12]);var q=document.createElement("style");var R=false;try{q.innerHTML="<b>x</b>";R=q.firstChild.nodeType==3}catch(U){}e.features.htmlParsingConforms=R;var z=R?function(e){var t=this.startContainer;var r=n.getDocument(t);if(!t){throw new i("INVALID_STATE_ERR")}var s=null;if(t.nodeType==1){s=t}else if(n.isCharacterDataNode(t)){s=n.parentElement(t)}if(s===null||s.nodeName=="HTML"&&n.isHtmlNamespace(n.getDocument(s).documentElement)&&n.isHtmlNamespace(s)){s=r.createElement("body")}else{s=s.cloneNode(false)}s.innerHTML=e;return n.fragmentFromNodeChildren(s)}:function(e){M(this);var t=o(this);var r=t.createElement("body");r.innerHTML=e;return n.fragmentFromNodeChildren(r)};var W=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];var X=0,V=1,$=2,J=3;var K=0,Q=1,G=2,Y=3;Z.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){I(this);P(this.startContainer,t.startContainer);var r,i,s,o;var u=e==J||e==X?"start":"end";var a=e==V||e==X?"start":"end";r=this[u+"Container"];i=this[u+"Offset"];s=t[a+"Container"];o=t[a+"Offset"];return n.comparePoints(r,i,s,o)},insertNode:function(e){I(this);_(e,x);H(this.startContainer);if(n.isAncestorOf(e,this.startContainer,true)){throw new i("HIERARCHY_REQUEST_ERR")}var t=l(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){I(this);var e,t;if(this.collapsed){return o(this).createDocumentFragment()}else{if(this.startContainer===this.endContainer&&n.isCharacterDataNode(this.startContainer)){e=this.startContainer.cloneNode(true);e.data=e.data.slice(this.startOffset,this.endOffset);t=o(this).createDocumentFragment();t.appendChild(e);return t}else{var r=new g(this,true);e=c(r);r.detach()}return e}},canSurroundContents:function(){I(this);H(this.startContainer);H(this.endContainer);var e=new g(this,true);var t=e._first&&s(e._first,this)||e._last&&s(e._last,this);e.detach();return!t},surroundContents:function(e){_(e,T);if(!this.canSurroundContents()){throw new y("BAD_BOUNDARYPOINTS_ERR")}var t=this.extractContents();if(e.hasChildNodes()){while(e.lastChild){e.removeChild(e.lastChild)}}l(e,this.startContainer,this.startOffset);e.appendChild(t);this.selectNode(e)},cloneRange:function(){I(this);var e=new ut(o(this));var t=W.length,n;while(t--){n=W[t];e[n]=this[n]}return e},toString:function(){I(this);var e=this.startContainer;if(e===this.endContainer&&n.isCharacterDataNode(e)){return e.nodeType==3||e.nodeType==4?e.data.slice(this.startOffset,this.endOffset):""}else{var t=[],r=new g(this,true);h(r,function(e){if(e.nodeType==3||e.nodeType==4){t.push(e.data)}});r.detach();return t.join("")}},compareNode:function(e){I(this);var t=e.parentNode;var r=n.getNodeIndex(e);if(!t){throw new i("NOT_FOUND_ERR")}var s=this.comparePoint(t,r),o=this.comparePoint(t,r+1);if(s<0){return o>0?G:K}else{return o>0?Q:Y}},comparePoint:function(e,t){I(this);B(e,"HIERARCHY_REQUEST_ERR");P(e,this.startContainer);if(n.comparePoints(e,t,this.startContainer,this.startOffset)<0){return-1}else if(n.comparePoints(e,t,this.endContainer,this.endOffset)>0){return 1}return 0},createContextualFragment:z,toHtml:function(){I(this);var e=o(this).createElement("div");e.appendChild(this.cloneContents());return e.innerHTML},intersectsNode:function(e,t){I(this);B(e,"NOT_FOUND_ERR");if(n.getDocument(e)!==o(this)){return false}var r=e.parentNode,i=n.getNodeIndex(e);B(r,"NOT_FOUND_ERR");var s=n.comparePoints(r,i,this.endContainer,this.endOffset),u=n.comparePoints(r,i+1,this.startContainer,this.startOffset);return t?s<=0&&u>=0:s<0&&u>0},isPointInRange:function(e,t){I(this);B(e,"HIERARCHY_REQUEST_ERR");P(e,this.startContainer);return n.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&n.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){I(this);if(o(e)!=o(this)){throw new i("WRONG_DOCUMENT_ERR")}var r=n.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),s=n.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?r<=0&&s>=0:r<0&&s>0},intersection:function(e){if(this.intersectsRange(e)){var t=n.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),r=n.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset);var i=this.cloneRange();if(t==-1){i.setStart(e.startContainer,e.startOffset)}if(r==1){i.setEnd(e.endContainer,e.endOffset)}return i}return null},union:function(e){if(this.intersectsRange(e,true)){var t=this.cloneRange();if(n.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)==-1){t.setStart(e.startContainer,e.startOffset)}if(n.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)==1){t.setEnd(e.endContainer,e.endOffset)}return t}else{throw new y("Ranges do not intersect")}},containsNode:function(e,t){if(t){return this.intersectsNode(e,false)}else{return this.compareNode(e)==Y}},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,n.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();t.setEnd(r,r.length);var i=this.containsRange(t);t.detach();return i}else{return this.containsNodeContents(e)}},createNodeIterator:function(e,t){I(this);return new b(this,e,t)},getNodes:function(e,t){I(this);return v(this,e,t)},getDocument:function(){return o(this)},collapseBefore:function(e){M(this);this.setEndBefore(e);this.collapse(false)},collapseAfter:function(e){M(this);this.setStartAfter(e);this.collapse(true)},getName:function(){return"DomRange"},equals:function(e){return ut.rangesEqual(this,e)},inspect:function(){return m(this)}};rt(ut,st,ot);e.rangePrototype=Z.prototype;ut.rangeProperties=W;ut.RangeIterator=g;ut.copyComparisonConstants=tt;ut.createPrototypeRange=rt;ut.inspect=m;ut.getRangeDocument=o;ut.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset};e.DomRange=ut;e.RangeException=y});rangy.createModule("WrappedRange",function(e,t){function o(e){var t=e.parentElement();var n=e.duplicate();n.collapse(true);var i=n.parentElement();n=e.duplicate();n.collapse(false);var s=n.parentElement();var o=i==s?i:r.getCommonAncestor(i,s);return o==t?o:r.getCommonAncestor(t,o)}function u(e){return e.compareEndPoints("StartToEnd",e)==0}function a(e,t,n,s){var o=e.duplicate();o.collapse(n);var u=o.parentElement();if(!r.isAncestorOf(t,u,true)){u=t}if(!u.canHaveHTML){return new i(u.parentNode,r.getNodeIndex(u))}var a=r.getDocument(u).createElement("span");var f,l=n?"StartToStart":"StartToEnd";var c,h,p,d;do{u.insertBefore(a,a.previousSibling);o.moveToElementText(a)}while((f=o.compareEndPoints(l,e))>0&&a.previousSibling);d=a.nextSibling;if(f==-1&&d&&r.isCharacterDataNode(d)){o.setEndPoint(n?"EndToStart":"EndToEnd",e);var v;if(/[\r\n]/.test(d.data)){var m=o.duplicate();var g=m.text.replace(/\r\n/g,"\r").length;v=m.moveStart("character",g);while((f=m.compareEndPoints("StartToEnd",m))==-1){v++;m.moveStart("character",1)}}else{v=o.text.length}p=new i(d,v)}else{c=(s||!n)&&a.previousSibling;h=(s||n)&&a.nextSibling;if(h&&r.isCharacterDataNode(h)){p=new i(h,0)}else if(c&&r.isCharacterDataNode(c)){p=new i(c,c.length)}else{p=new i(u,r.getNodeIndex(a))}}a.parentNode.removeChild(a);return p}function f(e,t){var n,i,s=e.offset;var o=r.getDocument(e.node);var u,a,f=o.body.createTextRange();var l=r.isCharacterDataNode(e.node);if(l){n=e.node;i=n.parentNode}else{a=e.node.childNodes;n=s<a.length?a[s]:null;i=e.node}u=o.createElement("span");u.innerHTML="&#feff;";if(n){i.insertBefore(u,n)}else{i.appendChild(u)}f.moveToElementText(u);f.collapse(!t);i.removeChild(u);if(l){f[t?"moveStart":"moveEnd"]("character",s)}return f}e.requireModules(["DomUtil","DomRange"]);var n;var r=e.dom;var i=r.DomPosition;var s=e.DomRange;if(e.features.implementsDomRange&&(!e.features.implementsTextRange||!e.config.preferTextRange)){(function(){function u(e){var t=i.length,n;while(t--){n=i[t];e[n]=e.nativeRange[n]}}function a(e,t,n,r,i){var s=e.startContainer!==t||e.startOffset!=n;var o=e.endContainer!==r||e.endOffset!=i;if(s||o){e.setEnd(r,i);e.setStart(t,n)}}function f(e){e.nativeRange.detach();e.detached=true;var t=i.length,n;while(t--){n=i[t];e[n]=null}}var t;var i=s.rangeProperties;var o;var l;n=function(e){if(!e){throw new Error("Range must be specified")}this.nativeRange=e;u(this)};s.createPrototypeRange(n,a,f);t=n.prototype;t.selectNode=function(e){this.nativeRange.selectNode(e);u(this)};t.deleteContents=function(){this.nativeRange.deleteContents();u(this)};t.extractContents=function(){var e=this.nativeRange.extractContents();u(this);return e};t.cloneContents=function(){return this.nativeRange.cloneContents()};t.surroundContents=function(e){this.nativeRange.surroundContents(e);u(this)};t.collapse=function(e){this.nativeRange.collapse(e);u(this)};t.cloneRange=function(){return new n(this.nativeRange.cloneRange())};t.refresh=function(){u(this)};t.toString=function(){return this.nativeRange.toString()};var c=document.createTextNode("test");r.getBody(document).appendChild(c);var h=document.createRange();h.setStart(c,0);h.setEnd(c,0);try{h.setStart(c,1);o=true;t.setStart=function(e,t){this.nativeRange.setStart(e,t);u(this)};t.setEnd=function(e,t){this.nativeRange.setEnd(e,t);u(this)};l=function(e){return function(t){this.nativeRange[e](t);u(this)}}}catch(p){o=false;t.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t);this.nativeRange.setStart(e,t)}u(this)};t.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t);this.nativeRange.setEnd(e,t)}u(this)};l=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(r){this.nativeRange[t](n);this.nativeRange[e](n)}u(this)}}}t.setStartBefore=l("setStartBefore","setEndBefore");t.setStartAfter=l("setStartAfter","setEndAfter");t.setEndBefore=l("setEndBefore","setStartBefore");t.setEndAfter=l("setEndAfter","setStartAfter");h.selectNodeContents(c);if(h.startContainer==c&&h.endContainer==c&&h.startOffset==0&&h.endOffset==c.length){t.selectNodeContents=function(e){this.nativeRange.selectNodeContents(e);u(this)}}else{t.selectNodeContents=function(e){this.setStart(e,0);this.setEnd(e,s.getEndOffset(e))}}h.selectNodeContents(c);h.setEnd(c,3);var d=document.createRange();d.selectNodeContents(c);d.setEnd(c,4);d.setStart(c,2);if(h.compareBoundaryPoints(h.START_TO_END,d)==-1&h.compareBoundaryPoints(h.END_TO_START,d)==1){t.compareBoundaryPoints=function(e,t){t=t.nativeRange||t;if(e==t.START_TO_END){e=t.END_TO_START}else if(e==t.END_TO_START){e=t.START_TO_END}return this.nativeRange.compareBoundaryPoints(e,t)}}else{t.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)}}if(e.util.isHostMethod(h,"createContextualFragment")){t.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}}r.getBody(document).removeChild(c);h.detach();d.detach()})();e.createNativeRange=function(e){e=e||document;return e.createRange()}}else if(e.features.implementsTextRange){n=function(e){this.textRange=e;this.refresh()};n.prototype=new s(document);n.prototype.refresh=function(){var e,t;var n=o(this.textRange);if(u(this.textRange)){t=e=a(this.textRange,n,true,true)}else{e=a(this.textRange,n,true,false);t=a(this.textRange,n,false,false)}this.setStart(e.node,e.offset);this.setEnd(t.node,t.offset)};s.copyComparisonConstants(n);var l=function(){return this}();if(typeof l.Range=="undefined"){l.Range=n}e.createNativeRange=function(e){e=e||document;return e.body.createTextRange()}}if(e.features.implementsTextRange){n.rangeToTextRange=function(e){if(e.collapsed){var t=f(new i(e.startContainer,e.startOffset),true);return t}else{var n=f(new i(e.startContainer,e.startOffset),true);var s=f(new i(e.endContainer,e.endOffset),false);var o=r.getDocument(e.startContainer).body.createTextRange();o.setEndPoint("StartToStart",n);o.setEndPoint("EndToEnd",s);return o}}}n.prototype.getName=function(){return"WrappedRange"};e.WrappedRange=n;e.createRange=function(t){t=t||document;return new n(e.createNativeRange(t))};e.createRangyRange=function(e){e=e||document;return new s(e)};e.createIframeRange=function(t){return e.createRange(r.getIframeDocument(t))};e.createIframeRangyRange=function(t){return e.createRangyRange(r.getIframeDocument(t))};e.addCreateMissingNativeApiListener(function(t){var n=t.document;if(typeof n.createRange=="undefined"){n.createRange=function(){return e.createRange(this)}}n=t=null})});rangy.createModule("WrappedSelection",function(e,t){function p(e){return(e||window).getSelection()}function d(e){return(e||window).document.selection}function L(e,t,n){var r=n?"end":"start",i=n?"start":"end";e.anchorNode=t[r+"Container"];e.anchorOffset=t[r+"Offset"];e.focusNode=t[i+"Container"];e.focusOffset=t[i+"Offset"]}function A(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode;e.anchorOffset=t.anchorOffset;e.focusNode=t.focusNode;e.focusOffset=t.focusOffset}function O(e){e.anchorNode=e.focusNode=null;e.anchorOffset=e.focusOffset=0;e.rangeCount=0;e.isCollapsed=true;e._ranges.length=0}function M(t){var n;if(t instanceof o){n=t._selectionNativeRange;if(!n){n=e.createNativeRange(i.getDocument(t.startContainer));n.setEnd(t.endContainer,t.endOffset);n.setStart(t.startContainer,t.startOffset);t._selectionNativeRange=n;t.attachListener("detach",function(){this._selectionNativeRange=null})}}else if(t instanceof u){n=t.nativeRange}else if(e.features.implementsDomRange&&t instanceof i.getWindow(t.startContainer).Range){n=t}return n}function _(e){if(!e.length||e[0].nodeType!=1){return false}for(var t=1,n=e.length;t<n;++t){if(!i.isAncestorOf(e[0],e[t])){return false}}return true}function D(e){var t=e.getNodes();if(!_(t)){throw new Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element")}return t[0]}function P(e){return!!e&&typeof e.text!="undefined"}function H(e,t){var n=new u(t);e._ranges=[n];L(e,n,false);e.rangeCount=1;e.isCollapsed=n.collapsed}function B(t){t._ranges.length=0;if(t.docSelection.type=="None"){O(t)}else{var n=t.docSelection.createRange();if(P(n)){H(t,n)}else{t.rangeCount=n.length;var r,s=i.getDocument(n.item(0));for(var o=0;o<t.rangeCount;++o){r=e.createRange(s);r.selectNode(n.item(o));t._ranges.push(r)}t.isCollapsed=t.rangeCount==1&&t._ranges[0].collapsed;L(t,t._ranges[t.rangeCount-1],false)}}}function j(e,t){var n=e.docSelection.createRange();var r=D(t);var s=i.getDocument(n.item(0));var o=i.getBody(s).createControlRange();for(var u=0,a=n.length;u<a;++u){o.add(n.item(u))}try{o.add(r)}catch(f){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select();B(e)}function I(e,t,n){this.nativeSelection=e;this.docSelection=t;this._ranges=[];this.win=n;this.refresh()}function R(e,t){var n=i.getDocument(t[0].startContainer);var r=i.getBody(n).createControlRange();for(var s=0,o;s<rangeCount;++s){o=D(t[s]);try{r.add(o)}catch(u){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}r.select();B(e)}function V(e,t){if(e.anchorNode&&i.getDocument(e.anchorNode)!==i.getDocument(t)){throw new a("WRONG_DOCUMENT_ERR")}}function $(e){var t=[];var n=new f(e.anchorNode,e.anchorOffset);var r=new f(e.focusNode,e.focusOffset);var i=typeof e.getName=="function"?e.getName():"Selection";if(typeof e.rangeCount!="undefined"){for(var s=0,u=e.rangeCount;s<u;++s){t[s]=o.inspect(e.getRangeAt(s))}}return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]);e.config.checkSelectionRanges=true;var n="boolean",r="_rangySelection",i=e.dom,s=e.util,o=e.DomRange,u=e.WrappedRange,a=e.DOMException,f=i.DomPosition,l,c,h="Control";var v=e.util.isHostMethod(window,"getSelection"),m=e.util.isHostObject(document,"selection");var g=m&&(!v||e.config.preferTextRange);if(g){l=d;e.isSelectionValid=function(e){var t=(e||window).document,n=t.selection;return n.type!="None"||i.getDocument(n.createRange().parentElement())==t}}else if(v){l=p;e.isSelectionValid=function(){return true}}else{t.fail("Neither document.selection or window.getSelection() detected.")}e.getNativeSelection=l;var y=l();var b=e.createNativeRange(document);var w=i.getBody(document);var E=s.areHostObjects(y,["anchorNode","focusNode"]&&s.areHostProperties(y,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=E;var S=s.isHostMethod(y,"extend");e.features.selectionHasExtend=S;var x=typeof y.rangeCount=="number";e.features.selectionHasRangeCount=x;var T=false;var N=true;if(s.areHostMethods(y,["addRange","getRangeAt","removeAllRanges"])&&typeof y.rangeCount=="number"&&e.features.implementsDomRange){(function(){var e=document.createElement("iframe");w.appendChild(e);var t=i.getIframeDocument(e);t.open();t.write("<html><head></head><body>12</body></html>");t.close();var n=i.getIframeWindow(e).getSelection();var r=t.documentElement;var s=r.lastChild,o=s.firstChild;var u=t.createRange();u.setStart(o,1);u.collapse(true);n.addRange(u);N=n.rangeCount==1;n.removeAllRanges();var a=u.cloneRange();u.setStart(o,0);a.setEnd(o,2);n.addRange(u);n.addRange(a);T=n.rangeCount==2;u.detach();a.detach();w.removeChild(e)})()}e.features.selectionSupportsMultipleRanges=T;e.features.collapsedNonEditableSelectionsSupported=N;var C=false,k;if(w&&s.isHostMethod(w,"createControlRange")){k=w.createControlRange();if(s.areHostProperties(k,["item","add"])){C=true}}e.features.implementsControlRange=C;if(E){c=function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}}else{c=function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:false}}var F;if(s.isHostMethod(y,"getRangeAt")){F=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}}else if(E){F=function(t){var n=i.getDocument(t.anchorNode);var r=e.createRange(n);r.setStart(t.anchorNode,t.anchorOffset);r.setEnd(t.focusNode,t.focusOffset);if(r.collapsed!==this.isCollapsed){r.setStart(t.focusNode,t.focusOffset);r.setEnd(t.anchorNode,t.anchorOffset)}return r}}e.getSelection=function(e){e=e||window;var t=e[r];var n=l(e),i=m?d(e):null;if(t){t.nativeSelection=n;t.docSelection=i;t.refresh(e)}else{t=new I(n,i,e);e[r]=t}return t};e.getIframeSelection=function(t){return e.getSelection(i.getIframeWindow(t))};var q=I.prototype;if(!g&&E&&s.areHostMethods(y,["removeAllRanges","addRange"])){q.removeAllRanges=function(){this.nativeSelection.removeAllRanges();O(this)};var U=function(t,n){var r=o.getRangeDocument(n);var i=e.createRange(r);i.collapseToPoint(n.endContainer,n.endOffset);t.nativeSelection.addRange(M(i));t.nativeSelection.extend(n.startContainer,n.startOffset);t.refresh()};if(x){q.addRange=function(t,n){if(C&&m&&this.docSelection.type==h){j(this,t)}else{if(n&&S){U(this,t)}else{var r;if(T){r=this.rangeCount}else{this.removeAllRanges();r=0}this.nativeSelection.addRange(M(t));this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==r+1){if(e.config.checkSelectionRanges){var i=F(this.nativeSelection,this.rangeCount-1);if(i&&!o.rangesEqual(i,t)){t=new u(i)}}this._ranges[this.rangeCount-1]=t;L(this,t,X(this.nativeSelection));this.isCollapsed=c(this)}else{this.refresh()}}}}}else{q.addRange=function(e,t){if(t&&S){U(this,e)}else{this.nativeSelection.addRange(M(e));this.refresh()}}}q.setRanges=function(e){if(C&&e.length>1){R(this,e)}else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t){this.addRange(e[t])}}}}else if(s.isHostMethod(y,"empty")&&s.isHostMethod(b,"select")&&C&&g){q.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var e;if(this.anchorNode){e=i.getDocument(this.anchorNode)}else if(this.docSelection.type==h){var t=this.docSelection.createRange();if(t.length){e=i.getDocument(t.item(0)).body.createTextRange()}}if(e){var n=e.body.createTextRange();n.select();this.docSelection.empty()}}}catch(r){}O(this)};q.addRange=function(e){if(this.docSelection.type==h){j(this,e)}else{u.rangeToTextRange(e).select();this._ranges[0]=e;this.rangeCount=1;this.isCollapsed=this._ranges[0].collapsed;L(this,e,false)}};q.setRanges=function(e){this.removeAllRanges();var t=e.length;if(t>1){R(this,e)}else if(t){this.addRange(e[0])}}}else{t.fail("No means of selecting a Range or TextRange was found");return false}q.getRangeAt=function(e){if(e<0||e>=this.rangeCount){throw new a("INDEX_SIZE_ERR")}else{return this._ranges[e]}};var z;if(g){z=function(t){var n;if(e.isSelectionValid(t.win)){n=t.docSelection.createRange()}else{n=i.getBody(t.win.document).createTextRange();n.collapse(true)}if(t.docSelection.type==h){B(t)}else if(P(n)){H(t,n)}else{O(t)}}}else if(s.isHostMethod(y,"getRangeAt")&&typeof y.rangeCount=="number"){z=function(t){if(C&&m&&t.docSelection.type==h){B(t)}else{t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount;if(t.rangeCount){for(var n=0,r=t.rangeCount;n<r;++n){t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n))}L(t,t._ranges[t.rangeCount-1],X(t.nativeSelection));t.isCollapsed=c(t)}else{O(t)}}}}else if(E&&typeof y.isCollapsed==n&&typeof b.collapsed==n&&e.features.implementsDomRange){z=function(e){var t,n=e.nativeSelection;if(n.anchorNode){t=F(n,0);e._ranges=[t];e.rangeCount=1;A(e);e.isCollapsed=c(e)}else{O(e)}}}else{t.fail("No means of obtaining a Range or TextRange from the user's selection was found");return false}q.refresh=function(e){var t=e?this._ranges.slice(0):null;z(this);if(e){var n=t.length;if(n!=this._ranges.length){return false}while(n--){if(!o.rangesEqual(t[n],this._ranges[n])){return false}}return true}};var W=function(e,t){var n=e.getAllRanges(),r=false;e.removeAllRanges();for(var i=0,s=n.length;i<s;++i){if(r||t!==n[i]){e.addRange(n[i])}else{r=true}}if(!e.rangeCount){O(e)}};if(C){q.removeRange=function(e){if(this.docSelection.type==h){var t=this.docSelection.createRange();var n=D(e);var r=i.getDocument(t.item(0));var s=i.getBody(r).createControlRange();var o,u=false;for(var a=0,f=t.length;a<f;++a){o=t.item(a);if(o!==n||u){s.add(t.item(a))}else{u=true}}s.select();B(this)}else{W(this,e)}}}else{q.removeRange=function(e){W(this,e)}}var X;if(!g&&E&&e.features.implementsDomRange){X=function(e){var t=false;if(e.anchorNode){t=i.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)==1}return t};q.isBackwards=function(){return X(this)}}else{X=q.isBackwards=function(){return false}}q.toString=function(){var e=[];for(var t=0,n=this.rangeCount;t<n;++t){e[t]=""+this._ranges[t]}return e.join("")};q.collapse=function(t,n){V(this,t);var r=e.createRange(i.getDocument(t));r.collapseToPoint(t,n);this.removeAllRanges();this.addRange(r);this.isCollapsed=true};q.collapseToStart=function(){if(this.rangeCount){var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)}else{throw new a("INVALID_STATE_ERR")}};q.collapseToEnd=function(){if(this.rangeCount){var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)}else{throw new a("INVALID_STATE_ERR")}};q.selectAllChildren=function(t){V(this,t);var n=e.createRange(i.getDocument(t));n.selectNodeContents(t);this.removeAllRanges();this.addRange(n)};q.deleteFromDocument=function(){if(C&&m&&this.docSelection.type==h){var e=this.docSelection.createRange();var t;while(e.length){t=e.item(0);e.remove(t);t.parentNode.removeChild(t)}this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var r=0,i=n.length;r<i;++r){n[r].deleteContents()}this.addRange(n[i-1])}};q.getAllRanges=function(){return this._ranges.slice(0)};q.setSingleRange=function(e){this.setRanges([e])};q.containsNode=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n){if(this._ranges[n].containsNode(e,t)){return true}}return false};q.toHtml=function(){var e="";if(this.rangeCount){var t=o.getRangeDocument(this._ranges[0]).createElement("div");for(var n=0,r=this._ranges.length;n<r;++n){t.appendChild(this._ranges[n].cloneContents())}e=t.innerHTML}return e};q.getName=function(){return"WrappedSelection"};q.inspect=function(){return $(this)};q.detach=function(){this.win[r]=null;this.win=this.anchorNode=this.focusNode=null};I.inspect=$;e.Selection=I;e.selectionPrototype=q;e.addCreateMissingNativeApiListener(function(t){if(typeof t.getSelection=="undefined"){t.getSelection=function(){return e.getSelection(this)}}t=null})});var Base=function(){};Base.extend=function(e,t){var n=Base.prototype.extend;Base._prototyping=true;var r=new this;n.call(r,e);r.base=function(){};delete Base._prototyping;var i=r.constructor;var s=r.constructor=function(){if(!Base._prototyping){if(this._constructing||this.constructor==s){this._constructing=true;i.apply(this,arguments);delete this._constructing}else if(arguments[0]!=null){return(arguments[0].extend||n).call(arguments[0],r)}}};s.ancestor=this;s.extend=this.extend;s.forEach=this.forEach;s.implement=this.implement;s.prototype=r;s.toString=this.toString;s.valueOf=function(e){return e=="object"?s:i.valueOf()};n.call(s,t);if(typeof s.init=="function")s.init();return s};Base.prototype={extend:function(e,t){if(arguments.length>1){var n=this[e];if(n&&typeof t=="function"&&(!n.valueOf||n.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var r=t.valueOf();t=function(){var e=this.base||Base.prototype.base;this.base=n;var t=r.apply(this,arguments);this.base=e;return t};t.valueOf=function(e){return e=="object"?t:r};t.toString=Base.toString}this[e]=t}else if(e){var i=Base.prototype.extend;if(!Base._prototyping&&typeof this!="function"){i=this.extend||i}var s={toSource:null};var o=["constructor","toString","valueOf"];var u=Base._prototyping?0:1;while(a=o[u++]){if(e[a]!=s[a]){i.call(this,a,e[a])}}for(var a in e){if(!s[a])i.call(this,a,e[a])}}return this}};Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var r in e){if(this.prototype[r]===undefined){t.call(n,e[r],r,e)}}},implement:function(){for(var e=0;e<arguments.length;e++){if(typeof arguments[e]=="function"){arguments[e](this.prototype)}else{this.prototype.extend(arguments[e])}}return this},toString:function(){return String(this.valueOf())}});wysihtml5.browser=function(){function u(e){return(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[,0])[1]}var e=navigator.userAgent,t=document.createElement("div"),n=e.indexOf("MSIE")!==-1&&e.indexOf("Opera")===-1,r=e.indexOf("Gecko")!==-1&&e.indexOf("KHTML")===-1,i=e.indexOf("AppleWebKit/")!==-1,s=e.indexOf("Chrome/")!==-1,o=e.indexOf("Opera/")!==-1;return{USER_AGENT:e,supported:function(){var e=this.USER_AGENT.toLowerCase(),n="contentEditable"in t,r=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,i=document.querySelector&&document.querySelectorAll,s=this.isIos()&&u(e)<5||e.indexOf("opera mobi")!==-1||e.indexOf("hpwos/")!==-1;return n&&r&&i&&!s},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var e=this.USER_AGENT.toLowerCase();return e.indexOf("webkit")!==-1&&e.indexOf("mobile")!==-1},supportsSandboxedIframes:function(){return n},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!r},hasCurrentStyleProperty:function(){return"currentStyle"in t},insertsLineBreaksOnReturn:function(){return r},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){return"on"+e in t||function(){t.setAttribute("on"+e,"return;");return typeof t["on"+e]==="function"}()},supportsEventsInIframeCorrectly:function(){return!o},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return i||r},supportsDataTransfer:function(){try{return i&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(e){return false}},supportsHTML5Tags:function(e){var t=e.createElement("div"),n="<article>foo</article>";t.innerHTML=n;return t.innerHTML.toLowerCase()===n},supportsCommand:function(){var e={formatBlock:n,insertUnorderedList:n||o||i,insertOrderedList:n||o||i};var t={insertHTML:r};return function(n,r){var i=e[r];if(!i){try{return n.queryCommandSupported(r)}catch(s){}try{return n.queryCommandEnabled(r)}catch(o){return!!t[r]}}return false}}(),doesAutoLinkingInContentEditable:function(){return n},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return r||o||i},supportsGetAttributeCorrectly:function(){var e=document.createElement("td");return e.getAttribute("rowspan")!="1"},canSelectImagesInContentEditable:function(){return r||n||o},clearsListsInContentEditableCorrectly:function(){return r||n||i},autoScrollsToCaret:function(){return!i},autoClosesUnclosedTags:function(){var e=t.cloneNode(false),n,r;e.innerHTML="<p><div></div>";r=e.innerHTML.toLowerCase();n=r==="<p></p><div></div>"||r==="<p><div></div></p>";this.autoClosesUnclosedTags=function(){return n};return n},supportsNativeGetElementsByClassName:function(){return String(document.getElementsByClassName).indexOf("[native code]")!==-1},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},supportsClassList:function(){return"classList"in t},needsSpaceAfterLineBreak:function(){return o},supportsSpeechApiOn:function(t){var n=e.match(/Chrome\/(\d+)/)||[,0];return n[1]>=11&&("onwebkitspeechchange"in t||"speech"in t)},crashesWhenDefineProperty:function(e){return n&&(e==="XMLHttpRequest"||e==="XDomainRequest")},doesAsyncFocus:function(){return n},hasProblemsSettingCaretAfterImg:function(){return n},hasUndoInContextMenu:function(){return r||s||o}}}();wysihtml5.lang.array=function(e){return{contains:function(t){if(e.indexOf){return e.indexOf(t)!==-1}else{for(var n=0,r=e.length;n<r;n++){if(e[n]===t){return true}}return false}},without:function(t){t=wysihtml5.lang.array(t);var n=[],r=0,i=e.length;for(;r<i;r++){if(!t.contains(e[r])){n.push(e[r])}}return n},get:function(){var t=0,n=e.length,r=[];for(;t<n;t++){r.push(e[t])}return r}}};wysihtml5.lang.Dispatcher=Base.extend({observe:function(e,t){this.events=this.events||{};this.events[e]=this.events[e]||[];this.events[e].push(t);return this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(e,t){this.events=this.events||{};var n=this.events[e]||[],r=0;for(;r<n.length;r++){n[r].call(this,t)}return this},stopObserving:function(e,t){this.events=this.events||{};var n=0,r,i;if(e){r=this.events[e]||[],i=[];for(;n<r.length;n++){if(r[n]!==t&&t){i.push(r[n])}}this.events[e]=i}else{this.events={}}return this}});wysihtml5.lang.object=function(e){return{merge:function(t){for(var n in t){e[n]=t[n]}return this},get:function(){return e},clone:function(){var t={},n;for(n in e){t[n]=e[n]}return t},isArray:function(){return Object.prototype.toString.call(e)==="[object Array]"}}};(function(){var e=/^\s+/,t=/\s+$/;wysihtml5.lang.string=function(n){n=String(n);return{trim:function(){return n.replace(e,"").replace(t,"")},interpolate:function(e){for(var t in e){n=this.replace("#{"+t+"}").by(e[t])}return n},replace:function(e){return{by:function(t){return n.split(e).join(t)}}}}}})();(function(e){function o(e){if(l(e)){return e}if(e===e.ownerDocument.documentElement){e=e.ownerDocument.body}return c(e)}function u(e){return e.replace(n,function(e,t){var n=(t.match(r)||[])[1]||"",o=s[n];t=t.replace(r,"");if(t.split(o).length>t.split(n).length){t=t+n;n=""}var u=t,a=t;if(t.length>i){a=a.substr(0,i)+"..."}if(u.substr(0,4)==="www."){u="http://"+u}return'<a href="'+u+'">'+a+"</a>"+n})}function a(e){var t=e._wysihtml5_tempElement;if(!t){t=e._wysihtml5_tempElement=e.createElement("div")}return t}function f(e){var t=e.parentNode,n=a(t.ownerDocument);n.innerHTML="<span></span>"+u(e.data);n.removeChild(n.firstChild);while(n.firstChild){t.insertBefore(n.firstChild,e)}t.removeChild(e)}function l(e){var n;while(e.parentNode){e=e.parentNode;n=e.nodeName;if(t.contains(n)){return true}else if(n==="body"){return false}}return false}function c(r){if(t.contains(r.nodeName)){return}if(r.nodeType===e.TEXT_NODE&&r.data.match(n)){f(r);return}var i=e.lang.array(r.childNodes).get(),s=i.length,o=0;for(;o<s;o++){c(i[o])}return r}var t=e.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),n=/((https?:\/\/|www\.)[^\s<]{3,})/gi,r=/([^\w\/\-](,?))$/i,i=100,s={")":"(","]":"[","}":"{"};e.dom.autoLink=o;e.dom.autoLink.URL_REG_EXP=n})(wysihtml5);(function(e){var t=e.browser.supportsClassList(),n=e.dom;n.addClass=function(e,r){if(t){return e.classList.add(r)}if(n.hasClass(e,r)){return}e.className+=" "+r};n.removeClass=function(e,n){if(t){return e.classList.remove(n)}e.className=e.className.replace(new RegExp("(^|\\s+)"+n+"(\\s+|$)")," ")};n.hasClass=function(e,n){if(t){return e.classList.contains(n)}var r=e.className;return r.length>0&&(r==n||(new RegExp("(^|\\s)"+n+"(\\s|$)")).test(r))}})(wysihtml5);wysihtml5.dom.contains=function(){var e=document.documentElement;if(e.contains){return function(e,t){if(t.nodeType!==wysihtml5.ELEMENT_NODE){t=t.parentNode}return e!==t&&e.contains(t)}}else if(e.compareDocumentPosition){return function(e,t){return!!(e.compareDocumentPosition(t)&16)}}}();wysihtml5.dom.convertToList=function(){function e(e,t){var n=e.createElement("li");t.appendChild(n);return n}function t(e,t){return e.createElement(t)}function n(n,r){if(n.nodeName==="UL"||n.nodeName==="OL"||n.nodeName==="MENU"){return n}var i=n.ownerDocument,s=t(i,r),o=n.querySelectorAll("br"),u=o.length,a,f,l,c,h,p,d,v,m;for(m=0;m<u;m++){c=o[m];while((h=c.parentNode)&&h!==n&&h.lastChild===c){if(wysihtml5.dom.getStyle("display").from(h)==="block"){h.removeChild(c);break}wysihtml5.dom.insert(c).after(c.parentNode)}}a=wysihtml5.lang.array(n.childNodes).get();f=a.length;for(m=0;m<f;m++){v=v||e(i,s);l=a[m];p=wysihtml5.dom.getStyle("display").from(l)==="block";d=l.nodeName==="BR";if(p){v=v.firstChild?e(i,s):v;v.appendChild(l);v=null;continue}if(d){v=v.firstChild?null:v;continue}v.appendChild(l)}n.parentNode.replaceChild(s,n);return s}return n}();wysihtml5.dom.copyAttributes=function(e){return{from:function(t){return{to:function(n){var r,i=0,s=e.length;for(;i<s;i++){r=e[i];if(typeof t[r]!=="undefined"&&t[r]!==""){n[r]=t[r]}}return{andTo:arguments.callee}}}}}};(function(e){var t=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"];var n=function(t){if(r(t)){return parseInt(e.getStyle("width").from(t),10)<t.offsetWidth}return false};var r=function(n){var r=0,i=t.length;for(;r<i;r++){if(e.getStyle(t[r]).from(n)==="border-box"){return t[r]}}};e.copyStyles=function(r){return{from:function(i){if(n(i)){r=wysihtml5.lang.array(r).without(t)}var s="",o=r.length,u=0,a;for(;u<o;u++){a=r[u];s+=a+":"+e.getStyle(a).from(i)+";"}return{to:function(t){e.setStyles(s).on(t);return{andTo:arguments.callee}}}}}}})(wysihtml5.dom);(function(e){e.dom.delegate=function(t,n,r,i){return e.dom.observe(t,r,function(r){var s=r.target,o=e.lang.array(t.querySelectorAll(n));while(s&&s!==t){if(o.contains(s)){i.call(s,r);break}s=s.parentNode}})}})(wysihtml5);wysihtml5.dom.getAsDom=function(){var e=function(e,t){var n=t.createElement("div");n.style.display="none";t.body.appendChild(n);try{n.innerHTML=e}catch(r){}t.body.removeChild(n);return n};var t=function(e){if(e._wysihtml5_supportsHTML5Tags){return}for(var t=0,r=n.length;t<r;t++){e.createElement(n[t])}e._wysihtml5_supportsHTML5Tags=true};var n=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(n,r){r=r||document;var i;if(typeof n==="object"&&n.nodeType){i=r.createElement("div");i.appendChild(n)}else if(wysihtml5.browser.supportsHTML5Tags(r)){i=r.createElement("div");i.innerHTML=n}else{t(r);i=e(n,r)}return i}}();wysihtml5.dom.getParentElement=function(){function e(e,t){if(!t||!t.length){return true}if(typeof t==="string"){return e===t}else{return wysihtml5.lang.array(t).contains(e)}}function t(e){return e.nodeType===wysihtml5.ELEMENT_NODE}function n(e,t,n){var r=(e.className||"").match(n)||[];if(!t){return!!r.length}return r[r.length-1]===t}function r(t,n,r){while(r--&&t&&t.nodeName!=="BODY"){if(e(t.nodeName,n)){return t}t=t.parentNode}return null}function i(r,i,s,o,u){while(u--&&r&&r.nodeName!=="BODY"){if(t(r)&&e(r.nodeName,i)&&n(r,s,o)){return r}r=r.parentNode}return null}return function(e,t,n){n=n||50;if(t.className||t.classRegExp){return i(e,t.nodeName,t.className,t.classRegExp,n)}else{return r(e,t.nodeName,n)}}}();wysihtml5.dom.getStyle=function(){function n(e){return e.replace(t,function(e){return e.charAt(1).toUpperCase()})}var e={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},t=/\-[a-z]/g;return function(t){return{from:function(r){if(r.nodeType!==wysihtml5.ELEMENT_NODE){return}var i=r.ownerDocument,s=e[t]||n(t),o=r.style,u=r.currentStyle,a=o[s];if(a){return a}if(u){try{return u[s]}catch(f){}}var l=i.defaultView||i.parentWindow,c=(t==="height"||t==="width")&&r.nodeName==="TEXTAREA",h,p;if(l.getComputedStyle){if(c){h=o.overflow;o.overflow="hidden"}p=l.getComputedStyle(r,null).getPropertyValue(t);if(c){o.overflow=h||""}return p}}}}}();wysihtml5.dom.hasElementWithTagName=function(){function n(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=t++)}var e={},t=1;return function(t,r){var i=n(t)+":"+r,s=e[i];if(!s){s=e[i]=t.getElementsByTagName(r)}return s.length>0}}();(function(e){function r(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=n++)}var t={},n=1;e.dom.hasElementWithClassName=function(n,i){if(!e.browser.supportsNativeGetElementsByClassName()){return!!n.querySelector("."+i)}var s=r(n)+":"+i,o=t[s];if(!o){o=t[s]=n.getElementsByClassName(i)}return o.length>0}})(wysihtml5);wysihtml5.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}};wysihtml5.dom.insertCSS=function(e){e=e.join("\n");return{into:function(t){var n=t.head||t.getElementsByTagName("head")[0],r=t.createElement("style");r.type="text/css";if(r.styleSheet){r.styleSheet.cssText=e}else{r.appendChild(t.createTextNode(e))}if(n){n.appendChild(r)}}}};wysihtml5.dom.observe=function(e,t,n){t=typeof t==="string"?[t]:t;var r,i,s=0,o=t.length;for(;s<o;s++){i=t[s];if(e.addEventListener){e.addEventListener(i,n,false)}else{r=function(t){if(!("target"in t)){t.target=t.srcElement}t.preventDefault=t.preventDefault||function(){this.returnValue=false};t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=true};n.call(e,t)};e.attachEvent("on"+i,r)}}return{stop:function(){var i,s=0,o=t.length;for(;s<o;s++){i=t[s];if(e.removeEventListener){e.removeEventListener(i,n,false)}else{e.detachEvent("on"+i,r)}}}}};wysihtml5.dom.parse=function(){function s(e,t,n,s){wysihtml5.lang.object(i).merge(r).merge(t).get();n=n||e.ownerDocument||document;var u=n.createDocumentFragment(),a=typeof e==="string",f,l,c;if(a){f=wysihtml5.dom.getAsDom(e,n)}else{f=e}while(f.firstChild){c=f.firstChild;f.removeChild(c);l=o(c,s);if(l){u.appendChild(l)}}f.innerHTML="";f.appendChild(u);return a?wysihtml5.quirks.getCorrectInnerHTML(f):f}function o(n,r){var i=n.nodeType,s=n.childNodes,u=s.length,a,f=e[i],l=0;a=f&&f(n);if(!a){return null}for(l=0;l<u;l++){newChild=o(s[l],r);if(newChild){a.appendChild(newChild)}}if(r&&a.childNodes.length<=1&&a.nodeName.toLowerCase()===t&&!a.attributes.length){return a.firstChild}return a}function u(e){var n,r,s,o=i.tags,u=e.nodeName.toLowerCase(),f=e.scopeName;if(e._wysihtml5){return null}e._wysihtml5=1;if(e.className==="wysihtml5-temp"){return null}if(f&&f!="HTML"){u=f+":"+u}if("outerHTML"in e){if(!wysihtml5.browser.autoClosesUnclosedTags()&&e.nodeName==="P"&&e.outerHTML.slice(-4).toLowerCase()!=="</p>"){u="div"}}if(u in o){n=o[u];if(!n||n.remove){return null}n=typeof n==="string"?{rename_tag:n}:n}else if(e.firstChild){n={rename_tag:t}}else{return null}r=e.ownerDocument.createElement(n.rename_tag||u);a(e,r,n);e=null;return r}function a(e,t,r){var s={},o=r.set_class,u=r.add_class,a=r.set_attributes,f=r.check_attributes,c=i.classes,h=0,v=[],m=[],g=[],y=[],b,w,E,S,x,T,N;if(a){s=wysihtml5.lang.object(a).clone()}if(f){for(x in f){N=p[f[x]];if(!N){continue}T=N(l(e,x));if(typeof T==="string"){s[x]=T}}}if(o){v.push(o)}if(u){for(x in u){N=d[u[x]];if(!N){continue}S=N(l(e,x));if(typeof S==="string"){v.push(S)}}}c["_wysihtml5-temp-placeholder"]=1;y=e.getAttribute("class");if(y){v=v.concat(y.split(n))}b=v.length;for(;h<b;h++){E=v[h];if(c[E]){m.push(E)}}w=m.length;while(w--){E=m[w];if(!wysihtml5.lang.array(g).contains(E)){g.unshift(E)}}if(g.length){s["class"]=g.join(" ")}for(x in s){try{t.setAttribute(x,s[x])}catch(C){}}if(s.src){if(typeof s.width!=="undefined"){t.setAttribute("width",s.width)}if(typeof s.height!=="undefined"){t.setAttribute("height",s.height)}}}function l(e,t){t=t.toLowerCase();var n=e.nodeName;if(n=="IMG"&&t=="src"&&c(e)===true){return e.src}else if(f&&"outerHTML"in e){var r=e.outerHTML.toLowerCase(),i=r.indexOf(" "+t+"=")!=-1;return i?e.getAttribute(t):null}else{return e.getAttribute(t)}}function c(e){try{return e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(t){if(e.complete&&e.readyState==="complete"){return true}}}function h(e){return e.ownerDocument.createTextNode(e.data)}var e={1:u,3:h},t="span",n=/\s+/,r={tags:{},classes:{}},i={};var f=!wysihtml5.browser.supportsGetAttributeCorrectly();var p={url:function(){var e=/^https?:\/\//i;return function(t){if(!t||!t.match(e)){return null}return t.replace(e,function(e){return e.toLowerCase()})}}(),alt:function(){var e=/[^ a-z0-9_\-]/gi;return function(t){if(!t){return""}return t.replace(e,"")}}(),numbers:function(){var e=/\D/g;return function(t){t=(t||"").replace(e,"");return t||null}}()};var d={align_img:function(){var e={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return e[String(t).toLowerCase()]}}(),align_text:function(){var e={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return e[String(t).toLowerCase()]}}(),clear_br:function(){var e={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return e[String(t).toLowerCase()]}}(),size_font:function(){var e={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return e[String(t).charAt(0)]}}()};return s}();wysihtml5.dom.removeEmptyTextNodes=function(e){var t,n=wysihtml5.lang.array(e.childNodes).get(),r=n.length,i=0;for(;i<r;i++){t=n[i];if(t.nodeType===wysihtml5.TEXT_NODE&&t.data===""){t.parentNode.removeChild(t)}}};wysihtml5.dom.renameElement=function(e,t){var n=e.ownerDocument.createElement(t),r;while(r=e.firstChild){n.appendChild(r)}wysihtml5.dom.copyAttributes(["align","className"]).from(e).to(n);e.parentNode.replaceChild(n,e);return n};wysihtml5.dom.replaceWithChildNodes=function(e){if(!e.parentNode){return}if(!e.firstChild){e.parentNode.removeChild(e);return}var t=e.ownerDocument.createDocumentFragment();while(e.firstChild){t.appendChild(e.firstChild)}e.parentNode.replaceChild(t,e);e=t=null};(function(e){function t(t){return e.getStyle("display").from(t)==="block"}function n(e){return e.nodeName==="BR"}function r(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}function i(e){if(e.nodeName!=="MENU"&&e.nodeName!=="UL"&&e.nodeName!=="OL"){return}var i=e.ownerDocument,s=i.createDocumentFragment(),o=e.previousElementSibling||e.previousSibling,u,a,f,l,c;if(o&&!t(o)){r(s)}while(c=e.firstChild){a=c.lastChild;while(u=c.firstChild){f=u===a;l=f&&!t(u)&&!n(u);s.appendChild(u);if(l){r(s)}}c.parentNode.removeChild(c)}e.parentNode.replaceChild(s,e)}e.resolveList=i})(wysihtml5.dom);(function(e){var t=document,n=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],r=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],i=["referrer","write","open","close"];e.dom.Sandbox=Base.extend({constructor:function(t,n){this.callback=t||e.EMPTY_FUNCTION;this.config=e.lang.object({}).merge(n).get();this.iframe=this._createIframe()},insertInto:function(e){if(typeof e==="string"){e=t.getElementById(e)}e.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,r=t.createElement("iframe");r.className="wysihtml5-sandbox";e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(r);if(e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()){r.src="javascript:'<html></html>'"}r.onload=function(){r.onreadystatechange=r.onload=null;n._onLoadIframe(r)};r.onreadystatechange=function(){if(/loaded|complete/.test(r.readyState)){r.onreadystatechange=r.onload=null;n._onLoadIframe(r)}};return r},_onLoadIframe:function(s){if(!e.dom.contains(t.documentElement,s)){return}var o=this,u=s.contentWindow,a=s.contentWindow.document,f=t.characterSet||t.charset||"utf-8",l=this._getHtml({charset:f,stylesheets:this.config.stylesheets});a.open("text/html","replace");a.write(l);a.close();this.getWindow=function(){return s.contentWindow};this.getDocument=function(){return s.contentWindow.document};u.onerror=function(e,t,n){throw new Error("wysihtml5.Sandbox: "+e,t,n)};if(!e.browser.supportsSandboxedIframes()){var c,h;for(c=0,h=n.length;c<h;c++){this._unset(u,n[c])}for(c=0,h=r.length;c<h;c++){this._unset(u,r[c],e.EMPTY_FUNCTION)}for(c=0,h=i.length;c<h;c++){this._unset(a,i[c])}this._unset(a,"cookie","",true)}this.loaded=true;setTimeout(function(){o.callback(o)},0)},_getHtml:function(t){var n=t.stylesheets,r="",i=0,s;n=typeof n==="string"?[n]:n;if(n){s=n.length;for(;i<s;i++){r+='<link rel="stylesheet" href="'+n[i]+'">'}}t.stylesheets=r;return e.lang.string("<!DOCTYPE html><html><head>"+'<meta charset="#{charset}">#{stylesheets}</head>'+"<body></body></html>").interpolate(t)},_unset:function(t,n,r,i){try{t[n]=r}catch(s){}try{t.__defineGetter__(n,function(){return r})}catch(s){}if(i){try{t.__defineSetter__(n,function(){})}catch(s){}}if(!e.browser.crashesWhenDefineProperty(n)){try{var o={get:function(){return r}};if(i){o.set=function(){}}Object.defineProperty(t,n,o)}catch(s){}}}})})(wysihtml5);(function(){var e={className:"class"};wysihtml5.dom.setAttributes=function(t){return{on:function(n){for(var r in t){n.setAttribute(e[r]||r,t[r])}}}}})();wysihtml5.dom.setStyles=function(e){return{on:function(t){var n=t.style;if(typeof e==="string"){n.cssText+=";"+e;return}for(var r in e){if(r==="float"){n.cssFloat=e[r];n.styleFloat=e[r]}else{n[r]=e[r]}}}}};(function(e){e.simulatePlaceholder=function(t,n,r){var i="placeholder",s=function(){if(n.hasPlaceholderSet()){n.clear()}e.removeClass(n.element,i)},o=function(){if(n.isEmpty()){n.setValue(r);e.addClass(n.element,i)}};t.observe("set_placeholder",o).observe("unset_placeholder",s).observe("focus:composer",s).observe("paste:composer",s).observe("blur:composer",o);o()}})(wysihtml5.dom);(function(e){var t=document.documentElement;if("textContent"in t){e.setTextContent=function(e,t){e.textContent=t};e.getTextContent=function(e){return e.textContent}}else if("innerText"in t){e.setTextContent=function(e,t){e.innerText=t};e.getTextContent=function(e){return e.innerText}}else{e.setTextContent=function(e,t){e.nodeValue=t};e.getTextContent=function(e){return e.nodeValue}}})(wysihtml5.dom);wysihtml5.quirks.cleanPastedHTML=function(){function t(t,n,r){n=n||e;r=r||t.ownerDocument||document;var i,s=typeof t==="string",o,u,a,f,l=0;if(s){i=wysihtml5.dom.getAsDom(t,r)}else{i=t}for(f in n){u=i.querySelectorAll(f);o=n[f];a=u.length;for(;l<a;l++){o(u[l])}}u=t=n=null;return s?i.innerHTML:i}var e={"a u":wysihtml5.dom.replaceWithChildNodes};return t}();(function(e){var t=e.dom;e.quirks.ensureProperClearing=function(){var e=function(e){var t=this;setTimeout(function(){var e=t.innerHTML.toLowerCase();if(e=="<p>&nbsp;</p>"||e=="<p>&nbsp;</p><p>&nbsp;</p>"){t.innerHTML=""}},0)};return function(n){t.observe(n.element,["cut","keydown"],e)}}();e.quirks.ensureProperClearingOfLists=function(){var n=["OL","UL","MENU"];var r=function(r,i){if(!i.firstChild||!e.lang.array(n).contains(i.firstChild.nodeName)){return}var s=t.getParentElement(r,{nodeName:n});if(!s){return}var o=s==i.firstChild;if(!o){return}var u=s.childNodes.length<=1;if(!u){return}var a=s.firstChild?s.firstChild.innerHTML==="":true;if(!a){return}s.parentNode.removeChild(s)};return function(n){t.observe(n.element,"keydown",function(t){if(t.keyCode!==e.BACKSPACE_KEY){return}var i=n.selection.getSelectedNode();r(i,n.element)})}}()})(wysihtml5);(function(e){var t="%7E";e.quirks.getCorrectInnerHTML=function(n){var r=n.innerHTML;if(r.indexOf(t)===-1){return r}var i=n.querySelectorAll("[href*='~'], [src*='~']"),s,o,u,a;for(a=0,u=i.length;a<u;a++){s=i[a].href||i[a].src;o=e.lang.string(s).replace("~").by(t);r=e.lang.string(r).replace(o).by(s)}return r}})(wysihtml5);(function(e){var t=e.dom,n=["LI","P","H1","H2","H3","H4","H5","H6"],r=["UL","OL","MENU"];e.quirks.insertLineBreakOnReturn=function(i){function s(n){var r=t.getParentElement(n,{nodeName:["P","DIV"]},2);if(!r){return}var s=document.createTextNode(e.INVISIBLE_SPACE);t.insert(s).before(r);t.replaceWithChildNodes(r);i.selection.selectNode(s)}function o(o){var u=o.keyCode;if(o.shiftKey||u!==e.ENTER_KEY&&u!==e.BACKSPACE_KEY){return}var a=o.target,f=i.selection.getSelectedNode(),l=t.getParentElement(f,{nodeName:n},4);if(l){if(l.nodeName==="LI"&&(u===e.ENTER_KEY||u===e.BACKSPACE_KEY)){setTimeout(function(){var e=i.selection.getSelectedNode(),n,o;if(!e){return}n=t.getParentElement(e,{nodeName:r},2);if(n){return}s(e)},0)}else if(l.nodeName.match(/H[1-6]/)&&u===e.ENTER_KEY){setTimeout(function(){s(i.selection.getSelectedNode())},0)}return}if(u===e.ENTER_KEY&&!e.browser.insertsLineBreaksOnReturn()){i.commands.exec("insertLineBreak");o.preventDefault()}}t.observe(i.element.ownerDocument,"keydown",o)}})(wysihtml5);(function(e){var t="wysihtml5-quirks-redraw";e.quirks.redraw=function(n){e.dom.addClass(n,t);e.dom.removeClass(n,t);try{var r=n.ownerDocument;r.execCommand("italic",false,null);r.execCommand("italic",false,null)}catch(i){}}})(wysihtml5);(function(e){function n(e){var t=0;if(e.parentNode){do{t+=e.offsetTop||0;e=e.offsetParent}while(e)}return t}var t=e.dom;e.Selection=Base.extend({constructor:function(e){window.rangy.init();this.editor=e;this.composer=e.composer;this.doc=this.composer.doc},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){if(!e){return}this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);t.setStartBefore(e);t.setEndBefore(e);return this.setSelection(t)},setAfter:function(e){var t=rangy.createRange(this.doc);t.setStartAfter(e);t.setEndAfter(e);return this.setSelection(t)},selectNode:function(n){var r=rangy.createRange(this.doc),i=n.nodeType===e.ELEMENT_NODE,s="canHaveHTML"in n?n.canHaveHTML:n.nodeName!=="IMG",o=i?n.innerHTML:n.data,u=o===""||o===e.INVISIBLE_SPACE,a=t.getStyle("display").from(n),f=a==="block"||a==="list-item";if(u&&i&&s){try{n.innerHTML=e.INVISIBLE_SPACE}catch(l){}}if(s){r.selectNodeContents(n)}else{r.selectNode(n)}if(s&&u&&i){r.collapse(f)}else if(s&&u){r.setStartAfter(n);r.setEndAfter(n)}this.setSelection(r)},getSelectedNode:function(e){var t,n;if(e&&this.doc.selection&&this.doc.selection.type==="Control"){n=this.doc.selection.createRange();if(n&&n.length){return n.item(0)}}t=this.getSelection(this.doc);if(t.focusNode===t.anchorNode){return t.focusNode}else{n=this.getRange(this.doc);return n?n.commonAncestorContainer:this.doc.body}},executeAndRestore:function(t,n){var r=this.doc.body,i=n&&r.scrollTop,s=n&&r.scrollLeft,o="_wysihtml5-temp-placeholder",u='<span class="'+o+'">'+e.INVISIBLE_SPACE+"</span>",a=this.getRange(this.doc),f;if(!a){t(r,r);return}var l=a.createContextualFragment(u);a.insertNode(l);try{t(a.startContainer,a.endContainer)}catch(c){setTimeout(function(){throw c},0)}caretPlaceholder=this.doc.querySelector("."+o);if(caretPlaceholder){f=rangy.createRange(this.doc);f.selectNode(caretPlaceholder);f.deleteContents();this.setSelection(f)}else{r.focus()}if(n){r.scrollTop=i;r.scrollLeft=s}try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(h){}},executeAndRestoreSimple:function(e){var t=this.getRange(),n=this.doc.body,r,i,s,o,u;if(!t){e(n,n);return}o=t.getNodes([3]);i=o[0]||t.startContainer;s=o[o.length-1]||t.endContainer;u={collapsed:t.collapsed,startContainer:i,startOffset:i===t.startContainer?t.startOffset:0,endContainer:s,endOffset:s===t.endContainer?t.endOffset:s.length};try{e(t.startContainer,t.endContainer)}catch(a){setTimeout(function(){throw a},0)}r=rangy.createRange(this.doc);try{r.setStart(u.startContainer,u.startOffset)}catch(f){}try{r.setEnd(u.endContainer,u.endOffset)}catch(l){}try{this.setSelection(r)}catch(c){}},insertHTML:function(e){var t=rangy.createRange(this.doc),n=t.createContextualFragment(e),r=n.lastChild;this.insertNode(n);if(r){this.setAfter(r)}},insertNode:function(e){var t=this.getRange();if(t){t.insertNode(e)}},surround:function(e){var t=this.getRange();if(!t){return}try{t.surroundContents(e);this.selectNode(e)}catch(n){e.appendChild(t.extractContents());t.insertNode(e)}},scrollIntoView:function(){var t=this.doc,r=t.documentElement.scrollHeight>t.documentElement.offsetHeight,i=t._wysihtml5ScrollIntoViewElement=t._wysihtml5ScrollIntoViewElement||function(){var n=t.createElement("span");n.innerHTML=e.INVISIBLE_SPACE;return n}(),s;if(r){this.insertNode(i);s=n(i);i.parentNode.removeChild(i);if(s>t.body.scrollTop){t.body.scrollTop=s}}},selectLine:function(){if(e.browser.supportsSelectionModify()){this._selectLine_W3C()}else if(this.doc.selection){this._selectLine_MSIE()}},_selectLine_W3C:function(){var e=this.doc.defaultView,t=e.getSelection();t.modify("extend","left","lineboundary");t.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e=this.doc.selection.createRange(),t=e.boundingTop,n=e.boundingHeight,r=this.doc.body.scrollWidth,i,s,o,u,a;if(!e.moveToPoint){return}if(t===0){o=this.doc.createElement("span");this.insertNode(o);t=o.offsetTop;o.parentNode.removeChild(o)}t+=1;for(u=-10;u<r;u+=2){try{e.moveToPoint(u,t);break}catch(f){}}i=t;s=this.doc.selection.createRange();for(a=r;a>=0;a--){try{s.moveToPoint(a,i);break}catch(l){}}e.setEndPoint("EndToEnd",s);e.select()},getText:function(){var e=this.getSelection();return e?e.toString():""},getNodes:function(e,t){var n=this.getRange();if(n){return n.getNodes([e],t)}else{return[]}},getRange:function(){var e=this.getSelection();return e&&e.rangeCount&&e.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){var t=this.doc.defaultView||this.doc.parentWindow,n=rangy.getSelection(t);return n.setSingleRange(e)}})})(wysihtml5);(function(e,t){function i(e,t,n){if(!e.className){return false}var r=e.className.match(n)||[];return r[r.length-1]===t}function s(e,t,n){if(e.className){o(e,n);e.className+=" "+t}else{e.className=t}}function o(e,t){if(e.className){e.className=e.className.replace(t,"")}}function u(e,t){return e.className.replace(r," ")==t.className.replace(r," ")}function a(e){var t=e.parentNode;while(e.firstChild){t.insertBefore(e.firstChild,e)}t.removeChild(e)}function f(e,t){if(e.attributes.length!=t.attributes.length){return false}for(var n=0,r=e.attributes.length,i,s,o;n<r;++n){i=e.attributes[n];o=i.name;if(o!="class"){s=t.attributes.getNamedItem(o);if(i.specified!=s.specified){return false}if(i.specified&&i.nodeValue!==s.nodeValue){return false}}}return true}function l(e,n){if(t.dom.isCharacterDataNode(e)){if(n==0){return!!e.previousSibling}else if(n==e.length){return!!e.nextSibling}else{return true}}return n>0&&n<e.childNodes.length}function c(e,n,r){var i;if(t.dom.isCharacterDataNode(n)){if(r==0){r=t.dom.getNodeIndex(n);n=n.parentNode}else if(r==n.length){r=t.dom.getNodeIndex(n)+1;n=n.parentNode}else{i=t.dom.splitDataNode(n,r)}}if(!i){i=n.cloneNode(false);if(i.id){i.removeAttribute("id")}var s;while(s=n.childNodes[r]){i.appendChild(s)}t.dom.insertAfter(i,n)}return n==e?i:c(e,i.parentNode,t.dom.getNodeIndex(i))}function h(t){this.isElementMerge=t.nodeType==e.ELEMENT_NODE;this.firstTextNode=this.isElementMerge?t.lastChild:t;this.textNodes=[this.firstTextNode]}function p(e,t,r,i){this.tagNames=e||[n];this.cssClass=t||"";this.similarClassRegExp=r;this.normalize=i;this.applyToAnyTagName=false}var n="span";var r=/\s+/g;h.prototype={doMerge:function(){var e=[],t,n,r;for(var i=0,s=this.textNodes.length;i<s;++i){t=this.textNodes[i];n=t.parentNode;e[i]=t.data;if(i){n.removeChild(t);if(!n.hasChildNodes()){n.parentNode.removeChild(n)}}}this.firstTextNode.data=r=e.join("");return r},getLength:function(){var e=this.textNodes.length,t=0;while(e--){t+=this.textNodes[e].length}return t},toString:function(){var e=[];for(var t=0,n=this.textNodes.length;t<n;++t){e[t]="'"+this.textNodes[t].data+"'"}return"[Merge("+e.join(",")+")]"}};p.prototype={getAncestorWithClass:function(n){var r;while(n){r=this.cssClass?i(n,this.cssClass,this.similarClassRegExp):true;if(n.nodeType==e.ELEMENT_NODE&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&r){return n}n=n.parentNode}return false},postApply:function(e,t){var n=e[0],r=e[e.length-1];var i=[],s;var o=n,u=r;var a=0,f=r.length;var l,c;for(var p=0,d=e.length;p<d;++p){l=e[p];c=this.getAdjacentMergeableTextNode(l.parentNode,false);if(c){if(!s){s=new h(c);i.push(s)}s.textNodes.push(l);if(l===n){o=s.firstTextNode;a=o.length}if(l===r){u=s.firstTextNode;f=s.getLength()}}else{s=null}}var v=this.getAdjacentMergeableTextNode(r.parentNode,true);if(v){if(!s){s=new h(r);i.push(s)}s.textNodes.push(v)}if(i.length){for(p=0,d=i.length;p<d;++p){i[p].doMerge()}t.setStart(o,a);t.setEnd(u,f)}},getAdjacentMergeableTextNode:function(t,n){var r=t.nodeType==e.TEXT_NODE;var i=r?t.parentNode:t;var s;var o=n?"nextSibling":"previousSibling";if(r){s=t[o];if(s&&s.nodeType==e.TEXT_NODE){return s}}else{s=i[o];if(s&&this.areElementsMergeable(t,s)){return s[n?"firstChild":"lastChild"]}}return null},areElementsMergeable:function(e,n){return t.dom.arrayContains(this.tagNames,(e.tagName||"").toLowerCase())&&t.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase())&&u(e,n)&&f(e,n)},createContainer:function(e){var t=e.createElement(this.tagNames[0]);if(this.cssClass){t.className=this.cssClass}return t},applyToTextNode:function(e){var n=e.parentNode;if(n.childNodes.length==1&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())){if(this.cssClass){s(n,this.cssClass,this.similarClassRegExp)}}else{var r=this.createContainer(t.dom.getDocument(e));e.parentNode.insertBefore(r,e);r.appendChild(e)}},isRemovable:function(n){return t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&e.lang.string(n.className).trim()==this.cssClass},undoToTextNode:function(e,t,n){if(!t.containsNode(n)){var r=t.cloneRange();r.selectNode(n);if(r.isPointInRange(t.endContainer,t.endOffset)&&l(t.endContainer,t.endOffset)){c(n,t.endContainer,t.endOffset);t.setEndAfter(n)}if(r.isPointInRange(t.startContainer,t.startOffset)&&l(t.startContainer,t.startOffset)){n=c(n,t.startContainer,t.startOffset)}}if(this.similarClassRegExp){o(n,this.similarClassRegExp)}if(this.isRemovable(n)){a(n)}},applyToRange:function(t){var n=t.getNodes([e.TEXT_NODE]);if(!n.length){try{var r=this.createContainer(t.endContainer.ownerDocument);t.surroundContents(r);this.selectNode(t,r);return}catch(i){}}t.splitBoundaries();n=t.getNodes([e.TEXT_NODE]);if(n.length){var s;for(var o=0,u=n.length;o<u;++o){s=n[o];if(!this.getAncestorWithClass(s)){this.applyToTextNode(s)}}t.setStart(n[0],0);s=n[n.length-1];t.setEnd(s,s.length);if(this.normalize){this.postApply(n,t)}}},undoToRange:function(t){var n=t.getNodes([e.TEXT_NODE]),r,i;if(n.length){t.splitBoundaries();n=t.getNodes([e.TEXT_NODE])}else{var s=t.endContainer.ownerDocument,o=s.createTextNode(e.INVISIBLE_SPACE);t.insertNode(o);t.selectNode(o);n=[o]}for(var u=0,a=n.length;u<a;++u){r=n[u];i=this.getAncestorWithClass(r);if(i){this.undoToTextNode(r,t,i)}}if(a==1){this.selectNode(t,n[0])}else{t.setStart(n[0],0);r=n[n.length-1];t.setEnd(r,r.length);if(this.normalize){this.postApply(n,t)}}},selectNode:function(t,n){var r=n.nodeType===e.ELEMENT_NODE,i="canHaveHTML"in n?n.canHaveHTML:true,s=r?n.innerHTML:n.data,o=s===""||s===e.INVISIBLE_SPACE;if(o&&r&&i){try{n.innerHTML=e.INVISIBLE_SPACE}catch(u){}}t.selectNodeContents(n);if(o&&r){t.collapse(false)}else if(o){t.setStartAfter(n);t.setEndAfter(n)}},getTextSelectedByRange:function(e,t){var n=t.cloneRange();n.selectNodeContents(e);var r=n.intersection(t);var i=r?r.toString():"";n.detach();return i},isAppliedToRange:function(t){var n=[],r,i=t.getNodes([e.TEXT_NODE]);if(!i.length){r=this.getAncestorWithClass(t.startContainer);return r?[r]:false}for(var s=0,o=i.length,u;s<o;++s){u=this.getTextSelectedByRange(i[s],t);r=this.getAncestorWithClass(i[s]);if(u!=""&&!r){return false}else{n.push(r)}}return n},toggleRange:function(e){if(this.isAppliedToRange(e)){this.undoToRange(e)}else{this.applyToRange(e)}}};e.selection.HTMLApplier=p})(wysihtml5,rangy);wysihtml5.Commands=Base.extend({constructor:function(e){this.editor=e;this.composer=e.composer;this.doc=this.composer.doc},support:function(e){return wysihtml5.browser.supportsCommand(this.doc,e)},exec:function(e,t){var n=wysihtml5.commands[e],r=wysihtml5.lang.array(arguments).get(),i=n&&n.exec,s=null;this.editor.fire("beforecommand:composer");if(i){r.unshift(this.composer);s=i.apply(n,r)}else{try{s=this.doc.execCommand(e,false,t)}catch(o){}}this.editor.fire("aftercommand:composer");return s},state:function(e,t){var n=wysihtml5.commands[e],r=wysihtml5.lang.array(arguments).get(),i=n&&n.state;if(i){r.unshift(this.composer);return i.apply(n,r)}else{try{return this.doc.queryCommandState(e)}catch(s){return false}}},value:function(e){var t=wysihtml5.commands[e],n=t&&t.value;if(n){return n.call(t,this.composer,e)}else{try{return this.doc.queryCommandValue(e)}catch(r){return null}}}});(function(e){var t;e.commands.bold={exec:function(t,n){return e.commands.formatInline.exec(t,n,"b")},state:function(t,n,r){return e.commands.formatInline.state(t,n,"b")},value:function(){return t}}})(wysihtml5);(function(e){function i(e,t){var n=t.length,i=0,s,o,u;for(;i<n;i++){s=t[i];o=r.getParentElement(s,{nodeName:"code"});u=r.getTextContent(s);if(u.match(r.autoLink.URL_REG_EXP)&&!o){o=r.renameElement(s,"code")}else{r.replaceWithChildNodes(s)}}}function s(i,s){var o=i.doc,u="_wysihtml5-temp-"+ +(new Date),a=/non-matching-class/g,f=0,l,c,h,p,d,v,m,g,y;e.commands.formatInline.exec(i,t,n,u,a);c=o.querySelectorAll(n+"."+u);l=c.length;for(;f<l;f++){h=c[f];h.removeAttribute("class");for(y in s){h.setAttribute(y,s[y])}}v=h;if(l===1){m=r.getTextContent(h);p=!!h.querySelector("*");d=m===""||m===e.INVISIBLE_SPACE;if(!p&&d){r.setTextContent(h,s.text||h.href);g=o.createTextNode(" ");i.selection.setAfter(h);i.selection.insertNode(g);v=g}}i.selection.setAfter(v)}var t,n="A",r=e.dom;e.commands.createLink={exec:function(e,t,n){var r=this.state(e,t);if(r){e.selection.executeAndRestore(function(){i(e,r)})}else{n=typeof n==="object"?n:{href:n};s(e,n)}},state:function(t,n){return e.commands.formatInline.state(t,n,"A")},value:function(){return t}}})(wysihtml5);(function(e){var t,n=/wysiwyg-font-size-[a-z\-]+/g;e.commands.fontSize={exec:function(t,r,i){return e.commands.formatInline.exec(t,r,"span","wysiwyg-font-size-"+i,n)},state:function(t,r,i){return e.commands.formatInline.state(t,r,"span","wysiwyg-font-size-"+i,n)},value:function(){return t}}})(wysihtml5);(function(e){var t,n=/wysiwyg-color-[a-z]+/g;e.commands.foreColor={exec:function(t,r,i){return e.commands.formatInline.exec(t,r,"span","wysiwyg-color-"+i,n)},state:function(t,r,i){return e.commands.formatInline.state(t,r,"span","wysiwyg-color-"+i,n)},value:function(){return t}}})(wysihtml5);(function(e){function s(e,t,n){if(e.className){o(e,n);e.className+=" "+t}else{e.className=t}}function o(e,t){e.className=e.className.replace(t,"")}function u(t){return t.nodeType===e.TEXT_NODE&&!e.lang.string(t.data).trim()}function a(e){var t=e.previousSibling;while(t&&u(t)){t=t.previousSibling}return t}function f(e){var t=e.nextSibling;while(t&&u(t)){t=t.nextSibling}return t}function l(e){var t=e.ownerDocument,n=f(e),r=a(e);if(n&&!d(n)){e.parentNode.insertBefore(t.createElement("br"),n)}if(r&&!d(r)){e.parentNode.insertBefore(t.createElement("br"),e)}}function c(e){var t=f(e),n=a(e);if(t&&p(t)){t.parentNode.removeChild(t)}if(n&&p(n)){n.parentNode.removeChild(n)}}function h(e){var t=e.lastChild;if(t&&p(t)){t.parentNode.removeChild(t)}}function p(e){return e.nodeName==="BR"}function d(e){if(p(e)){return true}if(n.getStyle("display").from(e)==="block"){return true}return false}function v(t,r,i,s){if(s){var o=n.observe(t,"DOMNodeInserted",function(t){var r=t.target,i;if(r.nodeType!==e.ELEMENT_NODE){return}i=n.getStyle("display").from(r);if(i.substr(0,6)!=="inline"){r.className+=" "+s}})}t.execCommand(r,false,i);if(o){o.stop()}}function m(e,t){e.selection.selectLine();e.selection.surround(t);c(t);h(t);e.selection.selectNode(t)}function g(t){return!!e.lang.string(t.className).trim()}var t,n=e.dom,r="DIV",i=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE",r];e.commands.formatBlock={exec:function(t,u,a,f,c){var h=t.doc,p=this.state(t,u,a,f,c),d;a=typeof a==="string"?a.toUpperCase():a;if(p){t.selection.executeAndRestoreSimple(function(){if(c){o(p,c)}var e=g(p);if(!e&&p.nodeName===(a||r)){l(p);n.replaceWithChildNodes(p)}else if(e){n.renameElement(p,r)}});return}if(a===null||e.lang.array(i).contains(a)){d=t.selection.getSelectedNode();p=n.getParentElement(d,{nodeName:i});if(p){t.selection.executeAndRestoreSimple(function(){if(a){p=n.renameElement(p,a)}if(f){s(p,f,c)}});return}}if(t.commands.support(u)){v(h,u,a||r,f);return}p=h.createElement(a||r);if(f){p.className=f}m(t,p)},state:function(e,t,r,i,s){r=typeof r==="string"?r.toUpperCase():r;var o=e.selection.getSelectedNode();return n.getParentElement(o,{nodeName:r,className:i,classRegExp:s})},value:function(){return t}}})(wysihtml5);(function(e){function i(e){var t=n[e];return t?[e.toLowerCase(),t.toLowerCase()]:[e.toLowerCase()]}function s(t,n,s){var o=t+":"+n;if(!r[o]){r[o]=new e.selection.HTMLApplier(i(t),n,s,true)}return r[o]}var t,n={strong:"b",em:"i",b:"strong",i:"em"},r={};e.commands.formatInline={exec:function(e,t,n,r,i){var o=e.selection.getRange();if(!o){return false}s(n,r,i).toggleRange(o);e.selection.setSelection(o)},state:function(t,r,i,o,u){var a=t.doc,f=n[i]||i,l;if(!e.dom.hasElementWithTagName(a,i)&&!e.dom.hasElementWithTagName(a,f)){return false}if(o&&!e.dom.hasElementWithClassName(a,o)){return false}l=t.selection.getRange();if(!l){return false}return s(i,o,u).isAppliedToRange(l)},value:function(){return t}}})(wysihtml5);(function(e){var t;e.commands.insertHTML={exec:function(e,t,n){if(e.commands.support(t)){e.doc.execCommand(t,false,n)}else{e.selection.insertHTML(n)}},state:function(){return false},value:function(){return t}}})(wysihtml5);(function(e){var t="IMG";e.commands.insertImage={exec:function(n,r,i){i=typeof i==="object"?i:{src:i};var s=n.doc,o=this.state(n),u,a,f;if(o){n.selection.setBefore(o);f=o.parentNode;f.removeChild(o);e.dom.removeEmptyTextNodes(f);if(f.nodeName==="A"&&!f.firstChild){n.selection.setAfter(f);f.parentNode.removeChild(f)}e.quirks.redraw(n.element);return}o=s.createElement(t);for(a in i){o[a]=i[a]}n.selection.insertNode(o);if(e.browser.hasProblemsSettingCaretAfterImg()){u=s.createTextNode(e.INVISIBLE_SPACE);n.selection.insertNode(u);n.selection.setAfter(u)}else{n.selection.setAfter(o)}},state:function(n){var r=n.doc,i,s,o;if(!e.dom.hasElementWithTagName(r,t)){return false}i=n.selection.getSelectedNode();if(!i){return false}if(i.nodeName===t){return i}if(i.nodeType!==e.ELEMENT_NODE){return false}s=n.selection.getText();s=e.lang.string(s).trim();if(s){return false}o=n.selection.getNodes(e.ELEMENT_NODE,function(e){return e.nodeName==="IMG"});if(o.length!==1){return false}return o[0]},value:function(e){var t=this.state(e);return t&&t.src}}})(wysihtml5);(function(e){var t,n="<br>"+(e.browser.needsSpaceAfterLineBreak()?" ":"");e.commands.insertLineBreak={exec:function(t,r){if(t.commands.support(r)){t.doc.execCommand(r,false,null);if(!e.browser.autoScrollsToCaret()){t.selection.scrollIntoView()}}else{t.commands.exec("insertHTML",n)}},state:function(){return false},value:function(){return t}}})(wysihtml5);(function(e){var t;e.commands.insertOrderedList={exec:function(t,n){var r=t.doc,i=t.selection.getSelectedNode(),s=e.dom.getParentElement(i,{nodeName:"OL"}),o=e.dom.getParentElement(i,{nodeName:"UL"}),u="_wysihtml5-temp-"+(new Date).getTime(),a,f;if(t.commands.support(n)){r.execCommand(n,false,null);return}if(s){t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(s)})}else if(o){t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(o,"ol")})}else{t.commands.exec("formatBlock","div",u);f=r.querySelector("."+u);a=f.innerHTML===""||f.innerHTML===e.INVISIBLE_SPACE;t.selection.executeAndRestoreSimple(function(){s=e.dom.convertToList(f,"ol")});if(a){t.selection.selectNode(s.querySelector("li"))}}},state:function(t){var n=t.selection.getSelectedNode();return e.dom.getParentElement(n,{nodeName:"OL"})},value:function(){return t}}})(wysihtml5);(function(e){var t;e.commands.insertUnorderedList={exec:function(t,n){var r=t.doc,i=t.selection.getSelectedNode(),s=e.dom.getParentElement(i,{nodeName:"UL"}),o=e.dom.getParentElement(i,{nodeName:"OL"}),u="_wysihtml5-temp-"+(new Date).getTime(),a,f;if(t.commands.support(n)){r.execCommand(n,false,null);return}if(s){t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(s)})}else if(o){t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(o,"ul")})}else{t.commands.exec("formatBlock","div",u);f=r.querySelector("."+u);a=f.innerHTML===""||f.innerHTML===e.INVISIBLE_SPACE;t.selection.executeAndRestoreSimple(function(){s=e.dom.convertToList(f,"ul")});if(a){t.selection.selectNode(s.querySelector("li"))}}},state:function(t){var n=t.selection.getSelectedNode();return e.dom.getParentElement(n,{nodeName:"UL"})},value:function(){return t}}})(wysihtml5);(function(e){var t;e.commands.italic={exec:function(t,n){return e.commands.formatInline.exec(t,n,"i")},state:function(t,n,r){return e.commands.formatInline.state(t,n,"i")},value:function(){return t}}})(wysihtml5);(function(e){var t,n="wysiwyg-text-align-center",r=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyCenter={exec:function(t,i){return e.commands.formatBlock.exec(t,"formatBlock",null,n,r)},state:function(t,i){return e.commands.formatBlock.state(t,"formatBlock",null,n,r)},value:function(){return t}}})(wysihtml5);(function(e){var t,n="wysiwyg-text-align-left",r=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyLeft={exec:function(t,i){return e.commands.formatBlock.exec(t,"formatBlock",null,n,r)},state:function(t,i){return e.commands.formatBlock.state(t,"formatBlock",null,n,r)},value:function(){return t}}})(wysihtml5);(function(e){var t,n="wysiwyg-text-align-right",r=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyRight={exec:function(t,i){return e.commands.formatBlock.exec(t,"formatBlock",null,n,r)},state:function(t,i){return e.commands.formatBlock.state(t,"formatBlock",null,n,r)},value:function(){return t}}})(wysihtml5);(function(e){var t;e.commands.underline={exec:function(t,n){return e.commands.formatInline.exec(t,n,"u")},state:function(t,n){return e.commands.formatInline.state(t,n,"u")},value:function(){return t}}})(wysihtml5);(function(e){function f(e){var t;while(t=e.querySelector("._wysihtml5-temp")){t.parentNode.removeChild(t)}}var t=90,n=89,r=8,i=46,s=40,o='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",u='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",a=e.dom;e.UndoManager=e.lang.Dispatcher.extend({constructor:function(e){this.editor=e;this.composer=e.composer;this.element=this.composer.element;this.history=[this.composer.getValue()];this.position=1;if(this.composer.commands.support("insertHTML")){this._observe()}},_observe:function(){var s=this,l=this.composer.sandbox.getDocument(),c;a.observe(this.element,"keydown",function(e){if(e.altKey||!e.ctrlKey&&!e.metaKey){return}var r=e.keyCode,i=r===t&&!e.shiftKey,o=r===t&&e.shiftKey||r===n;if(i){s.undo();e.preventDefault()}else if(o){s.redo();e.preventDefault()}});a.observe(this.element,"keydown",function(e){var t=e.keyCode;if(t===c){return}c=t;if(t===r||t===i){s.transact()}});if(e.browser.hasUndoInContextMenu()){var h,p,d=function(){f(l);clearInterval(h)};a.observe(this.element,"contextmenu",function(){d();s.composer.selection.executeAndRestoreSimple(function(){if(s.element.lastChild){s.composer.selection.setAfter(s.element.lastChild)}l.execCommand("insertHTML",false,o);l.execCommand("insertHTML",false,u);l.execCommand("undo",false,null)});h=setInterval(function(){if(l.getElementById("_wysihtml5-redo")){d();s.redo()}else if(!l.getElementById("_wysihtml5-undo")){d();s.undo()}},400);if(!p){p=true;a.observe(document,"mousedown",d);a.observe(l,["mousedown","paste","cut","copy"],d)}})}this.editor.observe("newword:composer",function(){s.transact()}).observe("beforecommand:composer",function(){s.transact()})},transact:function(){var e=this.history[this.position-1],t=this.composer.getValue();if(t==e){return}var n=this.history.length=this.position;if(n>s){this.history.shift();this.position--}this.position++;this.history.push(t)},undo:function(){this.transact();if(this.position<=1){return}this.set(this.history[--this.position-1]);this.editor.fire("undo:composer")},redo:function(){if(this.position>=this.history.length){return}this.set(this.history[++this.position-1]);this.editor.fire("redo:composer")},set:function(e){this.composer.setValue(e);this.editor.focus(true)}})})(wysihtml5);wysihtml5.views.View=Base.extend({constructor:function(e,t,n){this.parent=e;this.element=t;this.config=n;this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.observe("beforeload",function(){e.parent.observe("change_view",function(t){if(t===e.name){e.parent.currentView=e;e.show();setTimeout(function(){e.focus()},0)}else{e.hide()}})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")===this.element){return}try{this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}});(function(e){var t=e.dom,n=e.browser;e.views.Composer=e.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,t,n){this.base(e,t,n);this.textarea=this.parent.textarea;this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(t){var n=this.isEmpty()?"":e.quirks.getCorrectInnerHTML(this.element);if(t){n=this.parent.parse(n)}n=e.lang.string(n).replace(e.INVISIBLE_SPACE).by("");return n},setValue:function(e,t){if(t){e=this.parent.parse(e)}this.element.innerHTML=e},show:function(){this.iframe.style.display=this._displayStyle||"";this.disable();this.enable()},hide:function(){this._displayStyle=t.getStyle("display").from(this.iframe);if(this._displayStyle==="none"){this._displayStyle=null}this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable");this.base()},enable:function(){this.element.setAttribute("contentEditable","true");this.base()},focus:function(t){if(e.browser.doesAsyncFocus()&&this.hasPlaceholderSet()){this.clear()}this.base();var n=this.element.lastChild;if(t&&n){if(n.nodeName==="BR"){this.selection.setBefore(this.element.lastChild)}else{this.selection.setAfter(this.element.lastChild)}}},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var e=this.element.innerHTML,t="blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea";return e===""||e===this.CARET_HACK||this.hasPlaceholderSet()||this.getTextContent()===""&&!this.element.querySelector(t)},_initSandbox:function(){var e=this;this.sandbox=new t.Sandbox(function(){e._create()},{stylesheets:this.config.stylesheets});this.iframe=this.sandbox.getIframe();var n=document.createElement("input");n.type="hidden";n.name="_wysihtml5_mode";n.value=1;var r=this.textarea.element;t.insert(this.iframe).after(r);t.insert(n).after(r)},_create:function(){var r=this;this.doc=this.sandbox.getDocument();this.element=this.doc.body;this.textarea=this.parent.textarea;this.element.innerHTML=this.textarea.getValue(true);this.enable();this.selection=new e.Selection(this.parent);this.commands=new e.Commands(this.parent);t.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element);t.addClass(this.element,this.config.composerClassName);if(this.config.style){this.style()}this.observe();var i=this.config.name;if(i){t.addClass(this.element,i);t.addClass(this.iframe,i)}var s=typeof this.config.placeholder==="string"?this.config.placeholder:this.textarea.element.getAttribute("placeholder");if(s){t.simulatePlaceholder(this.parent,this,s)}this.commands.exec("styleWithCSS",false);this._initAutoLinking();this._initObjectResizing();this._initUndoManager();if(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element){setTimeout(function(){r.focus()},100)}e.quirks.insertLineBreakOnReturn(this);if(!n.clearsContentEditableCorrectly()){e.quirks.ensureProperClearing(this)}if(!n.clearsListsInContentEditableCorrectly()){e.quirks.ensureProperClearingOfLists(this)}if(this.initSync&&this.config.sync){this.initSync()}this.textarea.hide();this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var r=this,i=n.canDisableAutoLinking(),s=n.doesAutoLinkingInContentEditable();if(i){this.commands.exec("autoUrlDetect",false)}if(!this.config.autoLink){return}if(!s||s&&i){this.parent.observe("newword:composer",function(){r.selection.executeAndRestore(function(e,n){t.autoLink(n.parentNode)})})}var o=this.sandbox.getDocument().getElementsByTagName("a"),u=t.autoLink.URL_REG_EXP,a=function(n){var r=e.lang.string(t.getTextContent(n)).trim();if(r.substr(0,4)==="www."){r="http://"+r}return r};t.observe(this.element,"keydown",function(e){if(!o.length){return}var n=r.selection.getSelectedNode(e.target.ownerDocument),i=t.getParentElement(n,{nodeName:"A"},4),s;if(!i){return}s=a(i);setTimeout(function(){var e=a(i);if(e===s){return}if(e.match(u)){i.setAttribute("href",e)}},0)})},_initObjectResizing:function(){var r=["width","height"],i=r.length,s=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing);if(this.config.allowObjectResizing){if(n.supportsEvent("resizeend")){t.observe(s,"resizeend",function(t){var n=t.target||t.srcElement,o=n.style,u=0,a;for(;u<i;u++){a=r[u];if(o[a]){n.setAttribute(a,parseInt(o[a],10));o[a]=""}}e.quirks.redraw(s)})}}else{if(n.supportsEvent("resizestart")){t.observe(s,"resizestart",function(e){e.preventDefault()})}}},_initUndoManager:function(){new e.UndoManager(this.parent)}})})(wysihtml5);(function(e){var t=e.dom,n=document,r=window,i=n.createElement("div"),s=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],o=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],u=["width","height","top","left","right","bottom"],a=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",e.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"];var f=function(e){if(e.setActive){try{e.setActive()}catch(i){}}else{var s=e.style,o=n.documentElement.scrollTop||n.body.scrollTop,u=n.documentElement.scrollLeft||n.body.scrollLeft,a={position:s.position,top:s.top,left:s.left,WebkitUserSelect:s.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e);e.focus();t.setStyles(a).on(e);if(r.scrollTo){r.scrollTo(u,o)}}};e.views.Composer.prototype.style=function(){var l=this,c=n.querySelector(":focus"),h=this.textarea.element,p=h.hasAttribute("placeholder"),d=p&&h.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||i.cloneNode(false);this.blurStylesHost=this.blurStylesHost||i.cloneNode(false);if(p){h.removeAttribute("placeholder")}if(h===c){h.blur()}t.copyStyles(o).from(h).to(this.iframe).andTo(this.blurStylesHost);t.copyStyles(s).from(h).to(this.element).andTo(this.blurStylesHost);t.insertCSS(a).into(this.element.ownerDocument);f(h);t.copyStyles(o).from(h).to(this.focusStylesHost);t.copyStyles(s).from(h).to(this.focusStylesHost);var v=e.lang.array(o).without(["display"]);if(c){c.focus()}else{h.blur()}if(p){h.setAttribute("placeholder",d)}if(!e.browser.hasCurrentStyleProperty()){var m=t.observe(r,"resize",function(){if(!t.contains(document.documentElement,l.iframe)){m.stop();return}var e=t.getStyle("display").from(h),n=t.getStyle("display").from(l.iframe);h.style.display="";l.iframe.style.display="none";t.copyStyles(u).from(h).to(l.iframe).andTo(l.focusStylesHost).andTo(l.blurStylesHost);l.iframe.style.display=n;h.style.display=e})}this.parent.observe("focus:composer",function(){t.copyStyles(v).from(l.focusStylesHost).to(l.iframe);t.copyStyles(s).from(l.focusStylesHost).to(l.element)});this.parent.observe("blur:composer",function(){t.copyStyles(v).from(l.blurStylesHost).to(l.iframe);t.copyStyles(s).from(l.blurStylesHost).to(l.element)});return this}})(wysihtml5);(function(e){var t=e.dom,n=e.browser,r={66:"bold",73:"italic",85:"underline"};e.views.Composer.prototype.observe=function(){var i=this,s=this.getValue(),o=this.sandbox.getIframe(),u=this.element,a=n.supportsEventsInIframeCorrectly()?u:this.sandbox.getWindow(),f=n.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];t.observe(o,"DOMNodeRemoved",function(){clearInterval(l);i.parent.fire("destroy:composer")});var l=setInterval(function(){if(!t.contains(document.documentElement,o)){clearInterval(l);i.parent.fire("destroy:composer")}},250);t.observe(a,"focus",function(){i.parent.fire("focus").fire("focus:composer");setTimeout(function(){s=i.getValue()},0)});t.observe(a,"blur",function(){if(s!==i.getValue()){i.parent.fire("change").fire("change:composer")}i.parent.fire("blur").fire("blur:composer")});if(e.browser.isIos()){t.observe(u,"blur",function(){var e=u.ownerDocument.createElement("input"),t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;try{i.selection.insertNode(e)}catch(r){u.appendChild(e)}e.focus();e.parentNode.removeChild(e);window.scrollTo(n,t)})}t.observe(u,"dragenter",function(){i.parent.fire("unset_placeholder")});if(n.firesOnDropOnlyWhenOnDragOverIsCancelled()){t.observe(u,["dragover","dragenter"],function(e){e.preventDefault()})}t.observe(u,f,function(e){var t=e.dataTransfer,r;if(t&&n.supportsDataTransfer()){r=t.getData("text/html")||t.getData("text/plain")}if(r){u.focus();i.commands.exec("insertHTML",r);i.parent.fire("paste").fire("paste:composer");e.stopPropagation();e.preventDefault()}else{setTimeout(function(){i.parent.fire("paste").fire("paste:composer")},0)}});t.observe(u,"keyup",function(t){var n=t.keyCode;if(n===e.SPACE_KEY||n===e.ENTER_KEY){i.parent.fire("newword:composer")}});this.parent.observe("paste:composer",function(){setTimeout(function(){i.parent.fire("newword:composer")},0)});if(!n.canSelectImagesInContentEditable()){t.observe(u,"mousedown",function(e){var t=e.target;if(t.nodeName==="IMG"){i.selection.selectNode(t);e.preventDefault()}})}t.observe(u,"keydown",function(e){var t=e.keyCode,n=r[t];if((e.ctrlKey||e.metaKey)&&!e.altKey&&n){i.commands.exec(n);e.preventDefault()}});t.observe(u,"keydown",function(t){var n=i.selection.getSelectedNode(true),r=t.keyCode,s;if(n&&n.nodeName==="IMG"&&(r===e.BACKSPACE_KEY||r===e.DELETE_KEY)){s=n.parentNode;s.removeChild(n);if(s.nodeName==="A"&&!s.firstChild){s.parentNode.removeChild(s)}setTimeout(function(){e.quirks.redraw(u)},0);t.preventDefault()}});var c={IMG:"Image: ",A:"Link: "};t.observe(u,"mouseover",function(e){var t=e.target,n=t.nodeName,r;if(n!=="A"&&n!=="IMG"){return}var i=t.hasAttribute("title");if(!i){r=c[n]+(t.getAttribute("href")||t.getAttribute("src"));t.setAttribute("title",r)}})}})(wysihtml5);(function(e){var t=400;e.views.Synchronizer=Base.extend({constructor:function(e,t,n){this.editor=e;this.textarea=t;this.composer=n;this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue()).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue();if(t){this.composer.setValue(t,e)}else{this.composer.clear();this.editor.fire("set_placeholder")}},sync:function(e){if(this.editor.currentView.name==="textarea"){this.fromTextareaToComposer(e)}else{this.fromComposerToTextarea(e)}},_observe:function(){var n,r=this,i=this.textarea.element.form,s=function(){n=setInterval(function(){r.fromComposerToTextarea()},t)},o=function(){clearInterval(n);n=null};s();if(i){e.dom.observe(i,"submit",function(){r.sync(true)});e.dom.observe(i,"reset",function(){setTimeout(function(){r.fromTextareaToComposer()},0)})}this.editor.observe("change_view",function(e){if(e==="composer"&&!n){r.fromTextareaToComposer(true);s()}else if(e==="textarea"){r.fromComposerToTextarea(true);o()}});this.editor.observe("destroy:composer",o)}})})(wysihtml5);wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(e,t,n){this.base(e,t,n);this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;if(e){t=this.parent.parse(t)}return t},setValue:function(e,t){if(t){e=this.parent.parse(e)}this.element.value=e},hasPlaceholderSet:function(){var e=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),t=this.element.getAttribute("placeholder")||null,n=this.element.value,r=!n;return e&&r||n===t},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,t=this.parent,n={focusin:"focus",focusout:"blur"},r=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];t.observe("beforeload",function(){wysihtml5.dom.observe(e,r,function(e){var r=n[e.type]||e.type;t.fire(r).fire(r+":textarea")});wysihtml5.dom.observe(e,["paste","drop"],function(){setTimeout(function(){t.fire("paste").fire("paste:textarea")},0)})})}});(function(e){var t=e.dom,n="wysihtml5-command-dialog-opened",r="input, select, textarea",i="[data-wysihtml5-dialog-field]",s="data-wysihtml5-dialog-field";e.toolbar.Dialog=e.lang.Dispatcher.extend({constructor:function(e,t){this.link=e;this.container=t},_observe:function(){if(this._observed){return}var i=this,s=function(e){var t=i._serialize();if(t==i.elementToChange){i.fire("edit",t)}else{i.fire("save",t)}i.hide();e.preventDefault();e.stopPropagation()};t.observe(i.link,"click",function(e){if(t.hasClass(i.link,n)){setTimeout(function(){i.hide()},0)}});t.observe(this.container,"keydown",function(t){var n=t.keyCode;if(n===e.ENTER_KEY){s(t)}if(n===e.ESCAPE_KEY){i.hide()}});t.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",s);t.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(e){i.fire("cancel");i.hide();e.preventDefault();e.stopPropagation()});var o=this.container.querySelectorAll(r),u=0,a=o.length,f=function(){clearInterval(i.interval)};for(;u<a;u++){t.observe(o[u],"change",f)}this._observed=true},_serialize:function(){var e=this.elementToChange||{},t=this.container.querySelectorAll(i),n=t.length,r=0;for(;r<n;r++){e[t[r].getAttribute(s)]=t[r].value}return e},_interpolate:function(e){var t,n,r,o=document.querySelector(":focus"),u=this.container.querySelectorAll(i),a=u.length,f=0;for(;f<a;f++){t=u[f];if(t===o){continue}if(e&&t.type==="hidden"){continue}n=t.getAttribute(s);r=this.elementToChange?this.elementToChange[n]||"":t.defaultValue;t.value=r}},show:function(e){var i=this,s=this.container.querySelector(r);this.elementToChange=e;this._observe();this._interpolate();if(e){this.interval=setInterval(function(){i._interpolate(true)},500)}t.addClass(this.link,n);this.container.style.display="";this.fire("show");if(s&&!e){try{s.focus()}catch(o){}}},hide:function(){clearInterval(this.interval);this.elementToChange=null;t.removeClass(this.link,n);this.container.style.display="none";this.fire("hide")}})})(wysihtml5);(function(e){var t=e.dom;var n={position:"relative"};var r={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1};var i={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"};var s={"x-webkit-speech":"",speech:""};e.toolbar.Speech=function(o,u){var a=document.createElement("input");if(!e.browser.supportsSpeechApiOn(a)){u.style.display="none";return}var f=document.createElement("div");e.lang.object(r).merge({width:u.offsetWidth+"px",height:u.offsetHeight+"px"});t.insert(a).into(f);t.insert(f).into(u);t.setStyles(i).on(a);t.setAttributes(s).on(a);t.setStyles(r).on(f);t.setStyles(n).on(u);var l="onwebkitspeechchange"in a?"webkitspeechchange":"speechchange";t.observe(a,l,function(){o.execCommand("insertText",a.value);a.value=""});t.observe(a,"click",function(e){if(t.hasClass(u,"wysihtml5-command-disabled")){e.preventDefault()}e.stopPropagation()})}})(wysihtml5);(function(e){var t="wysihtml5-command-disabled",n="wysihtml5-commands-disabled",r="wysihtml5-command-active",i="wysihtml5-action-active",s=e.dom;e.toolbar.Toolbar=Base.extend({constructor:function(t,n){this.editor=t;this.container=typeof n==="string"?document.getElementById(n):n;this.composer=t.composer;this._getLinks("command");this._getLinks("action");this._observe();this.show();var r=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),i=r.length,s=0;for(;s<i;s++){new e.toolbar.Speech(this,r[s])}},_getLinks:function(t){var n=this[t+"Links"]=e.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+t+"]")).get(),r=n.length,i=0,s=this[t+"Mapping"]={},o,u,a,f,l;for(;i<r;i++){o=n[i];a=o.getAttribute("data-wysihtml5-"+t);f=o.getAttribute("data-wysihtml5-"+t+"-value");u=this.container.querySelector("[data-wysihtml5-"+t+"-group='"+a+"']");l=this._getDialog(o,a);s[a+":"+f]={link:o,group:u,name:a,value:f,dialog:l,state:false}}},_getDialog:function(t,n){var r=this,i=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']"),s,o;if(i){s=new e.toolbar.Dialog(t,i);s.observe("show",function(){o=r.composer.selection.getBookmark();r.editor.fire("show:dialog",{command:n,dialogContainer:i,commandLink:t})});s.observe("save",function(e){if(o){r.composer.selection.setBookmark(o)}r._execCommand(n,e);r.editor.fire("save:dialog",{command:n,dialogContainer:i,commandLink:t})});s.observe("cancel",function(){r.editor.focus(false);r.editor.fire("cancel:dialog",{command:n,dialogContainer:i,commandLink:t})})}return s},execCommand:function(e,t){if(this.commandsDisabled){return}var n=this.commandMapping[e+":"+t];if(n&&n.dialog&&!n.state){n.dialog.show()}else{this._execCommand(e,t)}},_execCommand:function(e,t){this.editor.focus(false);this.composer.commands.exec(e,t);this._updateLinkStates()},execAction:function(e){var t=this.editor;switch(e){case"change_view":if(t.currentView===t.textarea){t.fire("change_view","composer")}else{t.fire("change_view","textarea")}break}},_observe:function(){var e=this,t=this.editor,r=this.container,i=this.commandLinks.concat(this.actionLinks),o=i.length,u=0;for(;u<o;u++){s.setAttributes({href:"javascript:;",unselectable:"on"}).on(i[u])}s.delegate(r,"[data-wysihtml5-command]","mousedown",function(e){e.preventDefault()});s.delegate(r,"[data-wysihtml5-command]","click",function(t){var n=this,r=n.getAttribute("data-wysihtml5-command"),i=n.getAttribute("data-wysihtml5-command-value");e.execCommand(r,i);t.preventDefault()});s.delegate(r,"[data-wysihtml5-action]","click",function(t){var n=this.getAttribute("data-wysihtml5-action");e.execAction(n);t.preventDefault()});t.observe("focus:composer",function(){e.bookmark=null;clearInterval(e.interval);e.interval=setInterval(function(){e._updateLinkStates()},500)});t.observe("blur:composer",function(){clearInterval(e.interval)});t.observe("destroy:composer",function(){clearInterval(e.interval)});t.observe("change_view",function(t){setTimeout(function(){e.commandsDisabled=t!=="composer";e._updateLinkStates();if(e.commandsDisabled){s.addClass(r,n)}else{s.removeClass(r,n)}},0)})},_updateLinkStates:function(){var n=this.composer.element,o=this.commandMapping,u=this.actionMapping,a,f,l,c;for(a in o){c=o[a];if(this.commandsDisabled){f=false;s.removeClass(c.link,r);if(c.group){s.removeClass(c.group,r)}if(c.dialog){c.dialog.hide()}}else{f=this.composer.commands.state(c.name,c.value);if(e.lang.object(f).isArray()){f=f.length===1?f[0]:true}s.removeClass(c.link,t);if(c.group){s.removeClass(c.group,t)}}if(c.state===f){continue}c.state=f;if(f){s.addClass(c.link,r);if(c.group){s.addClass(c.group,r)}if(c.dialog){if(typeof f==="object"){c.dialog.show(f)}else{c.dialog.hide()}}}else{s.removeClass(c.link,r);if(c.group){s.removeClass(c.group,r)}if(c.dialog){c.dialog.hide()}}}for(a in u){l=u[a];if(l.name==="change_view"){l.state=this.editor.currentView===this.editor.textarea;if(l.state){s.addClass(l.link,i)}else{s.removeClass(l.link,i)}}}},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})})(wysihtml5);(function(e){var t;var n={name:t,style:true,toolbar:t,autoLink:true,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:e.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:t,allowObjectResizing:true,supportTouchDevices:true};e.Editor=e.lang.Dispatcher.extend({constructor:function(t,r){this.textareaElement=typeof t==="string"?document.getElementById(t):t;this.config=e.lang.object({}).merge(n).merge(r).get();this.textarea=new e.views.Textarea(this,this.textareaElement,this.config);this.currentView=this.textarea;this._isCompatible=e.browser.supported();if(!this._isCompatible||!this.config.supportTouchDevices&&e.browser.isTouchDevice()){var i=this;setTimeout(function(){i.fire("beforeload").fire("load")},0);return}e.dom.addClass(document.body,this.config.bodyClassName);this.composer=new e.views.Composer(this,this.textareaElement,this.config);this.currentView=this.composer;if(typeof this.config.parser==="function"){this._initParser()}this.observe("beforeload",function(){this.synchronizer=new e.views.Synchronizer(this,this.textarea,this.composer);if(this.config.toolbar){this.toolbar=new e.toolbar.Toolbar(this,this.config.toolbar)}});try{console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")}catch(s){}},isCompatible:function(){return this._isCompatible},clear:function(){this.currentView.clear();return this},getValue:function(e){return this.currentView.getValue(e)},setValue:function(e,t){if(!e){return this.clear()}this.currentView.setValue(e,t);return this},focus:function(e){this.currentView.focus(e);return this},disable:function(){this.currentView.disable();return this},enable:function(){this.currentView.enable();return this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(t){var n=this.config.parser(t,this.config.parserRules,this.composer.sandbox.getDocument(),true);if(typeof t==="object"){e.quirks.redraw(t)}return n},_initParser:function(){this.observe("paste:composer",function(){var t=true,n=this;n.composer.selection.executeAndRestore(function(){e.quirks.cleanPastedHTML(n.composer.element);n.parse(n.composer.element)},t)});this.observe("paste:textarea",function(){var e=this.textarea.getValue(),t;t=this.parse(e);this.textarea.setValue(t)})}})})(wysihtml5);!function(e,t){"use strict";var n={"font-styles":function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li class='dropdown'>"+"<a class='btn dropdown-toggle"+n+"' data-toggle='dropdown' href='#'>"+"<i class='icon-font'></i>&nbsp;<span class='current-font'>"+e.font_styles.normal+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1'>"+e.font_styles.normal+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1'>"+e.font_styles.h1+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1'>"+e.font_styles.h2+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1'>"+e.font_styles.h3+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h4'>"+e.font_styles.h4+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h5'>"+e.font_styles.h5+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h6'>"+e.font_styles.h6+"</a></li>"+"</ul>"+"</li>"},emphasis:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li>"+"<div class='btn-group'>"+"<a class='btn"+n+"' data-wysihtml5-command='bold' title='CTRL+B' tabindex='-1'>"+e.emphasis.bold+"</a>"+"<a class='btn"+n+"' data-wysihtml5-command='italic' title='CTRL+I' tabindex='-1'>"+e.emphasis.italic+"</a>"+"<a class='btn"+n+"' data-wysihtml5-command='underline' title='CTRL+U' tabindex='-1'>"+e.emphasis.underline+"</a>"+"</div>"+"</li>"},lists:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li>"+"<div class='btn-group'>"+"<a class='btn"+n+"' data-wysihtml5-command='insertUnorderedList' title='"+e.lists.unordered+"' tabindex='-1'><i class='icon-list'></i></a>"+"<a class='btn"+n+"' data-wysihtml5-command='insertOrderedList' title='"+e.lists.ordered+"' tabindex='-1'><i class='icon-th-list'></i></a>"+"<a class='btn"+n+"' data-wysihtml5-command='Outdent' title='"+e.lists.outdent+"' tabindex='-1'><i class='icon-indent-right'></i></a>"+"<a class='btn"+n+"' data-wysihtml5-command='Indent' title='"+e.lists.indent+"' tabindex='-1'><i class='icon-indent-left'></i></a>"+"</div>"+"</li>"},link:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li>"+"<div class='bootstrap-wysihtml5-insert-link-modal modal hide fade'>"+"<div class='modal-header'>"+"<a class='close' data-dismiss='modal'>&times;</a>"+"<h3>"+e.link.insert+"</h3>"+"</div>"+"<div class='modal-body'>"+"<input value='http://' class='bootstrap-wysihtml5-insert-link-url input-xlarge'>"+"<label class='checkbox'> <input type='checkbox' class='bootstrap-wysihtml5-insert-link-target' checked>"+e.link.target+"</label>"+"</div>"+"<div class='modal-footer'>"+"<a href='#' class='btn' data-dismiss='modal'>"+e.link.cancel+"</a>"+"<a href='#' class='btn btn-primary' data-dismiss='modal'>"+e.link.insert+"</a>"+"</div>"+"</div>"+"<a class='btn"+n+"' data-wysihtml5-command='createLink' title='"+e.link.insert+"' tabindex='-1'><i class='icon-share'></i></a>"+"</li>"},image:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li>"+"<div class='bootstrap-wysihtml5-insert-image-modal modal hide fade'>"+"<div class='modal-header'>"+"<a class='close' data-dismiss='modal'>&times;</a>"+"<h3>"+e.image.insert+"</h3>"+"</div>"+"<div class='modal-body'>"+"<input value='http://' class='bootstrap-wysihtml5-insert-image-url input-xlarge'>"+"</div>"+"<div class='modal-footer'>"+"<a href='#' class='btn' data-dismiss='modal'>"+e.image.cancel+"</a>"+"<a href='#' class='btn btn-primary' data-dismiss='modal'>"+e.image.insert+"</a>"+"</div>"+"</div>"+"<a class='btn"+n+"' data-wysihtml5-command='insertImage' title='"+e.image.insert+"' tabindex='-1'><i class='icon-picture'></i></a>"+"</li>"},html:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li>"+"<div class='btn-group'>"+"<a class='btn"+n+"' data-wysihtml5-action='change_view' title='"+e.html.edit+"' tabindex='-1'><i class='icon-pencil'></i></a>"+"</div>"+"</li>"},color:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li class='dropdown'>"+"<a class='btn dropdown-toggle"+n+"' data-toggle='dropdown' href='#' tabindex='-1'>"+"<span class='current-color'>"+e.colours.black+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+e.colours.black+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+e.colours.silver+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+e.colours.gray+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+e.colours.maroon+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+e.colours.red+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+e.colours.purple+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+e.colours.green+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+e.colours.olive+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+e.colours.navy+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+e.colours.blue+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+e.colours.orange+"</a></li>"+"</ul>"+"</li>"}};var r=function(e,t,r){return n[e](t,r)};var i=function(t,r){this.el=t;var i=r||o;for(var s in i.customTemplates){n[s]=i.customTemplates[s]}this.toolbar=this.createToolbar(t,i);this.editor=this.createEditor(r);window.editor=this.editor;e("iframe.wysihtml5-sandbox").each(function(t,n){e(n.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){e("li.dropdown").removeClass("open")}})})};i.prototype={constructor:i,createEditor:function(n){n=n||{};n=e.extend(true,{},n);n.toolbar=this.toolbar[0];var r=new t.Editor(this.el[0],n);if(n&&n.events){for(var i in n.events){r.on(i,n.events[i])}}return r},createToolbar:function(t,n){var i=this;var s=e("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"});var a=n.locale||o.locale||"en";for(var f in o){var l=false;if(n[f]!==undefined){if(n[f]===true){l=true}}else{l=o[f]}if(l===true){s.append(r(f,u[a],n));if(f==="html"){this.initHtml(s)}if(f==="link"){this.initInsertLink(s)}if(f==="image"){this.initInsertImage(s)}}}if(n.toolbar){for(f in n.toolbar){s.append(n.toolbar[f])}}s.find("a[data-wysihtml5-command='formatBlock']").click(function(t){var n=t.target||t.srcElement;var r=e(n);i.toolbar.find(".current-font").text(r.html())});s.find("a[data-wysihtml5-command='foreColor']").click(function(t){var n=t.target||t.srcElement;var r=e(n);i.toolbar.find(".current-color").text(r.html())});this.el.before(s);return s},initHtml:function(e){var t="a[data-wysihtml5-action='change_view']";e.find(t).click(function(n){e.find("a.btn").not(t).toggleClass("disabled")})},initInsertImage:function(t){var n=this;var r=t.find(".bootstrap-wysihtml5-insert-image-modal");var i=r.find(".bootstrap-wysihtml5-insert-image-url");var s=r.find("a.btn-primary");var o=i.val();var u;var a=function(){var e=i.val();i.val(o);n.editor.currentView.element.focus();if(u){n.editor.composer.selection.setBookmark(u);u=null}n.editor.composer.commands.exec("insertImage",e)};i.keypress(function(e){if(e.which==13){a();r.modal("hide")}});s.click(a);r.on("shown",function(){i.focus()});r.on("hide",function(){n.editor.currentView.element.focus()});t.find("a[data-wysihtml5-command=insertImage]").click(function(){var t=e(this).hasClass("wysihtml5-command-active");if(!t){n.editor.currentView.element.focus(false);u=n.editor.composer.selection.getBookmark();r.appendTo("body").modal("show");r.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()});return false}else{return true}})},initInsertLink:function(t){var n=this;var r=t.find(".bootstrap-wysihtml5-insert-link-modal");var i=r.find(".bootstrap-wysihtml5-insert-link-url");var s=r.find(".bootstrap-wysihtml5-insert-link-target");var o=r.find("a.btn-primary");var u=i.val();var a;var f=function(){var e=i.val();i.val(u);n.editor.currentView.element.focus();if(a){n.editor.composer.selection.setBookmark(a);a=null}var t=s.prop("checked");n.editor.composer.commands.exec("createLink",{href:e,target:t?"_blank":"_self",rel:t?"nofollow":""})};var l=false;i.keypress(function(e){if(e.which==13){f();r.modal("hide")}});o.click(f);r.on("shown",function(){i.focus()});r.on("hide",function(){n.editor.currentView.element.focus()});t.find("a[data-wysihtml5-command=createLink]").click(function(){var t=e(this).hasClass("wysihtml5-command-active");if(!t){n.editor.currentView.element.focus(false);a=n.editor.composer.selection.getBookmark();r.appendTo("body").modal("show");r.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()});return false}else{return true}})}};var s={resetDefaults:function(){e.fn.wysihtml5.defaultOptions=e.extend(true,{},e.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var n=e(this);n.data("wysihtml5",new i(n,t))})},shallowExtend:function(t){var n=e.extend({},e.fn.wysihtml5.defaultOptions,t||{},e(this).data());var r=this;return s.bypassDefaults.apply(r,[n])},deepExtend:function(t){var n=e.extend(true,{},e.fn.wysihtml5.defaultOptions,t||{});var r=this;return s.bypassDefaults.apply(r,[n])},init:function(e){var t=this;return s.shallowExtend.apply(t,[e])}};e.fn.wysihtml5=function(t){if(s[t]){return s[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return s.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.wysihtml5")}};e.fn.wysihtml5.Constructor=i;var o=e.fn.wysihtml5.defaultOptions={"font-styles":true,color:false,emphasis:true,lists:true,html:false,link:true,image:true,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url",target:"alt",rel:"alt"}},span:1,div:1,code:1,pre:1}},stylesheets:["./lib/css/wysiwyg-color.css"],locale:"en"};if(typeof e.fn.wysihtml5.defaultOptionsCache==="undefined"){e.fn.wysihtml5.defaultOptionsCache=e.extend(true,{},e.fn.wysihtml5.defaultOptions)}var u=e.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5);$.extend(true,$.fn.dataTable.defaults,{sDom:"<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",sPaginationType:"bootstrap",oLanguage:{sLengthMenu:"_MENU_ records per page"}});$.extend($.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-inline"});$.fn.dataTableExt.oApi.fnPagingInfo=function(e){return{iStart:e._iDisplayStart,iEnd:e.fnDisplayEnd(),iLength:e._iDisplayLength,iTotal:e.fnRecordsTotal(),iFilteredTotal:e.fnRecordsDisplay(),iPage:e._iDisplayLength===-1?0:Math.ceil(e._iDisplayStart/e._iDisplayLength),iTotalPages:e._iDisplayLength===-1?0:Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength)}};$.extend($.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(e,t,n){var r=e.oLanguage.oPaginate;var i=function(t){t.preventDefault();if(e.oApi._fnPageChange(e,t.data.action)){n(e)}};$(t).append('<ul class="pagination">'+'<li class="prev disabled"><a href="#">&larr; '+r.sPrevious+"</a></li>"+'<li class="next disabled"><a href="#">'+r.sNext+" &rarr; </a></li>"+"</ul>");var s=$("a",t);$(s[0]).bind("click.DT",{action:"previous"},i);$(s[1]).bind("click.DT",{action:"next"},i)},fnUpdate:function(e,t){var n=5;var r=e.oInstance.fnPagingInfo();var i=e.aanFeatures.p;var s,o,u,a,f,l,c=Math.floor(n/2);if(r.iTotalPages<n){f=1;l=r.iTotalPages}else if(r.iPage<=c){f=1;l=n}else if(r.iPage>=r.iTotalPages-c){f=r.iTotalPages-n+1;l=r.iTotalPages}else{f=r.iPage-c+1;l=f+n-1}for(s=0,o=i.length;s<o;s++){$("li:gt(0)",i[s]).filter(":not(:last)").remove();for(u=f;u<=l;u++){a=u==r.iPage+1?'class="active"':"";$("<li "+a+'><a href="#">'+u+"</a></li>").insertBefore($("li:last",i[s])[0]).bind("click",function(n){n.preventDefault();e._iDisplayStart=(parseInt($("a",this).text(),10)-1)*r.iLength;t(e)})}if(r.iPage===0){$("li:first",i[s]).addClass("disabled")}else{$("li:first",i[s]).removeClass("disabled")}if(r.iPage===r.iTotalPages-1||r.iTotalPages===0){$("li:last",i[s]).addClass("disabled")}else{$("li:last",i[s]).removeClass("disabled")}}}}});if($.fn.DataTable.TableTools){$.extend(true,$.fn.DataTable.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info modal"},select:{row:"active"}});$.extend(true,$.fn.DataTable.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}})}$.fn.dataTableExt.oApi.fnReloadAjax=function(e,t,n,r){if(t!==undefined&&t!==null){e.sAjaxSource=t}if(e.oFeatures.bServerSide){this.fnDraw();return}this.oApi._fnProcessingDisplay(e,true);var i=this;var s=e._iDisplayStart;var o=[];this.oApi._fnServerParams(e,o);e.fnServerData.call(e.oInstance,e.sAjaxSource,o,function(t){i.oApi._fnClearTable(e);var o=e.sAjaxDataProp!==""?i.oApi._fnGetObjectDataFn(e.sAjaxDataProp)(t):t;for(var u=0;u<o.length;u++){i.oApi._fnAddData(e,o[u])}e.aiDisplay=e.aiDisplayMaster.slice();i.fnDraw();if(r===true){e._iDisplayStart=s;i.oApi._fnCalculateEnd(e);i.fnDraw(false)}i.oApi._fnProcessingDisplay(e,false);if(typeof n=="function"&&n!==null){n(e)}},e)};(function(e,t,n){function G(n,r,i){var o=t.createElement(n);if(r){o.id=s+r}if(i){o.style.cssText=i}return e(o)}function Y(){return n.innerHeight?n.innerHeight:e(n).height()}function Z(e){var t=E.length,n=(q+e)%t;return n<0?t+n:n}function et(e,t){return Math.round((/%/.test(e)?(t==="x"?S.width():Y())/100:1)*parseInt(e,10))}function tt(e,t){return e.photo||e.photoRegex.test(t)}function nt(e,t){return e.retinaUrl&&n.devicePixelRatio>1?t.replace(e.photoRegex,e.retinaSuffix):t}function rt(e){if("contains"in d[0]&&!d[0].contains(e.target)){e.stopPropagation();d.focus()}}function it(){var t,n=e.data(I,i);if(n==null){P=e.extend({},r);if(console&&console.log){console.log("Error: cboxElement missing settings object")}}else{P=e.extend({},n)}for(t in P){if(e.isFunction(P[t])&&t.slice(0,2)!=="on"){P[t]=P[t].call(I)}}P.rel=P.rel||I.rel||e(I).data("rel")||"nofollow";P.href=P.href||e(I).attr("href");P.title=P.title||I.title;if(typeof P.href==="string"){P.href=e.trim(P.href)}}function st(n,r){e(t).trigger(n);D.trigger(n);if(e.isFunction(r)){r.call(I)}}function ot(){var e,t=s+"Slideshow_",n="click."+s,r,i,o,u;if(P.slideshow&&E[1]){r=function(){clearTimeout(e)};i=function(){if(P.loop||E[q+1]){e=setTimeout(V.next,P.slideshowSpeed)}};o=function(){L.html(P.slideshowStop).unbind(n).one(n,u);D.bind(f,i).bind(a,r).bind(l,u);d.removeClass(t+"off").addClass(t+"on")};u=function(){r();D.unbind(f,i).unbind(a,r).unbind(l,u);L.html(P.slideshowStart).unbind(n).one(n,function(){V.next();o()});d.removeClass(t+"on").addClass(t+"off")};if(P.slideshowAuto){o()}else{u()}}else{d.removeClass(t+"off "+t+"on")}}function ut(n){if(!W){I=n;it();E=e(I);q=0;if(P.rel!=="nofollow"){E=e("."+o).filter(function(){var t=e.data(this,i),n;if(t){n=e(this).data("rel")||t.rel||this.rel}return n===P.rel});q=E.index(I);if(q===-1){E=E.add(I);q=E.length-1}}p.css({opacity:parseFloat(P.opacity),cursor:P.overlayClose?"pointer":"auto",visibility:"visible"}).show();if(J){d.add(p).removeClass(J)}if(P.className){d.add(p).addClass(P.className)}J=P.className;M.html(P.close).show();if(!U){U=z=true;d.css({visibility:"hidden",display:"block"});x=G($,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(m);H=g.height()+w.height()+m.outerHeight(true)-m.height();B=y.width()+b.width()+m.outerWidth(true)-m.width();j=x.outerHeight(true);F=x.outerWidth(true);P.w=et(P.initialWidth,"x");P.h=et(P.initialHeight,"y");V.position();ot();st(u,P.onOpen);_.add(C).hide();d.focus();if(P.trapFocus){if(t.addEventListener){t.addEventListener("focus",rt,true);D.one(c,function(){t.removeEventListener("focus",rt,true)})}}if(P.returnFocus){D.one(c,function(){e(I).focus()})}}lt()}}function at(){if(!d&&t.body){Q=false;S=e(n);d=G($).attr({id:i,"class":e.support.opacity===false?s+"IE":"",role:"dialog",tabindex:"-1"}).hide();p=G($,"Overlay").hide();N=G($,"LoadingOverlay").add(G($,"LoadingGraphic"));v=G($,"Wrapper");m=G($,"Content").append(C=G($,"Title"),k=G($,"Current"),O=e('<button type="button"/>').attr({id:s+"Previous"}),A=e('<button type="button"/>').attr({id:s+"Next"}),L=G("button","Slideshow"),N,M=e('<button type="button"/>').attr({id:s+"Close"}));v.append(G($).append(G($,"TopLeft"),g=G($,"TopCenter"),G($,"TopRight")),G($,false,"clear:left").append(y=G($,"MiddleLeft"),m,b=G($,"MiddleRight")),G($,false,"clear:left").append(G($,"BottomLeft"),w=G($,"BottomCenter"),G($,"BottomRight"))).find("div div").css({"float":"left"});T=G($,false,"position:absolute; width:9999px; visibility:hidden; display:none");_=A.add(O).add(k).add(L);e(t.body).append(p,d.append(v,T))}}function ft(){function n(e){if(!(e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey)){e.preventDefault();ut(this)}}if(d){if(!Q){Q=true;A.click(function(){V.next()});O.click(function(){V.prev()});M.click(function(){V.close()});p.click(function(){if(P.overlayClose){V.close()}});e(t).bind("keydown."+s,function(e){var t=e.keyCode;if(U&&P.escKey&&t===27){e.preventDefault();V.close()}if(U&&P.arrowKey&&E[1]&&!e.altKey){if(t===37){e.preventDefault();O.click()}else if(t===39){e.preventDefault();A.click()}}});if(e.isFunction(e.fn.on)){e(t).on("click."+s,"."+o,n)}else{e("."+o).live("click."+s,n)}}return true}return false}function lt(){var r,i,o=V.prep,u,f=++K;z=true;R=false;I=E[q];it();st(h);st(a,P.onLoad);P.h=P.height?et(P.height,"y")-j-H:P.innerHeight&&et(P.innerHeight,"y");P.w=P.width?et(P.width,"x")-F-B:P.innerWidth&&et(P.innerWidth,"x");P.mw=P.w;P.mh=P.h;if(P.maxWidth){P.mw=et(P.maxWidth,"x")-F-B;P.mw=P.w&&P.w<P.mw?P.w:P.mw}if(P.maxHeight){P.mh=et(P.maxHeight,"y")-j-H;P.mh=P.h&&P.h<P.mh?P.h:P.mh}r=P.href;X=setTimeout(function(){N.show()},100);if(P.inline){u=G($).hide().insertBefore(e(r)[0]);D.one(h,function(){u.replaceWith(x.children())});o(e(r))}else if(P.iframe){o(" ")}else if(P.html){o(P.html)}else if(tt(P,r)){r=nt(P,r);R=t.createElement("img");e(R).addClass(s+"Photo").bind("error",function(){P.title=false;o(G($,"Error").html(P.imgError))}).one("load",function(){var t;if(f!==K){return}R.alt=e(I).attr("alt")||e(I).attr("data-alt")||"";if(P.retinaImage&&n.devicePixelRatio>1){R.height=R.height/n.devicePixelRatio;R.width=R.width/n.devicePixelRatio}if(P.scalePhotos){i=function(){R.height-=R.height*t;R.width-=R.width*t};if(P.mw&&R.width>P.mw){t=(R.width-P.mw)/R.width;i()}if(P.mh&&R.height>P.mh){t=(R.height-P.mh)/R.height;i()}}if(P.h){R.style.marginTop=Math.max(P.mh-R.height,0)/2+"px"}if(E[1]&&(P.loop||E[q+1])){R.style.cursor="pointer";R.onclick=function(){V.next()}}R.style.width=R.width+"px";R.style.height=R.height+"px";setTimeout(function(){o(R)},1)});setTimeout(function(){R.src=r},1)}else if(r){T.load(r,P.data,function(t,n){if(f===K){o(n==="error"?G($,"Error").html(P.xhrError):e(this).contents())}})}}var r={transition:"elastic",speed:300,fadeOut:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:.9,preloading:true,className:false,retinaImage:false,retinaUrl:false,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:false,returnFocus:true,trapFocus:true,reposition:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:undefined},i="colorbox",s="cbox",o=s+"Element",u=s+"_open",a=s+"_load",f=s+"_complete",l=s+"_cleanup",c=s+"_closed",h=s+"_purge",p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D=e("<a/>"),P,H,B,j,F,I,q,R,U,z,W,X,V,$="div",J,K=0,Q;if(e.colorbox){return}e(at);V=e.fn[i]=e[i]=function(t,n){var s=this;t=t||{};at();if(ft()){if(e.isFunction(s)){s=e("<a/>");t.open=true}else if(!s[0]){return s}if(n){t.onComplete=n}s.each(function(){e.data(this,i,e.extend({},e.data(this,i)||r,t))}).addClass(o);if(e.isFunction(t.open)&&t.open.call(s)||t.open){ut(s[0])}}return s};V.position=function(e,t){function f(e){g[0].style.width=w[0].style.width=m[0].style.width=parseInt(e.style.width,10)-B+"px";m[0].style.height=y[0].style.height=b[0].style.height=parseInt(e.style.height,10)-H+"px"}var n,r=0,i=0,o=d.offset(),u,a;S.unbind("resize."+s);d.css({top:-9e4,left:-9e4});u=S.scrollTop();a=S.scrollLeft();if(P.fixed){o.top-=u;o.left-=a;d.css({position:"fixed"})}else{r=u;i=a;d.css({position:"absolute"})}if(P.right!==false){i+=Math.max(S.width()-P.w-F-B-et(P.right,"x"),0)}else if(P.left!==false){i+=et(P.left,"x")}else{i+=Math.round(Math.max(S.width()-P.w-F-B,0)/2)}if(P.bottom!==false){r+=Math.max(Y()-P.h-j-H-et(P.bottom,"y"),0)}else if(P.top!==false){r+=et(P.top,"y")}else{r+=Math.round(Math.max(Y()-P.h-j-H,0)/2)}d.css({top:o.top,left:o.left,visibility:"visible"});e=d.width()===P.w+F&&d.height()===P.h+j?0:e||0;v[0].style.width=v[0].style.height="9999px";n={width:P.w+F+B,height:P.h+j+H,top:r,left:i};if(e===0){d.css(n)}d.dequeue().animate(n,{duration:e,complete:function(){f(this);z=false;v[0].style.width=P.w+F+B+"px";v[0].style.height=P.h+j+H+"px";if(P.reposition){setTimeout(function(){S.bind("resize."+s,V.position)},1)}if(t){t()}},step:function(){f(this)}})};V.resize=function(e){var t;if(U){e=e||{};if(e.width){P.w=et(e.width,"x")-F-B}if(e.innerWidth){P.w=et(e.innerWidth,"x")}x.css({width:P.w});if(e.height){P.h=et(e.height,"y")-j-H}if(e.innerHeight){P.h=et(e.innerHeight,"y")}if(!e.innerHeight&&!e.height){t=x.scrollTop();x.css({height:"auto"});P.h=x.height()}x.css({height:P.h});if(t){x.scrollTop(t)}V.position(P.transition==="none"?0:P.speed)}};V.prep=function(n){function u(){P.w=P.w||x.width();P.w=P.mw&&P.mw<P.w?P.mw:P.w;return P.w}function a(){P.h=P.h||x.height();P.h=P.mh&&P.mh<P.h?P.mh:P.h;return P.h}if(!U){return}var r,o=P.transition==="none"?0:P.speed;x.empty().remove();x=G($,"LoadedContent").append(n);x.hide().appendTo(T.show()).css({width:u(),overflow:P.scrolling?"auto":"hidden"}).css({height:a()}).prependTo(m);T.hide();e(R).css({"float":"none"});r=function(){function c(){if(e.support.opacity===false){d[0].style.removeAttribute("filter")}}var n=E.length,r,u="frameBorder",a="allowTransparency",l;if(!U){return}l=function(){clearTimeout(X);N.hide();st(f,P.onComplete)};C.html(P.title).add(x).show();if(n>1){if(typeof P.current==="string"){k.html(P.current.replace("{current}",q+1).replace("{total}",n)).show()}A[P.loop||q<n-1?"show":"hide"]().html(P.next);O[P.loop||q?"show":"hide"]().html(P.previous);if(P.slideshow){L.show()}if(P.preloading){e.each([Z(-1),Z(1)],function(){var n,r,s=E[this],o=e.data(s,i);if(o&&o.href){n=o.href;if(e.isFunction(n)){n=n.call(s)}}else{n=e(s).attr("href")}if(n&&tt(o,n)){n=nt(o,n);r=t.createElement("img");r.src=n}})}}else{_.hide()}if(P.iframe){r=G("iframe")[0];if(u in r){r[u]=0}if(a in r){r[a]="true"}if(!P.scrolling){r.scrolling="no"}e(r).attr({src:P.href,name:(new Date).getTime(),"class":s+"Iframe",allowFullScreen:true,webkitAllowFullScreen:true,mozallowfullscreen:true}).one("load",l).appendTo(x);D.one(h,function(){r.src="//about:blank"});if(P.fastIframe){e(r).trigger("load")}}else{l()}if(P.transition==="fade"){d.fadeTo(o,1,c)}else{c()}};if(P.transition==="fade"){d.fadeTo(o,0,function(){V.position(0,r)})}else{V.position(o,r)}};V.next=function(){if(!z&&E[1]&&(P.loop||E[q+1])){q=Z(1);ut(E[q])}};V.prev=function(){if(!z&&E[1]&&(P.loop||q)){q=Z(-1);ut(E[q])}};V.close=function(){if(U&&!W){W=true;U=false;st(l,P.onCleanup);S.unbind("."+s);p.fadeTo(P.fadeOut||0,0);d.stop().fadeTo(P.fadeOut||0,0,function(){d.add(p).css({opacity:1,cursor:"auto"}).hide();st(h);x.empty().remove();setTimeout(function(){W=false;st(c,P.onClosed)},1)})}};V.remove=function(){if(!d){return}d.stop();e.colorbox.close();d.stop().remove();p.remove();W=false;d=null;e("."+o).removeData(i).removeClass(o);e(t).unbind("click."+s)};V.element=function(){return e(I)};V.settings=r})(jQuery,document,window);var q=null;window.PR_SHOULD_USE_CONTINUATION=!0;(function(){function e(e){function t(e){var t=e.charCodeAt(0);if(t!==92)return t;var n=e.charAt(1);return(t=c[n])?t:"0"<=n&&n<="7"?parseInt(e.substring(1),8):n==="u"||n==="x"?parseInt(e.substring(2),16):e.charCodeAt(1)}function n(e){if(e<32)return(e<16?"\\x0":"\\x")+e.toString(16);e=String.fromCharCode(e);if(e==="\\"||e==="-"||e==="["||e==="]")e="\\"+e;return e}function r(e){for(var r=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),e=[],i=[],s=r[0]==="^",o=s?1:0,u=r.length;o<u;++o){var a=r[o];if(/\\[bdsw]/i.test(a))e.push(a);else{var a=t(a),f;o+2<u&&"-"===r[o+1]?(f=t(r[o+2]),o+=2):f=a;i.push([a,f]);f<65||a>122||(f<65||a>90||i.push([Math.max(65,a)|32,Math.min(f,90)|32]),f<97||a>122||i.push([Math.max(97,a)&-33,Math.min(f,122)&-33]))}}i.sort(function(e,t){return e[0]-t[0]||t[1]-e[1]});r=[];a=[NaN,NaN];for(o=0;o<i.length;++o)u=i[o],u[0]<=a[1]+1?a[1]=Math.max(a[1],u[1]):r.push(a=u);i=["["];s&&i.push("^");i.push.apply(i,e);for(o=0;o<r.length;++o)u=r[o],i.push(n(u[0])),u[1]>u[0]&&(u[1]+1>u[0]&&i.push("-"),i.push(n(u[1])));i.push("]");return i.join("")}function i(e){for(var t=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),n=t.length,i=[],u=0,a=0;u<n;++u){var f=t[u];f==="("?++a:"\\"===f.charAt(0)&&(f=+f.substring(1))&&f<=a&&(i[f]=-1)}for(u=1;u<i.length;++u)-1===i[u]&&(i[u]=++s);for(a=u=0;u<n;++u)f=t[u],f==="("?(++a,i[a]===void 0&&(t[u]="(?:")):"\\"===f.charAt(0)&&(f=+f.substring(1))&&f<=a&&(t[u]="\\"+i[a]);for(a=u=0;u<n;++u)"^"===t[u]&&"^"!==t[u+1]&&(t[u]="");if(e.ignoreCase&&o)for(u=0;u<n;++u)f=t[u],e=f.charAt(0),f.length>=2&&e==="["?t[u]=r(f):e!=="\\"&&(t[u]=f.replace(/[A-Za-z]/g,function(e){e=e.charCodeAt(0);return"["+String.fromCharCode(e&-33,e|32)+"]"}));return t.join("")}for(var s=0,o=!1,u=!1,a=0,f=e.length;a<f;++a){var l=e[a];if(l.ignoreCase)u=!0;else if(/[a-z]/i.test(l.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){o=!0;u=!1;break}}for(var c={b:8,t:9,n:10,v:11,f:12,r:13},h=[],a=0,f=e.length;a<f;++a){l=e[a];if(l.global||l.multiline)throw Error(""+l);h.push("(?:"+i(l)+")")}return RegExp(h.join("|"),u?"gi":"g")}function t(e){function t(e){switch(e.nodeType){case 1:if(n.test(e.className))break;for(var u=e.firstChild;u;u=u.nextSibling)t(u);u=e.nodeName;if("BR"===u||"LI"===u)r[o]="\n",s[o<<1]=i++,s[o++<<1|1]=e;break;case 3:case 4:u=e.nodeValue,u.length&&(u=a?u.replace(/\r\n?/g,"\n"):u.replace(/[\t\n\r ]+/g," "),r[o]=u,s[o<<1]=i,i+=u.length,s[o++<<1|1]=e)}}var n=/(?:^|\s)nocode(?:\s|$)/,r=[],i=0,s=[],o=0,u;e.currentStyle?u=e.currentStyle.whiteSpace:window.getComputedStyle&&(u=document.defaultView.getComputedStyle(e,q).getPropertyValue("white-space"));var a=u&&"pre"===u.substring(0,3);t(e);return{a:r.join("").replace(/\n$/,""),c:s}}function n(e,t,n,r){t&&(e={a:t,d:e},n(e),r.push.apply(r,e.e))}function r(t,r){function i(e){for(var t=e.d,f=[t,"pln"],l=0,c=e.a.match(o)||[],h={},p=0,d=c.length;p<d;++p){var v=c[p],m=h[v],g=void 0,y;if(typeof m==="string")y=!1;else{var b=s[v.charAt(0)];if(b)g=v.match(b[1]),m=b[0];else{for(y=0;y<a;++y)if(b=r[y],g=v.match(b[1])){m=b[0];break}g||(m="pln")}if((y=m.length>=5&&"lang-"===m.substring(0,5))&&!(g&&typeof g[1]==="string"))y=!1,m="src";y||(h[v]=m)}b=l;l+=v.length;if(y){y=g[1];var w=v.indexOf(y),E=w+y.length;g[2]&&(E=v.length-g[2].length,w=E-y.length);m=m.substring(5);n(t+b,v.substring(0,w),i,f);n(t+b+w,y,u(m,y),f);n(t+b+E,v.substring(E),i,f)}else f.push(t+b,m)}e.e=f}var s={},o;(function(){for(var n=t.concat(r),i=[],u={},a=0,f=n.length;a<f;++a){var l=n[a],c=l[3];if(c)for(var h=c.length;--h>=0;)s[c.charAt(h)]=l;l=l[1];c=""+l;u.hasOwnProperty(c)||(i.push(l),u[c]=q)}i.push(/[\S\s]/);o=e(i)})();var a=r.length;return i}function i(e){var t=[],n=[];e.tripleQuotedStrings?t.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):e.multiLineStrings?t.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]):t.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]);e.verbatimStrings&&n.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var i=e.hashComments;i&&(e.cStyleComments?(i>1?t.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):t.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),n.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,q])):t.push(["com",/^#[^\n\r]*/,q,"#"]));e.cStyleComments&&(n.push(["com",/^\/\/[^\n\r]*/,q]),n.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q]));e.regexLiterals&&n.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]);(i=e.types)&&n.push(["typ",i]);e=(""+e.keywords).replace(/^ | $/g,"");e.length&&n.push(["kwd",RegExp("^(?:"+e.replace(/[\s,]+/g,"|")+")\\b"),q]);t.push(["pln",/^\s+/,q," \r\n	 "]);n.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",/^.[^\s\w"-$'./@\\`]*/,q]);return r(t,n)}function s(e,t){function n(e){switch(e.nodeType){case 1:if(i.test(e.className))break;if("BR"===e.nodeName)r(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)n(e);break;case 3:case 4:if(a){var t=e.nodeValue,u=t.match(s);if(u){var f=t.substring(0,u.index);e.nodeValue=f;(t=t.substring(u.index+u[0].length))&&e.parentNode.insertBefore(o.createTextNode(t),e.nextSibling);r(e);f||e.parentNode.removeChild(e)}}}}function r(e){function t(e,n){var r=n?e.cloneNode(!1):e,i=e.parentNode;if(i){var i=t(i,1),s=e.nextSibling;i.appendChild(r);for(var o=s;o;o=s)s=o.nextSibling,i.appendChild(o)}return r}for(;!e.nextSibling;)if(e=e.parentNode,!e)return;for(var e=t(e.nextSibling,0),n;(n=e.parentNode)&&n.nodeType===1;)e=n;f.push(e)}var i=/(?:^|\s)nocode(?:\s|$)/,s=/\r\n?|\n/,o=e.ownerDocument,u;e.currentStyle?u=e.currentStyle.whiteSpace:window.getComputedStyle&&(u=o.defaultView.getComputedStyle(e,q).getPropertyValue("white-space"));var a=u&&"pre"===u.substring(0,3);for(u=o.createElement("LI");e.firstChild;)u.appendChild(e.firstChild);for(var f=[u],l=0;l<f.length;++l)n(f[l]);t===(t|0)&&f[0].setAttribute("value",t);var c=o.createElement("OL");c.className="linenums";for(var h=Math.max(0,t-1|0)||0,l=0,p=f.length;l<p;++l)u=f[l],u.className="L"+(l+h)%10,u.firstChild||u.appendChild(o.createTextNode(" ")),c.appendChild(u);e.appendChild(c)}function o(e,t){for(var n=t.length;--n>=0;){var r=t[n];b.hasOwnProperty(r)?window.console&&console.warn("cannot override language handler %s",r):b[r]=e}}function u(e,t){if(!e||!b.hasOwnProperty(e))e=/^\s*</.test(t)?"default-markup":"default-code";return b[e]}function a(e){var n=e.g;try{var r=t(e.h),i=r.a;e.a=i;e.c=r.c;e.d=0;u(n,i)(e);var s=/\bMSIE\b/.test(navigator.userAgent),n=/\n/g,o=e.a,a=o.length,r=0,f=e.c,l=f.length,i=0,c=e.e,h=c.length,e=0;c[h]=a;var p,d;for(d=p=0;d<h;)c[d]!==c[d+2]?(c[p++]=c[d++],c[p++]=c[d++]):d+=2;h=p;for(d=p=0;d<h;){for(var v=c[d],m=c[d+1],g=d+2;g+2<=h&&c[g+1]===m;)g+=2;c[p++]=v;c[p++]=m;d=g}for(c.length=p;i<l;){var y=f[i+2]||a,b=c[e+2]||a,g=Math.min(y,b),w=f[i+1],E;if(w.nodeType!==1&&(E=o.substring(r,g))){s&&(E=E.replace(n,"\r"));w.nodeValue=E;var S=w.ownerDocument,x=S.createElement("SPAN");x.className=c[e+1];var T=w.parentNode;T.replaceChild(x,w);x.appendChild(w);r<y&&(f[i+1]=w=S.createTextNode(o.substring(g,y)),T.insertBefore(w,x.nextSibling))}r=g;r>=y&&(i+=2);r>=b&&(e+=2)}}catch(N){"console"in window&&console.log(N&&N.stack?N.stack:N)}}var f=["break,continue,do,else,for,if,return,while"],l=[[f,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],c=[l,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],h=[l,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],p=[h,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],l=[l,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],d=[f,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],v=[f,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],f=[f,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],m=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,g=/\S/,y=i({keywords:[c,p,l,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+d,v,f],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),b={};o(y,["default-code"]);o(r([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);o(r([["pln",/^\s+/,q," 	\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]);o(r([],[["atv",/^[\S\s]+/]]),["uq.val"]);o(i({keywords:c,hashComments:!0,cStyleComments:!0,types:m}),["c","cc","cpp","cxx","cyc","m"]);o(i({keywords:"null,true,false"}),["json"]);o(i({keywords:p,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:m}),["cs"]);o(i({keywords:h,cStyleComments:!0}),["java"]);o(i({keywords:f,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]);o(i({keywords:d,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]);o(i({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]);o(i({keywords:v,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]);o(i({keywords:l,cStyleComments:!0,regexLiterals:!0}),["js"]);o(i({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);o(r([],[["str",/^[\S\s]+/]]),["regex"]);window.prettyPrintOne=function(e,t,n){var r=document.createElement("PRE");r.innerHTML=e;n&&s(r,n);a({g:t,i:n,h:r});return r.innerHTML};window.prettyPrint=function(e){function t(){for(var n=window.PR_SHOULD_USE_CONTINUATION?f.now()+250:Infinity;l<r.length&&f.now()<n;l++){var i=r[l],o=i.className;if(o.indexOf("prettyprint")>=0){var o=o.match(h),u,p;if(p=!o){p=i;for(var d=void 0,v=p.firstChild;v;v=v.nextSibling)var m=v.nodeType,d=m===1?d?p:v:m===3?g.test(v.nodeValue)?p:d:d;p=(u=d===p?void 0:d)&&"CODE"===u.tagName}p&&(o=u.className.match(h));o&&(o=o[1]);p=!1;for(d=i.parentNode;d;d=d.parentNode)if((d.tagName==="pre"||d.tagName==="code"||d.tagName==="xmp")&&d.className&&d.className.indexOf("prettyprint")>=0){p=!0;break}p||((p=(p=i.className.match(/\blinenums\b(?::(\d+))?/))?p[1]&&p[1].length?+p[1]:!0:!1)&&s(i,p),c={g:o,h:i,i:p},a(c))}}l<r.length?setTimeout(t,250):e&&e()}for(var n=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],r=[],i=0;i<n.length;++i)for(var o=0,u=n[i].length;o<u;++o)r.push(n[i][o]);var n=q,f=Date;f.now||(f={now:function(){return+(new Date)}});var l=0,c,h=/\blang(?:uage)?-([\w.]+)(?!\S)/;t()};window.PR={createSimpleLexer:r,registerLangHandler:o,sourceDecorator:i,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}})();(function(e){"use strict";var t={i18n:{ru:{months:["ÃÂ¯ÃÂ½ÃÂ²ÃÂ°Ãâ¬ÃÅ","ÃÂ¤ÃÂµÃÂ²Ãâ¬ÃÂ°ÃÂ»ÃÅ","ÃÅÃÂ°Ãâ¬Ãâ","ÃÂÃÂ¿Ãâ¬ÃÂµÃÂ»ÃÅ","ÃÅÃÂ°ÃÂ¹","ÃËÃÅ½ÃÂ½ÃÅ","ÃËÃÅ½ÃÂ»ÃÅ","ÃÂÃÂ²ÃÂ³ÃÆÃÂÃâ","ÃÂ¡ÃÂµÃÂ½ÃâÃÂÃÂ±Ãâ¬ÃÅ","ÃÅ¾ÃÂºÃâÃÂÃÂ±Ãâ¬ÃÅ","ÃÂÃÂ¾ÃÂÃÂ±Ãâ¬ÃÅ","ÃâÃÂµÃÂºÃÂ°ÃÂ±Ãâ¬ÃÅ"],dayOfWeek:["ÃâÃÂÃÂº","ÃÅ¸ÃÂ½","ÃâÃâ","ÃÂ¡Ãâ¬","ÃÂ§Ãâ","ÃÅ¸Ãâ","ÃÂ¡ÃÂ±"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},de:{months:["Januar","Februar","MÃÂ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","ÃÅ¾ubat","Mart","Nisan","MayÃÂ±s","Haziran","Temmuz","AÃÅ¸ustos","EylÃÂ¼l","Ekim","KasÃÂ±m","AralÃÂ±k"],dayOfWeek:["Paz","Pts","Sal","Ãâ¡ar","Per","Cum","Cts"]},fr:{months:["Janvier","FÃÂ©vrier","Mars","Avril","Mai","Juin","Juillet","AoÃÂ»t","Septembre","Octobre","Novembre","DÃÂ©cembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","MiÃÂ©","Jue","Vie","SÃÂ¡b"]},th:{months:["Ã Â¸Â¡Ã Â¸ÂÃ Â¸Â£Ã Â¸Â²Ã Â¸âÃ Â¸Â¡","Ã Â¸ÂÃ Â¸Â¸Ã Â¸Â¡Ã Â¸ Ã Â¸Â²Ã Â¸Å¾Ã Â¸Â±Ã Â¸â¢Ã Â¸ËÃ Â¹Å","Ã Â¸Â¡Ã Â¸ÂµÃ Â¸â¢Ã Â¸Â²Ã Â¸âÃ Â¸Â¡","Ã Â¹â¬Ã Â¸Â¡Ã Â¸Â©Ã Â¸Â²Ã Â¸Â¢Ã Â¸â¢","Ã Â¸Å¾Ã Â¸Â¤Ã Â¸Â©Ã Â¸ Ã Â¸Â²Ã Â¸âÃ Â¸Â¡","Ã Â¸Â¡Ã Â¸Â´Ã Â¸âÃ Â¸Â¸Ã Â¸â¢Ã Â¸Â²Ã Â¸Â¢Ã Â¸â¢","Ã Â¸ÂÃ Â¸Â£Ã Â¸ÂÃ Â¸Å½Ã Â¸Â²Ã Â¸âÃ Â¸Â¡","Ã Â¸ÂªÃ Â¸Â´Ã Â¸â¡Ã Â¸Â«Ã Â¸Â²Ã Â¸âÃ Â¸Â¡","Ã Â¸ÂÃ Â¸Â±Ã Â¸â¢Ã Â¸Â¢Ã Â¸Â²Ã Â¸Â¢Ã Â¸â¢","Ã Â¸â¢Ã Â¸Â¸Ã Â¸Â¥Ã Â¸Â²Ã Â¸âÃ Â¸Â¡","Ã Â¸Å¾Ã Â¸Â¤Ã Â¸Â¨Ã Â¸ËÃ Â¸Â´Ã Â¸ÂÃ Â¸Â²Ã Â¸Â¢Ã Â¸â¢","Ã Â¸ËÃ Â¸Â±Ã Â¸â¢Ã Â¸Â§Ã Â¸Â²Ã Â¸âÃ Â¸Â¡"],dayOfWeek:["Ã Â¸Â­Ã Â¸Â².","Ã Â¸Ë.","Ã Â¸Â­.","Ã Â¸Å¾.","Ã Â¸Å¾Ã Â¸Â¤.","Ã Â¸Â¨.","Ã Â¸Âª."]},pl:{months:["styczeÃâ","luty","marzec","kwiecieÃâ","maj","czerwiec","lipiec","sierpieÃâ","wrzesieÃâ","paÃÂºdziernik","listopad","grudzieÃâ"],dayOfWeek:["nd","pn","wt","Ãâºr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","MarÃÂ§o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["Ã¤Â¸â¬Ã¦ÅË","Ã¤ÂºÅÃ¦ÅË","Ã¤Â¸â°Ã¦ÅË","Ã¥âºâºÃ¦ÅË","Ã¤ÂºâÃ¦ÅË","Ã¥â¦Â­Ã¦ÅË","Ã¤Â¸ÆÃ¦ÅË","Ã¥â¦Â«Ã¦ÅË","Ã¤Â¹ÂÃ¦ÅË","Ã¥ÂÂÃ¦ÅË","Ã¥ÂÂÃ¤Â¸â¬Ã¦ÅË","Ã¥ÂÂÃ¤ÂºÅÃ¦ÅË"],dayOfWeek:["Ã¦âÂ¥","Ã¤Â¸â¬","Ã¤ÂºÅ","Ã¤Â¸â°","Ã¥âºâº","Ã¤Âºâ","Ã¥â¦Â­"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["SÃÂ¶n","MÃÂ¥n","Tis","Ons","Tor","Fre","LÃÂ¶r"]},kr:{months:["1Ã¬âºâ","2Ã¬âºâ","3Ã¬âºâ","4Ã¬âºâ","5Ã¬âºâ","6Ã¬âºâ","7Ã¬âºâ","8Ã¬âºâ","9Ã¬âºâ","10Ã¬âºâ","11Ã¬âºâ","12Ã¬âºâ"],dayOfWeek:["Ã¬ÂÂ¼","Ã¬âºâ","Ã­â¢â","Ã¬ËË","Ã«ÂªÂ©","ÃªÂ¸Ë","Ã­â  "]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",step:60,closeOnDateSelect:0,closeOnWithoutClick:true,timepicker:true,datepicker:true,minDate:false,maxDate:false,minTime:false,maxTime:false,allowTimes:[],opened:false,initTime:true,inline:false,onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:true,inverseButton:false,hours12:false,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,timeHeightInTimePicker:25,timepickerScrollbar:true,todayButton:true,defaultSelect:true,scrollMonth:true,scrollTime:true,scrollInput:true,mask:false,validateOnBlur:true,allowBlank:false,yearStart:1950,yearEnd:2050,style:"",id:"",roundTime:"round",className:"",weekends:[],yearOffset:0};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n++){if(this[n]===e){return n}}return-1}}e.fn.xdsoftScroller=function(t){return this.each(function(){var n=e(this);if(!e(this).hasClass("xdsoft_scroller_box")){var r=function(e){var t={x:0,y:0};if(e.type=="touchstart"||e.type=="touchmove"||e.type=="touchend"||e.type=="touchcancel"){var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.x=n.pageX;t.y=n.pageY}else if(e.type=="mousedown"||e.type=="mouseup"||e.type=="mousemove"||e.type=="mouseover"||e.type=="mouseout"||e.type=="mouseenter"||e.type=="mouseleave"){t.x=e.pageX;t.y=e.pageY}return t},i=0,s=n.children().eq(0),o=n[0].clientHeight,u=s[0].offsetHeight,a=e('<div class="xdsoft_scrollbar"></div>'),f=e('<div class="xdsoft_scroller"></div>'),l=100,c=false;a.append(f);n.addClass("xdsoft_scroller_box").append(a);f.on("mousedown.xdsoft_scroller",function(r){if(!o)n.trigger("resize_scroll.xdsoft_scroller",[t]);var s=r.pageY,u=parseInt(f.css("margin-top")),c=a[0].offsetHeight;e(document.body).addClass("xdsoft_noselect");e([document.body,window]).on("mouseup.xdsoft_scroller",function h(){e([document.body,window]).off("mouseup.xdsoft_scroller",h).off("mousemove.xdsoft_scroller",i).removeClass("xdsoft_noselect")});e(document.body).on("mousemove.xdsoft_scroller",i=function(e){var t=e.pageY-s+u;if(t<0)t=0;if(t+f[0].offsetHeight>c)t=c-f[0].offsetHeight;n.trigger("scroll_element.xdsoft_scroller",[l?t/l:0])})});n.on("scroll_element.xdsoft_scroller",function(e,t){if(!o)n.trigger("resize_scroll.xdsoft_scroller",[t,true]);t=t>1?1:t<0||isNaN(t)?0:t;f.css("margin-top",l*t);s.css("marginTop",-parseInt((u-o)*t))}).on("resize_scroll.xdsoft_scroller",function(e,t,r){o=n[0].clientHeight;u=s[0].offsetHeight;var i=o/u,c=i*a[0].offsetHeight;if(i>1)f.hide();else{f.show();f.css("height",parseInt(c>10?c:10));l=a[0].offsetHeight-f[0].offsetHeight;if(r!==true)n.trigger("scroll_element.xdsoft_scroller",[t?t:Math.abs(parseInt(s.css("marginTop")))/(u-o)])}});n.mousewheel&&n.mousewheel(function(e,t,r,i){var a=Math.abs(parseInt(s.css("marginTop")));n.trigger("scroll_element.xdsoft_scroller",[(a-t*20)/(u-o)]);e.stopPropagation();return false});n.on("touchstart",function(e){c=r(e)});n.on("touchmove",function(e){if(c){var t=r(e),i=Math.abs(parseInt(s.css("marginTop")));n.trigger("scroll_element.xdsoft_scroller",[(i-(t.y-c.y))/(u-o)]);e.stopPropagation();e.preventDefault()}});n.on("touchend touchcancel",function(e){c=false})}n.trigger("resize_scroll.xdsoft_scroller",[t])})};e.fn.datetimepicker=function(n){var r=48,i=57,s=96,o=105,u=17,a=46,f=13,l=27,c=8,h=37,p=38,d=39,v=40,m=9,g=116,y=65,b=67,w=86,E=90,S=89,x=false,T=e.isPlainObject(n)||!n?e.extend(true,{},t,n):e.extend({},t),N=function(t){var n=e("<div "+(T.id?'id="'+T.id+'"':"")+" "+(T.style?'style="'+T.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_noselect '+T.className+'"></div>'),N=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),C=e('<div class="xdsoft_datepicker active"></div>'),k=e('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span></div><div class="xdsoft_label xdsoft_year"><span></span></div><button type="button" class="xdsoft_next"></button></div>'),L=e('<div class="xdsoft_calendar"></div>'),A=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),O=A.find(".xdsoft_time_box").eq(0),M=e('<div class="xdsoft_time_variant"></div>'),_=e('<div class="xdsoft_scrollbar"></div>'),D=e('<div class="xdsoft_scroller"></div>'),P=e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),H=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>');k.find(".xdsoft_month span").after(P);k.find(".xdsoft_year span").after(H);k.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(t){k.find(".xdsoft_select").hide();var n=e(this).find(".xdsoft_select").eq(0),r=0,i=0;if(j.currentTime)r=j.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]();n.show();for(var s=n.find("div.xdsoft_option"),o=0;o<s.length;o++){if(s.eq(o).data("value")==r){break}else i+=s[0].offsetHeight}n.xdsoftScroller(i/(n.children()[0].offsetHeight-n[0].clientHeight));t.stopPropagation();return false});k.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(e){e.stopPropagation();e.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(t){if(j&&j.currentTime)j.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value"));e(this).parent().parent().hide();n.trigger("xchange.xdsoft");T.onChangeMonth&&T.onChangeMonth.call&&T.onChangeMonth.call(n,j.currentTime,n.data("input"))});n.setOptions=function(N){T=e.extend(true,{},T,N);if((T.open||T.opened)&&!T.inline){t.trigger("open.xdsoft")}if(T.inline){n.addClass("xdsoft_inline");t.after(n).hide();n.trigger("afterOpen.xdsoft")}if(T.inverseButton){T.next="xdsoft_prev";T.prev="xdsoft_next"}if(T.datepicker)C.addClass("active");else C.removeClass("active");if(T.timepicker)A.addClass("active");else A.removeClass("active");if(T.value){t&&t.val&&t.val(T.value);j.setCurrentTime(T.value)}if(isNaN(T.dayOfWeekStart)||parseInt(T.dayOfWeekStart)<0||parseInt(T.dayOfWeekStart)>6)T.dayOfWeekStart=0;else T.dayOfWeekStart=parseInt(T.dayOfWeekStart);if(!T.timepickerScrollbar)_.hide();var L=[],O;if(T.minDate&&(L=/^-(.*)$/.exec(T.minDate))&&(L=Date.parseDate(L[1],T.formatDate))){O=L.getTime()+ -1*L.getTimezoneOffset()*6e4;T.minDate=(new Date(j.now().getTime()-O)).dateFormat(T.formatDate)}if(T.maxDate&&(L=/^\+(.*)$/.exec(T.maxDate))&&(L=Date.parseDate(L[1],T.formatDate))){O=L.getTime()+ -1*L.getTimezoneOffset()*6e4;T.maxDate=(new Date(j.now().getTime()+O)).dateFormat(T.formatDate)}k.find(".xdsoft_today_button").css("visibility",!T.todayButton?"hidden":"visible");if(T.mask){var M,D=function(e){try{if(document.selection&&document.selection.createRange){var t=document.selection.createRange();return t.getBookmark().charCodeAt(2)-2}else if(e.setSelectionRange)return e.selectionStart}catch(n){return 0}},P=function(e,t){var e=typeof e=="string"||e instanceof String?document.getElementById(e):e;if(!e){return false}else if(e.createTextRange){var n=e.createTextRange();n.collapse(true);n.moveEnd(t);n.moveStart(t);n.select();return true}else if(e.setSelectionRange){e.setSelectionRange(t,t);return true}return false},H=function(e,t){var n=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return RegExp(n).test(t)};t.off("keydown.xdsoft");switch(true){case T.mask===true:T.mask=T.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59");case e.type(T.mask)=="string":if(!H(T.mask,t.val()))t.val(T.mask.replace(/[0-9]/g,"_"));t.on("keydown.xdsoft",function(n){var N=this.value,C=n.which;switch(true){case C>=r&&C<=i||C>=s&&C<=o||C==c||C==a:var k=D(this),L=C!=c&&C!=a?String.fromCharCode(s<=C&&C<=o?C-r:C):"_";if((C==c||C==a)&&k){k--;L="_"}while(/[^0-9_]/.test(T.mask.substr(k,1))&&k<T.mask.length&&k>0)k+=C==c||C==a?-1:1;N=N.substr(0,k)+L+N.substr(k+1);if(e.trim(N)=="")N=T.mask.replace(/[0-9]/g,"_");else if(k==T.mask.length)break;k+=C==c||C==a?0:1;while(/[^0-9_]/.test(T.mask.substr(k,1))&&k<T.mask.length&&k>0)k+=C==c||C==a?-1:1;if(H(T.mask,N)){this.value=N;P(this,k)}else if(e.trim(N)=="")this.value=T.mask.replace(/[0-9]/g,"_");else{t.trigger("error_input.xdsoft")}break;case!!~[y,b,w,E,S].indexOf(C)&&x:case!!~[l,p,v,h,d,g,u,m,f].indexOf(C):return true}n.preventDefault();return false});break}}if(T.validateOnBlur){t.off("blur.xdsoft").on("blur.xdsoft",function(){if(T.allowBlank&&!e.trim(e(this).val()).length){e(this).val(null);n.data("xdsoft_datetime").empty()}else if(!Date.parseDate(e(this).val(),T.format)){e(this).val(j.now().dateFormat(T.format));n.data("xdsoft_datetime").setCurrentTime(e(this).val())}else{n.data("xdsoft_datetime").setCurrentTime(e(this).val())}n.trigger("changedatetime.xdsoft")})}T.dayOfWeekStartPrev=T.dayOfWeekStart==0?6:T.dayOfWeekStart-1;n.trigger("xchange.xdsoft")};n.data("options",T).on("mousedown.xdsoft",function(e){e.stopPropagation();e.preventDefault();H.hide();P.hide();return false});var B=A.find(".xdsoft_time_box");B.append(M);B.xdsoftScroller();n.on("afterOpen.xdsoft",function(){B.xdsoftScroller()});n.append(C).append(A);if(T.withoutCopyright!==true)n.append(N);C.append(k).append(L);e("body").append(n);var j=new function(){var e=this;e.now=function(){var e=new Date;if(T.yearOffset)e.setFullYear(e.getFullYear()+T.yearOffset);return e};e.currentTime=this.now();e.isValidDate=function(e){if(Object.prototype.toString.call(e)!=="[object Date]")return false;return!isNaN(e.getTime())};e.setCurrentTime=function(t){e.currentTime=typeof t=="string"?e.strtodatetime(t):e.isValidDate(t)?t:e.now();n.trigger("xchange.xdsoft")};e.empty=function(){e.currentTime=null};e.getCurrentTime=function(t){return e.currentTime};e.nextMonth=function(){var t=e.currentTime.getMonth()+1;if(t==12){e.currentTime.setFullYear(e.currentTime.getFullYear()+1);t=0}e.currentTime.setDate(Math.min(Date.daysInMonth[t],e.currentTime.getDate()));e.currentTime.setMonth(t);T.onChangeMonth&&T.onChangeMonth.call&&T.onChangeMonth.call(n,j.currentTime,n.data("input"));n.trigger("xchange.xdsoft");return t};e.prevMonth=function(){var t=e.currentTime.getMonth()-1;if(t==-1){e.currentTime.setFullYear(e.currentTime.getFullYear()-1);t=11}e.currentTime.setDate(Math.min(Date.daysInMonth[t],e.currentTime.getDate()));e.currentTime.setMonth(t);T.onChangeMonth&&T.onChangeMonth.call&&T.onChangeMonth.call(n,j.currentTime,n.data("input"));n.trigger("xchange.xdsoft");return t};e.strtodatetime=function(t){var n=t?Date.parseDate(t,T.format):e.now();if(!e.isValidDate(n))n=e.now();return n};e.strtodate=function(t){var n=t?Date.parseDate(t,T.formatDate):e.now();if(!e.isValidDate(n))n=e.now();return n};e.strtotime=function(t){var n=t?Date.parseDate(t,T.formatTime):e.now();if(!e.isValidDate(n))n=e.now();return n};e.str=function(){return e.currentTime.dateFormat(T.format)}};k.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){n.data("changed",true);j.setCurrentTime(0);n.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){t.val(j.str());n.trigger("close.xdsoft")});k.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,r=false;(function i(e){var s=j.currentTime.getMonth();if(t.hasClass(T.next)){j.nextMonth()}else if(t.hasClass(T.prev)){j.prevMonth()}!r&&(n=setTimeout(i,e?e:100))})(500);e([document.body,window]).on("mouseup.xdsoft",function s(){clearTimeout(n);r=true;e([document.body,window]).off("mouseup.xdsoft",s)})});A.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,r=false,i=110;(function s(e){var o=O[0].clientHeight,u=M[0].offsetHeight,a=Math.abs(parseInt(M.css("marginTop")));if(t.hasClass(T.next)&&u-o-T.timeHeightInTimePicker>=a){M.css("marginTop","-"+(a+T.timeHeightInTimePicker)+"px")}else if(t.hasClass(T.prev)&&a-T.timeHeightInTimePicker>=0){M.css("marginTop","-"+(a-T.timeHeightInTimePicker)+"px")}O.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(M.css("marginTop"))/(u-o))]);i=i>10?10:i-10;!r&&(n=setTimeout(s,e?e:i))})(500);e([document.body,window]).on("mouseup.xdsoft",function o(){clearTimeout(n);r=true;e([document.body,window]).off("mouseup.xdsoft",o)})});n.on("xchange.xdsoft",function(t){var r="",i=new Date(j.currentTime.getFullYear(),j.currentTime.getMonth(),1,12,0,0),s=0,o=j.now();while(i.getDay()!=T.dayOfWeekStart)i.setDate(i.getDate()-1);r+="<table><thead><tr>";for(var u=0;u<7;u++){r+="<th>"+T.i18n[T.lang].dayOfWeek[u+T.dayOfWeekStart>6?0:u+T.dayOfWeekStart]+"</th>"}r+="</tr></thead>";r+="<tbody><tr>";var a=false,f=false;if(T.maxDate!==false){a=j.strtodate(T.maxDate);a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59,999)}if(T.minDate!==false){f=j.strtodate(T.minDate);f=new Date(f.getFullYear(),f.getMonth(),f.getDate())}var l,c,h,p=[];while(s<j.currentTime.getDaysInMonth()||i.getDay()!=T.dayOfWeekStart||j.currentTime.getMonth()==i.getMonth()){p=[];s++;l=i.getDate();c=i.getFullYear();h=i.getMonth();p.push("xdsoft_date");if(a!==false&&i>a||f!==false&&i<f){p.push("xdsoft_disabled")}if(j.currentTime.getMonth()!=h)p.push("xdsoft_other_month");if((T.defaultSelect||n.data("changed"))&&j.currentTime.dateFormat("d.m.Y")==i.dateFormat("d.m.Y")){p.push("xdsoft_current")}if(o.dateFormat("d.m.Y")==i.dateFormat("d.m.Y")){p.push("xdsoft_today")}if(i.getDay()==0||i.getDay()==6||~T.weekends.indexOf(i.dateFormat("d.m.Y"))){p.push("xdsoft_weekend")}r+='<td data-date="'+l+'" data-month="'+h+'" data-year="'+c+'"'+' class="xdsoft_date xdsoft_day_of_week'+i.getDay()+" "+p.join(" ")+'">'+"<div>"+l+"</div>"+"</td>";if(i.getDay()==T.dayOfWeekStartPrev){r+="</tr>"}i.setDate(l+1)}r+="</tbody></table>";L.html(r);k.find(".xdsoft_label span").eq(0).text(T.i18n[T.lang].months[j.currentTime.getMonth()]);k.find(".xdsoft_label span").eq(1).text(j.currentTime.getFullYear());var d="",v="",h="",m=function(t,r){var i=j.now();i.setHours(t);t=parseInt(i.getHours());i.setMinutes(r);r=parseInt(i.getMinutes());p=[];if(T.maxTime!==false&&j.strtotime(T.maxTime).getTime()<i.getTime()||T.minTime!==false&&j.strtotime(T.minTime).getTime()>i.getTime())p.push("xdsoft_disabled");if((T.initTime||T.defaultSelect||n.data("changed"))&&parseInt(j.currentTime.getHours())==parseInt(t)&&(T.step>59||Math[T.roundTime](j.currentTime.getMinutes()/T.step)*T.step==parseInt(r))){if(T.defaultSelect||n.data("changed")){p.push("xdsoft_current")}else if(T.initTime){p.push("xdsoft_init_time")}}if(parseInt(o.getHours())==parseInt(t)&&parseInt(o.getMinutes())==parseInt(r))p.push("xdsoft_today");d+='<div class="xdsoft_time '+p.join(" ")+'" data-hour="'+t+'" data-minute="'+r+'">'+i.dateFormat(T.formatTime)+"</div>"};if(!T.allowTimes||!e.isArray(T.allowTimes)||!T.allowTimes.length){for(var s=0,u=0;s<(T.hours12?12:24);s++){for(u=0;u<60;u+=T.step){v=(s<10?"0":"")+s;h=(u<10?"0":"")+u;m(v,h)}}}else{for(var s=0;s<T.allowTimes.length;s++){v=j.strtotime(T.allowTimes[s]).getHours();h=j.strtotime(T.allowTimes[s]).getMinutes();m(v,h)}}M.html(d);var g="",s=0;for(s=parseInt(T.yearStart,10)+T.yearOffset;s<=parseInt(T.yearEnd,10)+T.yearOffset;s++){g+='<div class="xdsoft_option '+(j.currentTime.getFullYear()==s?"xdsoft_current":"")+'" data-value="'+s+'">'+s+"</div>"}H.children().eq(0).html(g);for(s=0,g="";s<=11;s++){g+='<div class="xdsoft_option '+(j.currentTime.getMonth()==s?"xdsoft_current":"")+'" data-value="'+s+'">'+T.i18n[T.lang].months[s]+"</div>"}P.children().eq(0).html(g);e(this).trigger("generate.xdsoft");t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(T.timepicker){var e;if(M.find(".xdsoft_current").length){e=".xdsoft_current"}else if(M.find(".xdsoft_init_time").length){e=".xdsoft_init_time"}if(e){var t=O[0].clientHeight,n=M[0].offsetHeight,r=M.find(e).index()*T.timeHeightInTimePicker+1;if(n-t<r)r=n-t;M.css("marginTop","-"+parseInt(r)+"px");O.trigger("scroll_element.xdsoft_scroller",[parseInt(r)/(n-t)])}}});var F=0;L.on("click.xdsoft","td",function(){F++;var r=e(this),i=j.currentTime;if(r.hasClass("xdsoft_disabled"))return false;i.setFullYear(r.data("year"));i.setMonth(r.data("month"));i.setDate(r.data("date"));n.trigger("select.xdsoft",[i]);t.val(j.str());if((F>1||T.closeOnDateSelect===true||T.closeOnDateSelect===0&&!T.timepicker)&&!T.inline){n.trigger("close.xdsoft")}if(T.onSelectDate&&T.onSelectDate.call){T.onSelectDate.call(n,j.currentTime,n.data("input"))}n.data("changed",true);n.trigger("xchange.xdsoft");n.trigger("changedatetime.xdsoft");setTimeout(function(){F=0},200)});M.on("click.xdsoft","div",function(){var t=e(this),r=j.currentTime;if(t.hasClass("xdsoft_disabled"))return false;r.setHours(t.data("hour"));r.setMinutes(t.data("minute"));n.trigger("select.xdsoft",[r]);n.data("input").val(j.str());!T.inline&&n.trigger("close.xdsoft");if(T.onSelectTime&&T.onSelectTime.call){T.onSelectTime.call(n,j.currentTime,n.data("input"))}n.data("changed",true);n.trigger("xchange.xdsoft");n.trigger("changedatetime.xdsoft")});n.mousewheel&&C.mousewheel(function(e,t,n,r){if(!T.scrollMonth)return true;if(t<0)j.nextMonth();else j.prevMonth();return false});n.mousewheel&&O.unmousewheel().mousewheel(function(e,t,n,r){if(!T.scrollTime)return true;var i=O[0].clientHeight,s=M[0].offsetHeight,o=Math.abs(parseInt(M.css("marginTop"))),u=true;if(t<0&&s-i-T.timeHeightInTimePicker>=o){M.css("marginTop","-"+(o+T.timeHeightInTimePicker)+"px");u=false}else if(t>0&&o-T.timeHeightInTimePicker>=0){M.css("marginTop","-"+(o-T.timeHeightInTimePicker)+"px");u=false}O.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(M.css("marginTop"))/(s-i))]);e.stopPropagation();return u});n.on("changedatetime.xdsoft",function(){if(T.onChangeDateTime&&T.onChangeDateTime.call)T.onChangeDateTime.call(n,j.currentTime,n.data("input"))}).on("generate.xdsoft",function(){if(T.onGenerate&&T.onGenerate.call)T.onGenerate.call(n,j.currentTime,n.data("input"))});var I=0;t.mousewheel&&t.mousewheel(function(e,r,i,s){if(!T.scrollInput)return true;if(!T.datepicker&&T.timepicker){I=M.find(".xdsoft_current").length?M.find(".xdsoft_current").eq(0).index():0;if(I+r>=0&&I+r<M.children().length)I+=r;M.children().eq(I).length&&M.children().eq(I).trigger("mousedown");return false}else if(T.datepicker&&!T.timepicker){C.trigger(e,[r,i,s]);t.val&&t.val(j.str());n.trigger("changedatetime.xdsoft");return false}});var q=function(){var t=n.data("input").offset(),r=t.top+n.data("input")[0].offsetHeight-1,i=t.left;if(r+n[0].offsetHeight>e(window).height()+e(window).scrollTop())r=t.top-n[0].offsetHeight+1;if(r<0)r=0;if(i+n[0].offsetWidth>e(window).width())i=t.left-n[0].offsetWidth+n.data("input")[0].offsetWidth;n.css({left:i,top:r})};n.on("open.xdsoft",function(){var t=true;if(T.onShow&&T.onShow.call){t=T.onShow.call(n,j.currentTime,n.data("input"))}if(t!==false){n.show();n.trigger("afterOpen.xdsoft");q();e(window).off("resize.xdsoft",q).on("resize.xdsoft",q);if(T.closeOnWithoutClick){e([document.body,window]).on("mousedown.xdsoft",function r(){n.trigger("close.xdsoft");e([document.body,window]).off("mousedown.xdsoft",r)})}}}).on("close.xdsoft",function(e){var t=true;if(T.onClose&&T.onClose.call){t=T.onClose.call(n,j.currentTime,n.data("input"))}if(t!==false&&!T.opened&&!T.inline){n.hide()}e.stopPropagation()}).data("input",t);var R=0,U=0;n.data("xdsoft_datetime",j);n.setOptions(T);var z=T.value?T.value:t&&t.val&&t.val()?t.val():"";if(z&&j.isValidDate(z=Date.parseDate(z,T.format))){n.data("changed",true)}else z="";j.setCurrentTime(z?z:0);n.trigger("afterOpen.xdsoft");t.data("xdsoft_datetimepicker",n).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(e){if(t.is(":disabled")||t.is(":hidden")||!t.is(":visible"))return;clearTimeout(R);R=setTimeout(function(){if(t.is(":disabled")||t.is(":hidden")||!t.is(":visible"))return;j.setCurrentTime(t&&t.val&&t.val()?t.val():0);n.trigger("open.xdsoft")},100)}).on("keydown.xdsoft",function(t){var r=this.value,i=t.which;switch(true){case!!~[f].indexOf(i):var s=e("input:visible,textarea:visible");n.trigger("close.xdsoft");s.eq(s.index(this)+1).focus();return false;case!!~[m].indexOf(i):n.trigger("close.xdsoft");return true}})},C=function(t){var n=t.data("xdsoft_datetimepicker");if(n){n.data("xdsoft_datetime",null);n.remove();t.data("xdsoft_datetimepicker",null).off("open.xdsoft focusin.xdsoft focusout.xdsoft mousedown.xdsoft blur.xdsoft keydown.xdsoft");e(window).off("resize.xdsoft");e([window,document.body]).off("mousedown.xdsoft");t.unmousewheel&&t.unmousewheel()}};e(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){if(e.keyCode==u)x=true}).on("keyup.xdsoftctrl",function(e){if(e.keyCode==u)x=false});return this.each(function(){var t;if(t=e(this).data("xdsoft_datetimepicker")){if(e.type(n)==="string"){switch(n){case"show":e(this).select().focus();t.trigger("open.xdsoft");break;case"hide":t.trigger("close.xdsoft");break;case"destroy":C(e(this));break;case"reset":this.value=this.defaultValue;if(!this.value||!t.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,T.format)))t.data("changed",false);t.data("xdsoft_datetime").setCurrentTime(this.value);break}}else{t.setOptions(n)}return 0}else e.type(n)!=="string"&&N(e(this))})}})(jQuery);Date.parseFunctions={count:0};Date.parseRegexes=[];Date.formatFunctions={count:0};Date.prototype.dateFormat=function(e){if(Date.formatFunctions[e]==null){Date.createNewFormat(e)}var t=Date.formatFunctions[e];return this[t]()};Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;var code="Date.prototype."+funcName+" = function() {return ";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else if(special){special=false;code+="'"+String.escape(ch)+"' + "}else{code+=Date.getFormatCode(ch)}}eval(code.substring(0,code.length-3)+";}")};Date.getFormatCode=function(e){switch(e){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(e)+"' + "}};Date.parseDate=function(e,t){if(Date.parseFunctions[t]==null){Date.createParser(t)}var n=Date.parseFunctions[t];return Date[n](e)};Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++;var regexNum=Date.parseRegexes.length;var currentGroup=1;Date.parseFunctions[format]=funcName;var code="Date."+funcName+" = function(input) {\n"+"var y = -1, m = -1, d = -1, h = -1, i = -1, s = -1;\n"+"var d = new Date();\n"+"y = d.getFullYear();\n"+"m = d.getMonth();\n"+"d = d.getDate();\n"+"var results = input.match(Date.parseRegexes["+regexNum+"]);\n"+"if (results && results.length > 0) {";var regex="";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else if(special){special=false;regex+=String.escape(ch)}else{obj=Date.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g;regex+=obj.s;if(obj.g&&obj.c){code+=obj.c}}}code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n"+"{return new Date(y, m, d, h, i, s);}\n"+"else if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n"+"{return new Date(y, m, d, h, i);}\n"+"else if (y > 0 && m >= 0 && d > 0 && h >= 0)\n"+"{return new Date(y, m, d, h);}\n"+"else if (y > 0 && m >= 0 && d > 0)\n"+"{return new Date(y, m, d);}\n"+"else if (y > 0 && m >= 0)\n"+"{return new Date(y, m);}\n"+"else if (y > 0)\n"+"{return new Date(y);}\n"+"}return null;}";Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$");eval(code)};Date.formatCodeToRegex=function(e,t){switch(e){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:0,c:null,s:"(?:\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\n"+"y = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\n"+"if (h == 12) { h = 0; }\n"+"} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\n"+"if (h == 12) { h = 0; }\n"+"} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(e)}}};Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")};Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")};Date.prototype.getDayOfYear=function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t){e+=Date.daysInMonth[t]}return e+this.getDate()-1};Date.prototype.getWeekOfYear=function(){var e=this.getDayOfYear()+(4-this.getDay());var t=new Date(this.getFullYear(),0,1);var n=7-t.getDay()+4;document.write(n);return String.leftPad((e-n)/7+1,2,"0")};Date.prototype.isLeapYear=function(){var e=this.getFullYear();return(e&3)==0&&(e%100||e%400==0&&e)};Date.prototype.getFirstDayOfMonth=function(){var e=(this.getDay()-(this.getDate()-1))%7;return e<0?e+7:e};Date.prototype.getLastDayOfMonth=function(){var e=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return e<0?e+7:e};Date.prototype.getDaysInMonth=function(){Date.daysInMonth[1]=this.isLeapYear()?29:28;return Date.daysInMonth[this.getMonth()]};Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};String.escape=function(e){return e.replace(/('|\\)/g,"\\$1")};String.leftPad=function(e,t,n){var r=new String(e);if(n==null){n=" "}while(r.length<t){r=n+r}return r};Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"};(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){module.exports=e}else{e(jQuery)}})(function(e){function o(t){var n=t||window.event,s=[].slice.call(arguments,1),o=0,u=0,a=0,f=0,l=0,c;t=e.event.fix(n);t.type="mousewheel";if(n.wheelDelta){o=n.wheelDelta}if(n.detail){o=n.detail*-1}if(n.deltaY){a=n.deltaY*-1;o=a}if(n.deltaX){u=n.deltaX;o=u*-1}if(n.wheelDeltaY!==undefined){a=n.wheelDeltaY}if(n.wheelDeltaX!==undefined){u=n.wheelDeltaX*-1}f=Math.abs(o);if(!r||f<r){r=f}l=Math.max(Math.abs(a),Math.abs(u));if(!i||l<i){i=l}c=o>0?"floor":"ceil";o=Math[c](o/r);u=Math[c](u/i);a=Math[c](a/i);s.unshift(t,o,u,a);return(e.event.dispatch||e.event.handle).apply(this,s)}var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"];var n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];var r,i;if(e.event.fixHooks){for(var s=t.length;s;){e.event.fixHooks[t[--s]]=e.event.mouseHooks}}e.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var e=n.length;e;){this.addEventListener(n[--e],o,false)}}else{this.onmousewheel=o}},teardown:function(){if(this.removeEventListener){for(var e=n.length;e;){this.removeEventListener(n[--e],o,false)}}else{this.onmousewheel=null}}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.bootbox=t(e.jQuery)}(this,function a(e,t){"use strict";function n(e){var t=m[d.locale];return t?t[e]:m.en[e]}function r(t,n,r){t.stopPropagation(),t.preventDefault();var i=e.isFunction(r)&&r(t)===!1;i||n.modal("hide")}function i(e){var t,n=0;for(t in e)n++;return n}function s(t,n){var r=0;e.each(t,function(e,t){n(e,t,r++)})}function o(t){var n,r;if("object"!=typeof t)throw new Error("Please supply an object of options");if(!t.message)throw new Error("Please specify a message");return t=e.extend({},d,t),t.buttons||(t.buttons={}),t.backdrop=t.backdrop?"static":!1,n=t.buttons,r=i(n),s(n,function(t,i,s){if(e.isFunction(i)&&(i=n[t]={callback:i}),"object"!==e.type(i))throw new Error("button with key "+t+" must be an object");i.label||(i.label=t),i.className||(i.className=2>=r&&s===r-1?"btn-primary":"btn-default")}),t}function u(e,t){var n=e.length,r={};if(1>n||n>2)throw new Error("Invalid argument length");return 2===n||"string"==typeof e[0]?(r[t[0]]=e[0],r[t[1]]=e[1]):r=e[0],r}function f(t,n,r){return e.extend(!0,{},t,u(n,r))}function l(e,t,n,r){var i={className:"bootbox-"+e,buttons:c.apply(null,t)};return h(f(i,r,n),t)}function c(){for(var e={},t=0,r=arguments.length;r>t;t++){var i=arguments[t],s=i.toLowerCase(),o=i.toUpperCase();e[s]={label:n(o)}}return e}function h(e,n){var r={};return s(n,function(e,t){r[t]=!0}),s(e.buttons,function(e){if(r[e]===t)throw new Error("button key "+e+" is not allowed (options are "+n.join("\n")+")")}),e}var p={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},d={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0,container:"body"},v={};v.alert=function(){var t;if(t=l("alert",["ok"],["message","callback"],arguments),t.callback&&!e.isFunction(t.callback))throw new Error("alert requires callback property to be a function when provided");return t.buttons.ok.callback=t.onEscape=function(){return e.isFunction(t.callback)?t.callback():!0},v.dialog(t)},v.confirm=function(){var t;if(t=l("confirm",["cancel","confirm"],["message","callback"],arguments),t.buttons.cancel.callback=t.onEscape=function(){return t.callback(!1)},t.buttons.confirm.callback=function(){return t.callback(!0)},!e.isFunction(t.callback))throw new Error("confirm requires a callback");return v.dialog(t)},v.prompt=function(){var n,r,i,o,u,a,l;o=e(p.form),r={className:"bootbox-prompt",buttons:c("cancel","confirm"),value:"",inputType:"text"},n=h(f(r,arguments,["title","callback"]),["cancel","confirm"]),a=n.show===t?!0:n.show;var d=["date","time","number"],m=document.createElement("input");if(m.setAttribute("type",n.inputType),d[n.inputType]&&(n.inputType=m.type),n.message=o,n.buttons.cancel.callback=n.onEscape=function(){return n.callback(null)},n.buttons.confirm.callback=function(){var t;switch(n.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":t=u.val();break;case"checkbox":var r=u.find("input:checked");t=[],s(r,function(n,r){t.push(e(r).val())})}return n.callback(t)},n.show=!1,!n.title)throw new Error("prompt requires a title");if(!e.isFunction(n.callback))throw new Error("prompt requires a callback");if(!p.inputs[n.inputType])throw new Error("invalid prompt type");switch(u=e(p.inputs[n.inputType]),n.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":u.val(n.value);break;case"select":var y={};if(l=n.inputOptions||[],!l.length)throw new Error("prompt with select requires options");s(l,function(n,r){var i=u;if(r.value===t||r.text===t)throw new Error("given options in wrong format");r.group&&(y[r.group]||(y[r.group]=e("<optgroup/>").attr("label",r.group)),i=y[r.group]),i.append("<option value='"+r.value+"'>"+r.text+"</option>")}),s(y,function(e,t){u.append(t)}),u.val(n.value);break;case"checkbox":var w=e.isArray(n.value)?n.value:[n.value];if(l=n.inputOptions||[],!l.length)throw new Error("prompt with checkbox requires options");if(!l[0].value||!l[0].text)throw new Error("given options in wrong format");u=e("<div/>"),s(l,function(t,r){var i=e(p.inputs[n.inputType]);i.find("input").attr("value",r.value),i.find("label").append(r.text),s(w,function(e,t){t===r.value&&i.find("input").prop("checked",!0)}),u.append(i)})}return n.placeholder&&u.attr("placeholder",n.placeholder),n.pattern&&u.attr("pattern",n.pattern),o.append(u),o.on("submit",function(e){e.preventDefault(),i.find(".btn-primary").click()}),i=v.dialog(n),i.off("shown.bs.modal"),i.on("shown.bs.modal",function(){u.focus()}),a===!0&&i.modal("show"),i},v.dialog=function(t){t=o(t);var n=e(p.dialog),i=n.find(".modal-body"),u=t.buttons,a="",f={onEscape:t.onEscape};if(s(u,function(e,t){a+="<button data-bb-handler='"+e+"' type='button' class='btn "+t.className+"'>"+t.label+"</button>",f[e]=t.callback}),i.find(".bootbox-body").html(t.message),t.animate===!0&&n.addClass("fade"),t.className&&n.addClass(t.className),t.title&&i.before(p.header),t.closeButton){var l=e(p.closeButton);t.title?n.find(".modal-header").prepend(l):l.css("margin-top","-10px").prependTo(i)}return t.title&&n.find(".modal-title").html(t.title),a.length&&(i.after(p.footer),n.find(".modal-footer").html(a)),n.on("hidden.bs.modal",function(e){e.target===this&&n.remove()}),n.on("shown.bs.modal",function(){n.find(".btn-primary:first").focus()}),n.on("escape.close.bb",function(e){f.onEscape&&r(e,n,f.onEscape)}),n.on("click",".modal-footer button",function(t){var i=e(this).data("bb-handler");r(t,n,f[i])}),n.on("click",".bootbox-close-button",function(e){r(e,n,f.onEscape)}),n.on("keyup",function(e){27===e.which&&n.trigger("escape.close.bb")}),e(t.container).append(n),n.modal({backdrop:t.backdrop,keyboard:!1,show:!1}),t.show&&n.modal("show"),n},v.setDefaults=function(){var t={};2===arguments.length?t[arguments[0]]=arguments[1]:t=arguments[0],e.extend(d,t)},v.hideAll=function(){e(".bootbox").modal("hide")};var m={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"ÃÂÃâ¢ÃÂ©Ãâ¢ÃÂ¨",CANCEL:"ÃâÃâ¢ÃËÃâ¢ÃÅ",CONFIRM:"ÃÂÃâ¢ÃÂ©Ãâ¢ÃÂ¨"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},lt:{OK:"Gerai",CANCEL:"AtÃÂ¡aukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"ApstiprinÃÂt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"PotwierdÃÂº"},ru:{OK:"OK",CANCEL:"ÃÅ¾ÃâÃÂ¼ÃÂµÃÂ½ÃÂ°",CONFIRM:"ÃÅ¸Ãâ¬ÃÂ¸ÃÂ¼ÃÂµÃÂ½ÃÂ¸ÃâÃÅ"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},tr:{OK:"Tamam",CANCEL:"ÃÂ°ptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"Ã¥ÂâÃ¦Â¶Ë",CONFIRM:"Ã§Â¡Â®Ã¨Â®Â¤"},zh_TW:{OK:"OK",CANCEL:"Ã¥ÂâÃ¦Â¶Ë",CONFIRM:"Ã§Â¢ÂºÃ¨ÂªÂ"}};return v.init=function(t){return a(t||e)},v})